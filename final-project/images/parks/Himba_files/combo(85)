YUI.add("sub-photo-right-view",(function(e){e.FlickrView.create(this.name,e.FlickrView,[],{initializer:function(t){return this.nsid=t.nsid,this.photoId=t.photoId,this.backToURL=t.backToURL,this.isOwner=t.isOwner,this.showGettyWidget=!0,this.geo=t.geo||e.config.flickr.geo,""===this.get("container").get("innerHTML")&&this.setContainerHTML(""),this},subviewConfig:{"photo-charm-exif-scrappy-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1,additionalViewClasses:function(){return[this.appContext.adManager.userCanViewPhotoPageSidebar()&&!this.isMobile?"photopage-sidebar":""]}},"sub-photo-right-stats-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!0,additionalViewClasses:function(){return[this.appContext.adManager.userCanViewPhotoPageSidebar()&&!this.isMobile?"photopage-sidebar":""]}},"sub-photo-date-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!0,additionalViewClasses:function(){return[this.appContext.adManager.userCanViewPhotoPageSidebar()&&!this.isMobile?"photopage-sidebar":""]}},"photo-license-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!0},"sub-photo-submoola-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1,disabled:function(){return this.isMobile||this.appContext.getViewer().isPro||this.appContext.adManager.userCanViewPhotoPageSidebar()}},"sub-photo-tags-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1,additionalViewClasses:[""]},"sub-photo-contexts-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1},"sub-photo-additional-info-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1,additionalViewClasses:function(){return this.appContext.flipper.isFlipped("enable-dark-photopage-with-sidebar")?["enable-dark-photopage-with-sidebar"]:[]}},"getty-widget-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!1,type:"photoPage",disabled:function(){return!this.appContext.gettyHelper.canShowWidgetType()}}},loadState:function(){return new e.FlickrPromise({photo:this.appContext.getModel("photo-models",this.photoId)}).then((e=>{this.photoModel=e.photo,this.canShowGettyWidget()&&(this.showGettyWidget=!1)}))},buildContainer:function(){return this.setContainerWithTemplate("sub-photo-right",{showGettyWidget:this.showGettyWidget&&!this.appContext.flipper.isFlipped("enable-dark-photopage-with-sidebar"),shouldSeeSidebar:this.appContext.adManager.userCanViewPhotoPageSidebar()&&(this.appContext.flipper.isFlipped("enable-dark-photopage-with-sidebar")||!this.isMobile)}),this},buildErrorContainer:function(){},activate:function(){var e=this;return this.photoModel&&this.registerEventHandler(this.photoModel.on("valuesChanged",(function(t){t.safetyLevel&&e.canShowGettyWidget()}))),this},canShowGettyWidget:function(){var e=this.showGettyWidget;this.appContext.adManager.userCanViewPhotoPageSidebar()&&(this.showGettyWidget=!0),this.appContext.adManager.canShowAdWithPhoto(this.photoModel)&&this.appContext.gettyHelper.canShowWidgetType()?this.showGettyWidget=!0:this.showGettyWidget=!1,e!==this.showGettyWidget&&this.buildContainer()}})}),"@VERSION@",{requires:["flickr-view","hermes-template-sub-photo-right","sub-photo-submoola-view","url-helper"],optional:["photo-charm-exif-scrappy-view","sub-photo-right-stats-view","sub-photo-contexts-view","photo-license-view","sub-photo-date-view","sub-photo-additional-info-view","getty-widget-view"]});YUI.add("hermes-template-sub-photo-keyboard-shortcuts",(function(n,a){var e=n.Template.Handlebars.revive({1:function(n,a,e,l,t){var s,o=null!=a?a:n.nullContext||{},i=n.hooks.helperMissing,c=n.escapeExpression,r=n.lookupProperty||function(n,a){if(Object.prototype.hasOwnProperty.call(n,a))return n[a]};return'\t\t\x3c!--Favorite Shortcut --\x3e\n\t\t<div class="key-container'+(null!=(s=r(e,"if").call(o,null!=a?r(a,"isOwner"):a,{name:"if",hash:{},fn:n.program(2,t,0),inverse:n.noop,data:t,loc:{start:{line:5,column:27},end:{line:5,column:58}}}))?s:"")+'" '+(null!=(s=r(e,"unless").call(o,null!=a?r(a,"isOwner"):a,{name:"unless",hash:{},fn:n.program(4,t,0),inverse:n.noop,data:t,loc:{start:{line:5,column:60},end:{line:5,column:102}}}))?s:"")+'>\n\t\t\t<span class="favorite-key key">F</span>\n\t\t\t<span class="favorite-key-label key-label">'+c((r(e,"intlMessage")||a&&r(a,"intlMessage")||i).call(o,{name:"intlMessage",hash:{intlName:"common.FAVORITE"},data:t,loc:{start:{line:7,column:46},end:{line:7,column:88}}}))+'</span>\n\t\t</div>\n\n\t\t\x3c!--Comment Shortcut --\x3e\n\t\t<div class="key-container'+(null!=(s=r(e,"unless").call(o,null!=a?r(a,"canAddComment"):a,{name:"unless",hash:{},fn:n.program(2,t,0),inverse:n.noop,data:t,loc:{start:{line:11,column:27},end:{line:11,column:72}}}))?s:"")+'" '+(null!=(s=r(e,"if").call(o,null!=a?r(a,"canAddComment"):a,{name:"if",hash:{},fn:n.program(4,t,0),inverse:n.noop,data:t,loc:{start:{line:11,column:74},end:{line:11,column:114}}}))?s:"")+'>\n\t\t\t<span class="comment-key key">C</span>\n\t\t\t<span class="comment-key-label key-label">'+c((r(e,"intlMessage")||a&&r(a,"intlMessage")||i).call(o,{name:"intlMessage",hash:{intlName:"photo-page-scrappy.COMMENT"},data:t,loc:{start:{line:13,column:45},end:{line:13,column:98}}}))+"</span>\n\t\t</div>\n"},2:function(n,a,e,l,t){return" disabled"},4:function(n,a,e,l,t){return'tabindex="1"'},6:function(n,a,e,l,t){var s=n.lookupProperty||function(n,a){if(Object.prototype.hasOwnProperty.call(n,a))return n[a]};return'\t\t<div class="key-container" tabindex="1">\n\t\t\t<span class="search-key key">Z</span>\n\t\t\t<span class="search-key-label key-label">'+n.escapeExpression((s(e,"intlMessage")||a&&s(a,"intlMessage")||n.hooks.helperMissing).call(null!=a?a:n.nullContext||{},{name:"intlMessage",hash:{intlName:"photo-page-scrappy.ZOOM"},data:t,loc:{start:{line:42,column:44},end:{line:42,column:94}}}))+"</span>\n\t\t</div>\n"},8:function(n,a,e,l,t){var s=n.lookupProperty||function(n,a){if(Object.prototype.hasOwnProperty.call(n,a))return n[a]};return'\t\x3c!--Lightbox Shortcut --\x3e\n\t\t<div class="key-container" tabindex="1">\n\t\t\t<span class="search-key key">L</span>\n\t\t\t<span class="search-key-label key-label">'+n.escapeExpression((s(e,"intlHTMLMessage")||a&&s(a,"intlHTMLMessage")||n.hooks.helperMissing).call(null!=a?a:n.nullContext||{},{name:"intlHTMLMessage",hash:{intlName:"photo-page-scrappy.VIEW_IN_LIGHTBOX"},data:t,loc:{start:{line:48,column:44},end:{line:48,column:110}}}))+"</span>\n\t\t</div>\n"},10:function(n,a,e,l,t){var s,o=null!=a?a:n.nullContext||{},i=n.hooks.helperMissing,c=n.escapeExpression,r=n.lookupProperty||function(n,a){if(Object.prototype.hasOwnProperty.call(n,a))return n[a]};return"\n"+(null!=(s=r(e,"if").call(o,null!=a?r(a,"isOwner"):a,{name:"if",hash:{},fn:n.program(11,t,0),inverse:n.program(13,t,0),data:t,loc:{start:{line:60,column:2},end:{line:88,column:9}}}))?s:"")+'\n\t\t\x3c!--Tagging Shortcuts --\x3e\n\t\t<div class="key-container'+(null!=(s=r(e,"unless").call(o,null!=a?r(a,"canAddMeta"):a,{name:"unless",hash:{},fn:n.program(2,t,0),inverse:n.noop,data:t,loc:{start:{line:91,column:27},end:{line:91,column:69}}}))?s:"")+'" '+(null!=(s=r(e,"if").call(o,null!=a?r(a,"canAddMeta"):a,{name:"if",hash:{},fn:n.program(4,t,0),inverse:n.noop,data:t,loc:{start:{line:91,column:71},end:{line:91,column:108}}}))?s:"")+'>\n\t\t\t<span class="add-tag-key key">T</span>\n\t\t\t<span class="add-tag-key-label key-label">'+c((r(e,"intlMessage")||a&&r(a,"intlMessage")||i).call(o,{name:"intlMessage",hash:{intlName:"photo-page-scrappy.ADD_TAG"},data:t,loc:{start:{line:93,column:45},end:{line:93,column:98}}}))+'</span>\n\t\t</div>\n\n\t\t<div class="key-container'+(null!=(s=r(e,"unless").call(o,null!=a?r(a,"canAddMeta"):a,{name:"unless",hash:{},fn:n.program(2,t,0),inverse:n.noop,data:t,loc:{start:{line:96,column:27},end:{line:96,column:69}}}))?s:"")+'" '+(null!=(s=r(e,"if").call(o,null!=a?r(a,"canAddMeta"):a,{name:"if",hash:{},fn:n.program(4,t,0),inverse:n.noop,data:t,loc:{start:{line:96,column:71},end:{line:96,column:108}}}))?s:"")+'>\n\t\t\t<span class="add-person-key key">P</span>\n\t\t\t<span class="add-person-key-label key-label">'+c((r(e,"intlMessage")||a&&r(a,"intlMessage")||i).call(o,{name:"intlMessage",hash:{intlName:"photo-page-scrappy.ADD_PERSON"},data:t,loc:{start:{line:98,column:48},end:{line:98,column:104}}}))+"</span>\n\t\t</div>\n"},11:function(n,a,e,l,t){var s,o=null!=a?a:n.nullContext||{},i=n.hooks.helperMissing,c=n.escapeExpression,r=n.lookupProperty||function(n,a){if(Object.prototype.hasOwnProperty.call(n,a))return n[a]};return'\n\t\t\t\x3c!--Add to Group Shortcut --\x3e\n\t\t\t<div class="key-container'+(null!=(s=r(e,"unless").call(o,null!=a?r(a,"canAddToGroup"):a,{name:"unless",hash:{},fn:n.program(2,t,0),inverse:n.noop,data:t,loc:{start:{line:63,column:28},end:{line:63,column:73}}}))?s:"")+'" '+(null!=(s=r(e,"if").call(o,null!=a?r(a,"canAddToGroup"):a,{name:"if",hash:{},fn:n.program(4,t,0),inverse:n.noop,data:t,loc:{start:{line:63,column:75},end:{line:63,column:115}}}))?s:"")+'>\n\t\t\t\t<span class="add-to-group-key key">G</span>\n\t\t\t\t<span class="add-to-group-key-label key-label">'+c((r(e,"intlMessage")||a&&r(a,"intlMessage")||i).call(o,{name:"intlMessage",hash:{intlName:"photo-page-scrappy.ADD_TO_GROUP"},data:t,loc:{start:{line:65,column:51},end:{line:65,column:109}}}))+'</span>\n\t\t\t</div>\n\n\t\t\t\x3c!--Add to album Shortcut --\x3e\n\t\t\t<div class="key-container'+(null!=(s=r(e,"unless").call(o,null!=a?r(a,"canAddToAlbum"):a,{name:"unless",hash:{},fn:n.program(2,t,0),inverse:n.noop,data:t,loc:{start:{line:69,column:28},end:{line:69,column:73}}}))?s:"")+'" '+(null!=(s=r(e,"if").call(o,null!=a?r(a,"canAddToAlbum"):a,{name:"if",hash:{},fn:n.program(4,t,0),inverse:n.noop,data:t,loc:{start:{line:69,column:75},end:{line:69,column:115}}}))?s:"")+'>\n\t\t\t\t<span class="add-to-album-key key">A</span>\n\t\t\t\t<span class="add-to-album-key-label key-label">'+c((r(e,"intlMessage")||a&&r(a,"intlMessage")||i).call(o,{name:"intlMessage",hash:{intlName:"photo-page-scrappy.ADD_TO_ALBUM"},data:t,loc:{start:{line:71,column:51},end:{line:71,column:109}}}))+"</span>\n\t\t\t</div>\n\n"},13:function(n,a,e,l,t){var s,o=null!=a?a:n.nullContext||{},i=n.hooks.helperMissing,c=n.escapeExpression,r=n.lookupProperty||function(n,a){if(Object.prototype.hasOwnProperty.call(n,a))return n[a]};return'\n\t\t\t\x3c!--Invite to group Shortcut --\x3e\n\t\t\t<div class="key-container'+(null!=(s=r(e,"unless").call(o,null!=a?r(a,"canInviteToGroup"):a,{name:"unless",hash:{},fn:n.program(2,t,0),inverse:n.noop,data:t,loc:{start:{line:77,column:28},end:{line:77,column:76}}}))?s:"")+'" '+(null!=(s=r(e,"if").call(o,null!=a?r(a,"canInviteToGroup"):a,{name:"if",hash:{},fn:n.program(4,t,0),inverse:n.noop,data:t,loc:{start:{line:77,column:78},end:{line:77,column:121}}}))?s:"")+'>\n\t\t\t\t<span class="add-to-group-key key">G</span>\n\t\t\t\t<span class="add-to-group-key-label key-label">'+c((r(e,"intlMessage")||a&&r(a,"intlMessage")||i).call(o,{name:"intlMessage",hash:{intlName:"photo-page-scrappy.INVITE_TO_GROUP"},data:t,loc:{start:{line:79,column:51},end:{line:79,column:112}}}))+'</span>\n\t\t\t</div>\n\n\t\t\t\x3c!--Add to gallery Shortcut --\x3e\n\t\t\t<div class="key-container'+(null!=(s=r(e,"unless").call(o,null!=a?r(a,"canAddToGallery"):a,{name:"unless",hash:{},fn:n.program(2,t,0),inverse:n.noop,data:t,loc:{start:{line:83,column:28},end:{line:83,column:75}}}))?s:"")+'" '+(null!=(s=r(e,"if").call(o,null!=a?r(a,"canAddToGallery"):a,{name:"if",hash:{},fn:n.program(4,t,0),inverse:n.noop,data:t,loc:{start:{line:83,column:77},end:{line:83,column:119}}}))?s:"")+'>\n\t\t\t\t<span class="add-to-album-key key">A</span>\n\t\t\t\t<span class="add-to-album-key-label key-label">'+c((r(e,"intlMessage")||a&&r(a,"intlMessage")||i).call(o,{name:"intlMessage",hash:{intlName:"photo-page-scrappy.ADD_TO_GALLERY"},data:t,loc:{start:{line:85,column:51},end:{line:85,column:111}}}))+"</span>\n\t\t\t</div>\n\n"},compiler:[8,">= 4.3.0"],main:function(n,a,e,l,t){var s,o=null!=a?a:n.nullContext||{},i=n.hooks.helperMissing,c=n.escapeExpression,r=n.lookupProperty||function(n,a){if(Object.prototype.hasOwnProperty.call(n,a))return n[a]};return'\n<div class="sub-photo-keyboard-shortcuts" tabindex="1" aria-label="'+c((r(e,"intlMessage")||a&&r(a,"intlMessage")||i).call(o,{name:"intlMessage",hash:{intlName:"photo-page-scrappy.KEYBOARD_SHORTCUTS"},data:t,loc:{start:{line:2,column:67},end:{line:2,column:131}}}))+'">\n'+(null!=(s=r(e,"if").call(o,null!=a?r(a,"signedIn"):a,{name:"if",hash:{},fn:n.program(1,t,0),inverse:n.noop,data:t,loc:{start:{line:3,column:1},end:{line:15,column:8}}}))?s:"")+'\n\t\x3c!--Search Shortcut --\x3e\n\t<div class="key-container" tabindex="1">\n\t\t<span class="search-key key">S</span>\n\t\t<span class="search-key-label key-label">'+c((r(e,"intlMessage")||a&&r(a,"intlMessage")||i).call(o,{name:"intlMessage",hash:{intlName:"common.SEARCH"},data:t,loc:{start:{line:20,column:43},end:{line:20,column:83}}}))+'</span>\n\t</div>\n\n\n\t\x3c!--Photo Navigation Shortcut --\x3e\n\t<div class="key-container" tabindex="1">\n\t\t<span class="photo-navigation-key-left key"><i class="photo-navigation-key-icon-left" aria-label="'+c((r(e,"intlMessage")||a&&r(a,"intlMessage")||i).call(o,{name:"intlMessage",hash:{intlName:"common.LEFT_ARROW"},data:t,loc:{start:{line:26,column:100},end:{line:26,column:144}}}))+'"></i></span>\n\t\t<span class="photo-navigation-key-right key"><i class="photo-navigation-key-icon-right" aria-label="'+c((r(e,"intlMessage")||a&&r(a,"intlMessage")||i).call(o,{name:"intlMessage",hash:{intlName:"common.RIGHT_ARROW"},data:t,loc:{start:{line:27,column:102},end:{line:27,column:147}}}))+'"></i></span>\n\t\t<span class="photo-navigation-key-label key-label">'+c((r(e,"intlMessage")||a&&r(a,"intlMessage")||i).call(o,{name:"intlMessage",hash:{intlName:"photo-page-scrappy.PHOTO_NAVIGATION"},data:t,loc:{start:{line:28,column:53},end:{line:28,column:115}}}))+'</span>\n\t</div>\n\n\t\x3c!--Thumbnail Navigation Shortcut --\x3e\n\t<div class="key-container" tabindex="1">\n\t\t<span class="thumbnail-navigation-key-left key"> &lt; </span>\n\t\t<span class="thumbnail-navigation-key-right key"> &gt; </span>\n\t\t<span class="thumbnail-navigation-key-label key-label">'+c((r(e,"intlMessage")||a&&r(a,"intlMessage")||i).call(o,{name:"intlMessage",hash:{intlName:"photo-page-scrappy.THUMBNAIL_NAVIGATION"},data:t,loc:{start:{line:35,column:57},end:{line:35,column:123}}}))+"</span>\n\t</div>\n\n\t\x3c!--Zoom Shortcut --\x3e\n"+(null!=(s=r(e,"if").call(o,null!=a?r(a,"enableZoom"):a,{name:"if",hash:{},fn:n.program(6,t,0),inverse:n.program(8,t,0),data:t,loc:{start:{line:39,column:1},end:{line:50,column:8}}}))?s:"")+'\n\t\x3c!--Back to Context Shortcut --\x3e\n\t<div class="key-container'+(null!=(s=r(e,"unless").call(o,null!=a?r(a,"canGoBackTo"):a,{name:"unless",hash:{},fn:n.program(2,t,0),inverse:n.noop,data:t,loc:{start:{line:53,column:26},end:{line:53,column:69}}}))?s:"")+'" '+(null!=(s=r(e,"if").call(o,null!=a?r(a,"canGoBackTo"):a,{name:"if",hash:{},fn:n.program(4,t,0),inverse:n.noop,data:t,loc:{start:{line:53,column:71},end:{line:53,column:109}}}))?s:"")+'>\n\t\t<span class="back-to-context-key key">B</span>\n\t\t<span class="back-to-context-key-label key-label">'+c((r(e,"intlMessage")||a&&r(a,"intlMessage")||i).call(o,{name:"intlMessage",hash:{intlName:"photo-page-scrappy.BACK_TO_CONTEXT"},data:t,loc:{start:{line:55,column:52},end:{line:55,column:113}}}))+"</span>\n\t</div>\n\n"+(null!=(s=r(e,"if").call(o,null!=a?r(a,"signedIn"):a,{name:"if",hash:{},fn:n.program(10,t,0),inverse:n.noop,data:t,loc:{start:{line:58,column:1},end:{line:100,column:8}}}))?s:"")+"</div>\n\n"},useData:!0}),l={};n.Array.each([],(function(a){var e=n.Template.get("hermes/"+a);e&&(l[a]=e)})),n.Template.register("hermes/sub-photo-keyboard-shortcuts",(function(a,t){return(t=t||{}).partials=t.partials?n.merge(l,t.partials):l,e(a,t)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("sub-photo-keyboard-shortcuts-view",(function(t){t.FlickrView.create(this.name,t.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(t){return this.nsid=t.nsid,this.photoId=t.photoId,this.backToURL=t.backToURL,this.hideBackToLink=t.hideBackToLink,""===this.get("container").get("innerHTML")&&this.setContainerHTML(""),this},loadState:function(){var e=this,o=[];return o.push(e.appContext.getModel("photo-models",e.photoId).then((function(t){e.set("photo",t)}))),o.push(e.appContext.getModel("photo-privacy-models",e.photoId).then((function(t){e.set("photoPrivacyModel",t)}))),e.appContext.getViewer().signedIn&&o.push(e.appContext.getModel("person-groups-models",e.appContext.getViewer().nsid).then((function(t){e.set("personGroupsModel",t)}))),t.Promise.all(o)},buildContainer:function(){return this.setContainerWithTemplate("sub-photo-keyboard-shortcuts",{signedIn:this.appContext.getViewer().signedIn,isOwner:this.get("photo").getValue("owner").getValue("isMe"),enableZoom:!0,canAddToAlbum:this.canAddToAlbum(),canAddToGallery:this.canAddToGallery(),canAddToGroup:this.canAddToGroup(),canInviteToGroup:this.canInviteToGroup(),canAddMeta:this.canAddMeta(),canAddComment:this.get("photo").getValue("canComment"),canGoBackTo:!this.hideBackToLink}),this},canAddToGallery:function(){var t=0===this.get("photo").getValue("safetyLevel"),e=this.get("photoPrivacyModel").getValue("isPublic");return t&&e&&this.appContext.getViewer().nsid!==this._params.nsid&&this.appContext.getViewer().signedIn},canAddToAlbum:function(){return this.appContext.getViewer().nsid===this._params.nsid},canAddToGroup:function(){var t=this.appContext.getViewer().nsid,e=this.get("photo").getValue("owner").getValue("id"),o=this.get("personGroupsModel");return e===t&&o&&(this.get("personGroupsModel").getValue("memberCount")>0||this.get("personGroupsModel").getValue("adminCount")>0||this.get("personGroupsModel").getValue("moderatorCount")>0)},canInviteToGroup:function(){var t=this.appContext.getViewer().nsid,e=this.get("photo").getValue("owner").getValue("id"),o=this.get("personGroupsModel");return e!==t&&o&&o.getValue("adminCount")>0},canAddMeta:function(){var t=this.get("photo");return t.getValue("owner")||t.getValue("canAddMeta")},buildErrorContainer:function(){},activate:function(){return this}})}),"@VERSION@",{requires:["flickr-view","hermes-template-sub-photo-keyboard-shortcuts","url-helper"],optional:[],langBundles:["common","photo-page-scrappy"]});YUI.add("sub-photo-view",(function(e){e.FlickrView.create(this.name,e.FlickrView,[],{initializer:function(e){return this.nsid=e.nsid,this.photoId=e.photoId,this.backToURL=e.backToURL,this.geo=e.geo,""===this.get("container").get("innerHTML")&&this.setContainerHTML(""),this},subviewConfig:{"sub-photo-left-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0},"sub-photo-right-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0},"sub-photo-keyboard-shortcuts-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1}},loadState:function(){return e.Promise.resolve()},buildContainer:function(){return this.setContainerWithTemplate("sub-photo"),this},buildErrorContainer:function(){},activate:function(){return this}})}),"@VERSION@",{requires:["flickr-view","hermes-template-sub-photo","url-helper"],optional:["sub-photo-left-view","sub-photo-right-view","sub-photo-keyboard-shortcuts-view"]});YUI.add("hermes-template-moola-sticky-view",(function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,a,l){var r,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\t\t"+e.escapeExpression("function"==typeof(r=null!=(r=o(n,"adTemplate")||(null!=t?o(t,"adTemplate"):t))?r:e.hooks.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"adTemplate",hash:{},data:l,loc:{start:{line:3,column:2},end:{line:3,column:16}}}):r)+'\n\t\t<div class="close-button-container">\n\t\t\t<span class="close-ad-button">&times;</span>\n\t\t</div>\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,l){var r,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="moola-sticky-view-main-container">\n'+(null!=(r=o(n,"if").call(null!=t?t:e.nullContext||{},null!=t?o(t,"prebidAdUnit"):t,{name:"if",hash:{},fn:e.program(1,l,0),inverse:e.noop,data:l,loc:{start:{line:2,column:1},end:{line:7,column:8}}}))?r:"")+"</div>\n"},useData:!0}),a={};e.Array.each([],(function(t){var n=e.Template.get("hermes/"+t);n&&(a[t]=n)})),e.Template.register("hermes/moola-sticky-view",(function(t,l){return(l=l||{}).partials=l.partials?e.merge(a,l.partials):a,n(t,l)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("moola-sticky-view",(function(t,e){var i=require("hermes-core/flog")(e);new t.SubscriptionsHelper;t.namespace("Views")["moola-sticky-view"]=t.Base.create("moola-sticky-view",t.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(t){this.params=t,this.geo=this.params.geo,this.prebidAdUnit,this.isPhotoPage=t.isPhotoPage},loadState:function(){var e=this;if(this.appContext.flipper.isFlipped("enable-page-categorizations")){var s=[];return this.isPhotoPage&&s.push(this.appContext.getModel("page-categorizations-models",e.params.photoId).then((function(i){e.set("categories",i.getValue("categories")),t.Snowplough.sendSelfDescribingEvent({schema:t.Snowplough.SCHEMAS.PAGE_CATEGORIZATIONS,data:{photoId:parseInt(e.params.photoId,10),status:"received",result:[e.get("categories")]}})})).catch((function(t){i.error("Error loading photo categorizations: ",t)}))),s.push(this.appContext.getModel("photo-models",e.params.photoId).then((function(t){e.set("photo",t),e.setPrebidRenderStatus()}))),t.Promise.all(s)}return this.appContext.getModel("photo-models",e.params.photoId).then((function(t){e.set("photo",t),e.setPrebidRenderStatus()}))},buildContainer:function(){this.adSettings=this.appContext.adManager.getAd(this,{position:"photopage",name:"adhesion",class:"non-us-sticky",type:1,upgradeProLink:!1,categories:this.isPhotoPage&&this.appContext.flipper.isFlipped("enable-page-categorizations")?this.appContext.adManager.getAdCategories(this.get("categories")):null}),this.prebidAdUnit?this.setContainerWithTemplate("moola-sticky-view",{prebidAdUnit:!0,adTemplate:new t.Handlebars.SafeString(this.adSettings.getAdTemplate())}):this.setContainerWithTemplate("moola-sticky-view")},setPrebidRenderStatus:function(){this.prebidAdUnit=!0},closeStickyAd:function(){var t=this.get("container").getDOMNode();t&&(t.style.display="none"),this.appContext.adManager.destroyStickyAdUnit(this.adSettings.adUnit)},handleStickyAdBehavior:function(){var t=this.get("container"),e=t.one(".non-us-sticky"),i=t.one(".close-button-container");if(e&&i){var s=e.getDOMNode(),o=i.getDOMNode();s&&"rendered"===s.dataset.status?o&&(this.staggerCloseButton=setTimeout((function(){o.style.display="block"}),2e3)):this.waitForStickyNode=setTimeout(this.handleStickyAdBehavior.bind(this),250)}},activate:function(){var e=this.get("container");return this.prebidAdUnit&&(this.isPhotoPage&&!this.appContext.flipper.isFlipped("enable-dark-photopage-with-sidebar")?this.registerEventHandler(t.on("photoPage:dataLayerReadyForAds",(()=>{this.adSettings.requestAd()}))):this.adSettings.requestAd(),this.handleStickyAdBehavior(),this.registerEventHandler(e.one(".close-ad-button").on("click",this.closeStickyAd.bind(this)))),this}})}),"@VERSION@",{requires:["flickr-view","hermes-template-moola-sticky-view","subscriptions-helper"],optionalRequires:["hermes-core"],langBundles:["common"]});YUI.add("photo-page-scrappy-view",(function(e,t){require("hermes-core/flog")(t);e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(t){var a=this;if(this.backToURL=t.backToURL,this.hideBackToLink=t.hideBackToLink||!1,this.entryTypeIntlKey=t.entryTypeIntlKey,this.photoId=t.photoId,this.isOwner=t.isOwner,this.context=e.clone(t.context,!0),this.nsid=t.nsid,this.geo=t.geo,this.showPhotoPageAd=!0,this.isMobileBrowser=t.isMobileBrowser,this.isDelayedDataLayerReady=!1,t.isOwner=this.isOwner,t.isResponsiveMobile=this.isMobileBrowser,t.fullscreen?this.appContext.experiments.fullscreen.enableFullscreen():this.appContext.experiments.fullscreen.disableFullscreen(),this.appContext.getViewer().signedIn&&(t.signinPendingQueue=e.SigninHelper.checkPendingQueue(this.appContext)),this.context&&this.context.params&&this.context.params.isSharedEntity){var i=this.context.params;this.appContext.setGPCredentials({gp_code:i.gpCode,gp_owner:i.gpOwner,share_code:i.gpCode})}else this.appContext.setGPCredentials(null);return this.appContext.getModel("photo-models",this.photoId).then((function(t){t.on("valuesChanged",(function(t){t.title&&e.one&&e.one("head title").set("text",a.intlMessage({intlName:"photo-page-scrappy.PAGE_TITLE",title:t.title.newVal}))}))})),YUI.Env.isServer&&this.appContext&&this.appContext.flipper.isFlipped("enable-better-photo-page-seo")&&(this.appContext.forceServerRender=this.appContext._doForcedServerRender()),this.experimentEnabled=this.appContext.flipper.isFlipped("enable-dark-photopage-with-sidebar"),this.experimentEnabled&&(t.theme="dark"),this},subviewConfig:{"photo-well-scrappy-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0,dealbreaker:!0},"mobile-photo-well-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0,dealbreaker:!0,additionalViewClasses:function(){return[this.appContext.flipper.isFlipped("enable-skybox-gn-refactor")?"enable-skybox-gn-refactor":"",this.appContext.flipper.isFlipped("enable-dark-photopage-with-sidebar")?["with-scrollable-sidebar"]:""]}},"photo-engagement-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0,dealbreaker:!0,disabled:function(){return!this.isMobileBrowser}},"photo-head-meta-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!0},"global-nav-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!0},"sub-photo-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0,additionalViewClasses:function(){var t=[];this.appContext.flipper.isFlipped("enable-skybox-gn-refactor")&&t.push("enable-skybox-gn-refactor"),this.appContext.flipper.isFlipped("enable-dark-photopage-with-sidebar")&&t.push("with-scrollable-sidebar");this.appContext.viewportData.getWidth(),e.config.flickr.moola.ad_breakpoint_mobile_desktop;return this.appContext.flipper.isFlipped("enable-dark-photopage-with-sidebar")?t.push("dark"):t.push("light"),t}},"footer-full-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!0},"moola-sticky-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!1,isPhotoPage:!0},"photo-page-sidebar-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0,disabled:function(){return!this.appContext.adManager.userCanViewPhotoPageSidebar()||this.appContext.flipper.isFlipped("enable-dark-photopage-with-sidebar")}},"photo-page-scrolling-sidebar-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0,disabled:function(){return!this.appContext.adManager.userCanViewPhotoPageSidebar()||!this.appContext.flipper.isFlipped("enable-dark-photopage-with-sidebar")}}},additionalViewClasses:function(){var t=[];this.appContext.getViewer().signedIn||t.push("has-global-nav");var a=this.appContext.viewportData.getWidth(),i=e.config.flickr.moola.ad_breakpoint_mobile_desktop;return this.appContext.flipper.isFlipped("enable-dark-photopage-with-sidebar")&&a>=i&&t.push("dark"),this.appContext.flipper.isFlipped("enable-dark-photopage-with-sidebar")&&t.push("with-scrollable-sidebar"),t},getAdditionalSpContexts:function(){return e.Snowplough.getPhotoContextFromModel(this.get("photo"))},loadState:function(){var e=this;return this.appContext.getModel("photo-models",e.photoId).then((function(t){e.set("photo",t),e.appContext.adManager.canShowAdWithPhoto(e.get("photo"))||(e.showPhotoPageAd=!1)}))},buildContainer:function(){const e=this.appContext.viewportData.getWidth();let t=this.appContext.flipper.isFlipped("enable-mobile-photopage-sticky-ad")?this.showPhotoPageAd&&(e&&e>=700||e<700&&!this.appContext.getViewer().signedIn):this.showPhotoPageAd&&e&&e>=700;var a={"photo-well-view":this.subviews["photo-well-scrappy-view"].get("container"),showMobileWell:this.isMobileBrowser,showStickyAd:t,shouldSeeSidebar:this.appContext.adManager.userCanViewPhotoPageSidebar()&&(this.appContext.flipper.isFlipped("enable-dark-photopage-with-sidebar")||!this.isMobileBrowser)};return this.setContainerWithTemplate("photo-page-scrappy",a),this},setDataLayerForView:function(){var t=this.get("photo"),a=!t.getValue("owner").getValue("isPro")&&!this.appContext.getViewer().isPro,i=a&&0===t.getValue("safetyLevel");this.appContext.dataLayer.setDataLayerProp("user.segments.couldHaveSeenAd",a),this.appContext.dataLayer.setDataLayerProp("user.segments.safetyAwareCouldHaveSeenAd",i),this.appContext.dataLayer.setDataLayerProp("page.safetyLevel",t.getValue("safetyLevel")>=0?e.SafetyHelper.getSafetyLevelString(t.getValue("safetyLevel"),"photo"):""),this.appContext.dataLayer.setDataLayerProp("page.photoId",parseInt(this.photoId,10)),this.tags&&this.tags.length>0&&this.appContext.dataLayer.setDataLayerProp("page.tags",this.tags.length?this.tags.map((function(e){return e.tagValue})):[]),this.camera&&(this.camera.make&&this.appContext.dataLayer.setDataLayerProp("page.camera.make",this.camera.make),this.camera.model&&this.appContext.dataLayer.setDataLayerProp("page.camera.model",this.camera.model),this.camera.name&&this.appContext.dataLayer.setDataLayerProp("page.camera.name",this.camera.name),this.camera.type&&this.appContext.dataLayer.setDataLayerProp("page.camera.type",this.camera.type)),this.geo&&(this.geo.country&&this.appContext.dataLayer.setDataLayerProp("page.geo.country",this.geo.country),this.geo.region&&this.appContext.dataLayer.setDataLayerProp("page.geo.region",this.geo.region),this.geo.city&&this.appContext.dataLayer.setDataLayerProp("page.geo.city",this.geo.city))},activate:function(){this.appContext.adManager.isEnabled()&&this.appContext.adManager.updatePhotoAdsCounter(),this.isDelayedDataLayerReady&&this.isDataLayerReadyForAds();let t=this.get("container");return[{element:".attribution-view .owner-name",action:"ownerNameClick"},{element:".attribution-view .avatar",action:"ownerAvatarClick"},{element:".attribution-view .pro-badge-new",action:"ownerProBadgeClick"},{element:".attribution-view .follow-view",action:"ownerFollowClick"},{element:".entry-type",action:"goBackToContextClick"},{element:".gn-get-pro",action:"getProGlobalNav"},{element:".gn-signin",action:"signInGlobalNav"},{element:".gn-signup",action:"signUpGlobalNav"},{element:".gn-search-box",action:"searchBoxGlobalNav"}].forEach((a=>{this.registerEventHandler(t.delegate("click",(()=>{e.Snowplough.sendStructuredEvent({category:"photopageinteractions",action:a.action},e.Snowplough.getPhotoContextFromModel(this.get("photo")))}),a.element))})),this},closeDialog:function(t){e.config.win.location.href=this.backToURL},onSubviewEvent:function(e,t){if(t&&t.length>0)if("setRedirect"===t[0])this.get("container").all("input[name=redirect_url]").setAttribute("value",window.location.pathname),"function"==typeof t[1]&&t[1]();else{if("rightClickPhoto"===t[0])return!1;"photo:reload"===t[0]?this.reload(["photo-models","photostream-models","photo-exif-models"],this.photoId):"disable-sharing"===t[0]||"enable-sharing"===t[0]?this.fire("parentViewEvent",t[0]):"tagsLoaded"===t[0]?(this.tags=t[1],this.isActivated?this.isDataLayerReadyForAds():this.isDelayedDataLayerReady=!0):"exifLoaded"===t[0]&&(this.camera=t[1].camera,this.geo=t[1].geo,this.exifLoaded=!0,this.isActivated?this.isDataLayerReadyForAds():this.isDelayedDataLayerReady=!0)}},isDataLayerReadyForAds:function(){this.tags&&this.exifLoaded&&(this.setDataLayerForView(),this.showPhotoPageAd&&e.fire("photoPage:dataLayerReadyForAds"))},destructor:function(){clearTimeout(this.scrollTimeout)},buildErrorContainer:function(){this.error&&this.error.is404&&this.appContext.flapp.navigate("/error/notfound")}})}),"@VERSION@",{requires:["flickr-view","hermes-template-photo-page-scrappy","signin-helper","overflow-helper","url","safety-level-helper","photo-page-scrolling-sidebar-view"],optionalRequires:["hermes-core"],optional:["photo-well-scrappy-view","mobile-photo-well-view","photo-head-meta-view","global-nav-view","sub-photo-view","moola-sticky-view"],langBundles:["common","photo-page-scrappy"]});YUI.add("photo-route",(function(e,t){var o=require("hermes-core/type-validator"),a=(require("hermes-core/flog")(t),{activity_feed:{backToIntlKey:"BACK_TO_ACTIVITY_FEED",usesWith:!1},album:{backToIntlKey:"BACK_TO_ALBUM",usesWith:!0},commons:{backToIntlKey:"BACK_TO_COMMONS",usesWith:!1},contacts_list:{backToIntlKey:"BACK_TO_CONTACTS_LIST",usesWith:!1},explore:{backToIntlKey:"BACK_TO_EXPLORE",usesWith:!0},favorites:{backToIntlKey:"BACK_TO_FAVORITES",usesWith:!0},gallery:{backToIntlKey:"BACK_TO_GALLERY",usesWith:!0},groups:{backToIntlKey:"BACK_TO_GROUPS"},group:{backToIntlKey:"BACK_TO_GROUP",usesWith:!0,withParamName:"pool/with"},map:{backToIntlKey:"BACK_TO_MAP",usesWith:!1},photostream:{backToIntlKey:"BACK_TO_PHOTOSTREAM",usesWith:!0},photostream_edit:{backToIntlKey:"BACK_TO_PHOTOSTREAM_EDIT",usesWith:!0},profile:{backToIntlKey:"BACK_TO_PROFILE",usesWith:!1},search:{backToIntlKey:"BACK_TO_SEARCH",usesWith:!1},shares:{backToIntlKey:"BACK_TO_SHARED_PHOTOS",usesWith:!1},tags:{backToIntlKey:"BACK_TO_TAG",usesWith:!1},tag:{backToIntlKey:"BACK_TO_TAG",usesWith:!1},"prints-discover":{backToIntlKey:"BACK_TO_PRINT_SHOP",usesWith:!0,withParamName:"with"}});function r(e){r.superclass.constructor.call(this,e)}e.Routes[this.name]=r,e.extend(r,e.FlickrRoute,{langBundles:this.details.langBundles,run:function(t,r){var s,i=this,n=t.params.nsid_or_path_alias,l=t.geo,p=t.params.photo_id,h=t.params.context,c="lightbox"===t.params.lightbox,u="vr"===t.params.vr,d=t.params.comment_id,m={id:p},T=t.query||{},g=!1;return d&&r.redirect(t.url.replace("/"+d,"")+"#"+d),o.nsid(n)?m.userId=n:m.pathAlias=n,(s=i.parseContext(h,n,t))&&s.params&&s.params.isSharedEntity?this.appContext.setGPCredentials({gp_code:s.params.gpCode,gp_owner:s.params.gpOwner,share_code:s.params.gpCode}):this.appContext.setGPCredentials(null),T&&void 0!==T.cr&&(g=!0),a.commons.usesWith=!0,this.appContext.getModel("photo-models",m).then((function(o){var a,r,p,d,m,T,y,_,I;let O=!i.appContext.adManager.userCanViewPhotoPageSidebar();return d=c?"photo-page-lightbox-scrappy-view":"photo-page-scrappy-view",m="scrolling","photo-page-ad-scrappy-view","scrolling",a=i.verifyPhotoIsViewable(o),(p=i.detectRouteErrors(a)).length?i.displayRouteErrors(t,p):(y=r=i.verifyPhotoIsOwnedByPerson(o,n),(p=i.detectRouteErrors(r)).length?i.displayRouteErrors(t,p):(_=6,I=12,i.appContext.forceServerRender&&(_=2,I=0),i.detectBackToDestination(t,{person:n,photoId:a,context:h}),T=i.getBackToData(),p.length?i.displayRouteErrors(t,p):("photostream-models"===s.modelName&&(s.params.id=e.Models[s.modelName].buildCompoundId(r,s.params.orderBy,s.params.viewAs),y=s.params.id,delete s.params.pathAlias),i.appContext.adManager.userCanViewPhotoPageSidebar()||(O=i.appContext.adManager.isEnabled()&&i.appContext.adManager.adNext()&&!c),O?(i.appContext.adManager.resetPhotoAdsCounter(),{view:"photo-page-ad-scrappy-view",params:{ad:!0,photoId:a,nsid:r,photostreamId:y,context:s,backToURL:T.path,hideBackToLink:g,entryTypeIntlKey:T.backToIntlKey,numberOfPositionsToPreFetch:_,numberOfPositionsToRefetchAt:I,isMobileBrowser:t.UA.isMobileBrowser},title:"Flickr",layout:"scrolling"}):(t.UA.isFacebook&&(d="photo-page-meta-tags-only",m="opengraph"),{view:d,params:{photoModel:o,photoId:a,nsid:r,geo:l,photostreamId:y,context:s,backToURL:T.path,hideBackToLink:g,entryTypeIntlKey:T.backToIntlKey,fullscreen:c,numberOfPositionsToPreFetch:_,numberOfPositionsToRefetchAt:I,isVR:u,linkedToGalleries:!!t.params.galleries,isModerated:void 0!==t.query.isModerated,showShareOnLoad:void 0!==t.query.share,isMobileBrowser:t.UA.isMobileBrowser,ownerIsPro:o.getValue("owner").getValue("isPro")},title:e.Seo.getSEOTitleForPhoto(o),layout:m}))))}),(function(o){if(1===o.code)return i.displayRouteErrors(t,new e.RouteError(404,i.intlMessage({intlName:"common.404_PHOTO_VIDEO_NONEXISTENT"}),{modelType:"photostream-models",modelID:i.getNSIDOrPathAlias(n)}));if(2===o.code)return i.displayRouteErrors(t,new e.RouteError(403,i.intlMessage({intlName:"common.404_PHOTO_VIDEO_PRIVATE"}),{modelType:"photostream-models",modelID:i.getNSIDOrPathAlias(n)}));if(!t.UA.isMobileBrowser)return{view:"empty-photo-page-view",params:{},title:i.intlMessage({intlName:"common.OOPS"})};if(o.fatal)throw o;return i.displayRouteErrors(t,new e.RouteError(404,i.intlMessage({intlName:"common.404_PHOTO_VIDEO_NONEXISTENT"}),{modelType:"photostream-models",modelID:i.getNSIDOrPathAlias(n)}))}))},verifyPhotoIsViewable:function(t){var a=t.getValue("id");return o.photoId(a)?a:new e.RouteError(404,this.intlMessage({intlName:"common.404_PHOTO_VIDEO_NONEXISTENT"}),{modelType:"photostream-models",modelID:t.getValue("owner").getValue("id")})},verifyPhotoIsOwnedByPerson:function(t,a){t.getValue("id");var r=o.nsid(a);return a===t.getValue("owner").getValue(r?"id":"pathAlias")?t.getValue("owner").getValue("id"):new e.RouteError(404,this.intlMessage({intlName:"common.404_PHOTO_VIDEO_NONEXISTENT"}),{modelType:"photostream-models",modelID:this.getNSIDOrPathAlias(a)})},parseContext:function(t,o,a){return t=t||"photostream",e.URLHelper.parseContextURL(t,o,this.appContext)},detectBackToDestination:function(t,o){var a,r,s,i;if(YUI.Env.isServer){if(a=t.headers.referrer||t.headers.referer,/^https?:\/\/[^\/]*(?:flickr\.com|flic\.kr)(?:$|\/)/.test(a)){if(o.context)return r=e.URLHelper.getContextEntity(o.context,o.person),this.setBackToData(e.URLHelper.getSiteSectionByName(r.type),r.url,o);if(a="/"+a.split("/").slice(3).join("/"),i=e.URLHelper.getSiteSectionByURL(a))return this.setBackToData(i,i.match,o)}else if(o.context)return r=e.URLHelper.getContextEntity(o.context,o.person),this.setBackToData(e.URLHelper.getSiteSectionByName(r.type),r.url,o)}else if(a=this.appContext.getPreviousURL(),s=this.appContext.flapp.get("activeView"),["photo-page-scrappy-view","photo-page-lightbox-scrappy-view","photo-page-ad-scrappy-view"].indexOf(s.name)>-1){if(s.backToURL&&(i=e.URLHelper.getSiteSectionByURL(s.backToURL)))return this.setBackToData(i,s.backToURL,o)}else if(a!==e.config.win.location.pathname&&(i=e.URLHelper.getSiteSectionByURL(a)))return this.setBackToData(i,i.match,o);return this.setBackToData(null,null,o)},setBackToData:function(t,o,s){var i,n,l,p=YUI.Env.isServer?this:r;(i=t?a[t.name]:null)||(t=e.URLHelper.getSiteSectionByName("photostream"),o="/photos/"+s.person,i=a.photostream),l=(n=e.merge(i,t)).withParamName||"with",o=this.stripPathSuffixes(o),n.usesWith&&(o=o.replace(/([^\/])$/,"$1/"),o+=l+"/"+s.photoId),"/"!==o[o.length-1]&&-1===o.indexOf("?")&&(o+="/"),p._entryType=n.name,p._entryPath=o,p._backToIntlKey=n.backToIntlKey},getBackToData:function(){var e=YUI.Env.isServer?this:r;return{type:e._entryType,path:e._entryPath,backToIntlKey:e._backToIntlKey}},stripPathSuffixes:function(e){return e=(e=(e=e.replace(/\/+/g,"/")).replace(/\/with\/\d+\/?$/,"/")).replace(/\/in\/[^\/]+\/?$/,"/"),e=this.filterURL(e,(function(e){var t;if(e.length>=3)for(t=2;t<e.length;t++)e[t].match(/page\d+/)&&(e.splice(t,1),t--);return e})),e=this.filterURL(e,(function(e){var t;if("groups"===e[0]&&e.length>=3)for(t=2;t<e.length;t++)"pool"===e[t]&&(e.splice(t,1),t--);return e}))},filterURL:function(e,t){var o;return"/"!==(o="/"+t(e.split("/").filter((function(e){return!!e}))).join("/"))[o.length-1]&&-1===e.indexOf("?")&&(o+="/"),o}}),e.mix(r.prototype,e.Localizable),e.mix(r.prototype,e.Seo)}),"@VERSION@",{requires:["flickr-route","url-helper","localizable","seo"],optionalRequires:["hermes-core"],optional:["page-categorizations-models","photo-models","photostream-models","photo-page-scrappy-view","empty-photo-page-view","photo-page-lightbox-scrappy-view"],langBundles:["photo-page-scrappy","common","attribution"]});