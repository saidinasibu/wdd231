YUI.add("hermes-template-fluid-magic-search",(function(e,a){var t=e.Template.Handlebars.revive({compiler:[8,">= 4.3.0"],main:function(e,a,t,n,r){var l=e.lookupProperty||function(e,a){if(Object.prototype.hasOwnProperty.call(e,a))return e[a]};return'<a\n\thref="#"\n\tclass="search-toggle"\n\ttitle="'+e.escapeExpression((l(t,"intlMessage")||a&&l(a,"intlMessage")||e.hooks.helperMissing).call(null!=a?a:e.nullContext||{},{name:"intlMessage",hash:{intlName:null!=a?l(a,"hoverTextIntlString"):a},data:r,loc:{start:{line:4,column:8},end:{line:4,column:52}}}))+'"\n>\n\t<span></span>\n</a>\n'},useData:!0}),n={};e.Array.each([],(function(a){var t=e.Template.get("hermes/"+a);t&&(n[a]=t)})),e.Template.register("hermes/fluid-magic-search",(function(a,r){return(r=r||{}).partials=r.partials?e.merge(n,r.partials):n,t(a,r)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("fluid-magic-search-view",(function(e){e.namespace("Views")[this.name]=e.Base.create("fluid-magic-search-view",e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){return this.nsid=e.nsid,this.selected=e.subnavConfig?e.subnavConfig.selected:"",this},loadState:function(){return this.appContext.getModel("person-models",this.nsid).then(function(e){this.set("personModel",e)}.bind(this))},buildContainer:function(){var e={pageType:this.selected,hoverTextIntlString:""};return"photostream"===this.selected?e.hoverTextIntlString="search.SEARCH_PHOTOSTREAM":"favorites"===this.selected?e.hoverTextIntlString="search.SEARCH_FAVORITES":"albums"===this.selected&&(e.hoverTextIntlString="photo-page-scrappy.SEARCH_ALBUMS"),this.setContainerWithTemplate("fluid-magic-search",e),this},activate:function(){var t=this.get("container").one(".search-toggle");return this.registerEventHandler(t.on("click",this.toggleSearch.bind(this))),this.registerEventHandler(e.on("remove-context-in-search-field",this.handleSearchContextRemoval.bind(this))),this.registerEventHandler(t.on(["blur","focus"],this.toggleKeyboardFocusStyling.bind(this))),this},handleSearchContextRemoval:function(){this.get("container").one(".search-toggle > span").removeClass("active")},toggleKeyboardFocusStyling:function(e){var t=e.target.ancestor(".fluid-magic-search-view");t&&t.toggleClass("has-keyboard-focus")},toggleSearch:function(t){this.get("container");t.halt(),e.fire("add-context-to-search-field",{name:this.get("personModel").getValue("displayname"),id:this.nsid,type:"user",scope:this.selected}),t.target.addClass("active")}})}),"@VERSION@",{requires:["flickr-view","flickr-promise","hermes-template-fluid-magic-search"],langBundles:["search","photo-page-scrappy"]});