YUI.add("app-context",(function(e,i){var t,o=require("hermes-core/flog")(i),n=e.config.flickr.api.default_timeout,r=e.config.flickr.api.retry_timeout,s=[117,118,119],a=new RegExp(e.config.flickr.api.write_api_method_regex),l=e.config.flickr.model_eviction,c={};(t=e.AppContext=function(i){(i=i||{}).request&&(this.request=i.request),this.params={},this._initializeParams(i),this.viewTiming={},this.modelRegistries={},this.modelImportExport=new e.ModelImportExport(this),this.flickrAPI=new e.FlickrAPI(this.request,this),this.auth=i.auth,this.flapp=i.flapp,this.writeAPICallsMadeOnThisPage={},this._moduleInstances={},this._pendingYUIPromises={},this._loadedViews={},this._apiCalls={},this._previousLocation=null,this._uploadInProgress=!1,this._pendingUploadErrorModal=null,this._concurrentAPICalls=0,this._apiQueueOrder=[],this._apiQueueFunctions={},this._preliminaryNsid=null,this.flipper=new e.Flipper(i.flipper),this.segments=new e.Segments(i.auth&&i.auth.user?i.auth.user.segments:[]),this.experiments={fullscreen:new e.Experiments.Fullscreen(this),optOut:new e.Experiments.OptOut(this)},this.secure="https"===this.protocol,this.flipper.isFlipped("enable-test-ads")?this.adManager=new e.TestAdManager(this.params.referrer,this):this.adManager=new e.AscendeumAdManager(this.params.referrer,this),this.adManager.setAdViewStatus(),this.flipper.isFlipped("enable-google-ad-manager-overlay")&&!YUI.Env.isServer&&this.adManager.setAdOverlay(),this.cookieCatcher=new e.CookieCatcher(this,{required:e.config.flickr.cookie_consent.cookie_level_buckets.required,functional:e.config.flickr.cookie_consent.cookie_level_buckets.functional,advertising:e.config.flickr.cookie_consent.cookie_level_buckets.advertising}),this.requiresCookieConsent=!0,this.flipper.isFlipped("enable-cookie-consent-execution-hermes")&&(YUI.Env.isServer?(this.flipper.isFlipped("enable-geoblock-cookie-consent")&&!this.request.requiresCookieConsent&&(this.requiresCookieConsent=!1),this.cookieConsentContext=this.request.cookie_consent_context):(this.cookieConsentContext=this.cookieCatcher.getCookieConsentContext(),this.flipper.isFlipped("enable-geoblock-cookie-consent")&&!this.cookieConsentContext.needsConsent&&(this.requiresCookieConsent=!1))),this.dataLayer=new e.DataLayer(this),this.viewportData=new e.ViewportData(this),this.clientId="f"+Math.round(1e4*Math.random()).toString(36),this.isCSSLoaded=!1,this.bannerManager=new e.BannerHelper(this),YUI.Env.isServer||(this.overlayManager=new e.StackingOverlayManager(this)),!YUI.Env.isServer&&this.flipper.isFlipped("enable-cookie-consent-execution-hermes")&&this.requiresCookieConsent&&(this.trustarcConsentManager=new e.TrustarcConsentManager(this)),this.gettyHelper=new e.GettyHelper(this),this.initGlobalEvictionExemptionConfig()}).getValidParams=function(){return["bucket","protocol","buckets","random_slice","referrer","flipper","lang","gp_code","gp_owner","share_code"]},t.prototype={routeConfig:{},_initializeParams:function(e){var i=this;t.getValidParams().forEach((function(t){e.request&&t in e.request&&(e[t]=e.request[t]),t in e&&(i[t]=e[t],i.params[t]=e[t])}))},promisedUse:function(i){var t=YUI.Env.isServer,o=t?this.request.app.yui:e;return new e.Promise((function(e,n){o.use(i,(function(i,o){t?e(i):o&&"success"in o?o.success?e(i):n(o.msg):n("Y.use: no status provided")}))}))},instantiateYUIModule:function(i,t){if(!e.Lang.isString(i)||!e.Lang.isFunction(t))return e.Promise.reject("[app-context] `instantiateYUIModule` called without a `name` or `initializer`.");var o=this._moduleInstances,n=this._pendingYUIPromises;return n[i]||(o[i]?n[i]=e.Promise.resolve(o[i]):n[i]=this.promisedUse(i).then((function(){var e=t();return o[i]=e,delete n[i],e}))),n[i]},getModelRegistry:function(i){if(!e.Lang.isString(i))return e.Promise.reject("[app-context] `getModelRegistry` called without a `name`.");var t,n=this;return this.instantiateYUIModule(i,(function(r){if(!e.Models||!e.Models[i]||"function"!=typeof e.Models[i])throw o.error("There was an error loading the modelregistry",{status:r}),(t=new Error("[app-context] - Model registry failed to load:"+i)).moduleLoadingError=!0,t;var s=new e.Models[i](n);return n.modelRegistries[i]=s,s}))},getModel:function(i,t,o){return e.Lang.isString(i)?this._validateID(t)?this.getModelRegistry(i).then(function(i){return this._refetchExistingModels&&(e.Lang.isObject(t,!0)?i.attributeSearch(t):[t]).forEach(function(e){this.canEvictModel(i,e)&&this.evictModel(i,e)}.bind(this)),i.get(t,o)}.bind(this)):e.Promise.reject("[app-context] `getModel` ("+i+") called without `modelIdOrAttributes`."):e.Promise.reject("[app-context] `getModel` called without a `registryName`.")},markAsNewlyFetched:function(e,i){this._refetchExistingModels&&(this._refetchedModels[e]||(this._refetchedModels[e]={}),this._refetchedModels[e][i]=!0)},getRoute:function(i){var t,n=this;return this.instantiateYUIModule(i,(function(r){if(!e.Routes||!e.Routes[i]||"function"!=typeof e.Routes[i])throw o.error("There was an error loading the route",{status:r}),(t=new Error("[app-context] - Route failed to load:"+i)).moduleLoadingError=!0,t;return new e.Routes[i](n)}))},getView:function(i,t){var n,r=this;return(t=t||{}).appContext=r,r.promisedUse(i).then((function(s){if(!e.Views||!e.Views[i]||"function"!=typeof e.Views[i])throw o.error("There was an error loading the view",{status:s}),(n=new Error("[app-context] - View failed to load:"+i)).moduleLoadingError=!0,n;return r._loadedViews[i]=!0,new e.Views[i](t)}))},getLoadedViews:function(){return Object.keys(this._loadedViews)},setGPCredentials:function(e){var i=this;null===e?(delete i.params.gp_owner,delete i.params.gp_code,delete i.params.share_code,delete c.gp_owner,delete c.gp_code,delete c.share_code):null!==e&&e.gp_code&&(i.params.gp_owner=e.gp_owner,i.params.gp_code=e.gp_code,i.params.share_code=e.share_code,c.gp_owner=e.gp_owner,c.gp_code=e.gp_code,c.share_code=e.share_code)},getCookie:function(i){return YUI.Env.isServer?this.request.cookies[escape(i)]:e.Cookie.get(i)},setCookie:function(i){if(YUI.Env.isServer)o.warn("You can't set a cookie from the server with AppContext -- use middleware.",i);else{i.cookieName&&void 0!==i.cookieValue&&i.path||o.error("Missing important parameters to set a cookie");var t=i.cookieName,n=i.cookieValue,r=i.domain||".flickr.com",s=i.path,a=i.expiresMonthsFromNow||3,l=i.expires?i.expires:e.moment().add(a,"months").toDate();i.remove&&e.Cookie.remove(t,{domain:i.domain||".flickr.com",path:s}),this.cookieCatcher.setCookieIfAllowed(t,n,{domain:r,path:s,expires:l})}},removeCookie:function(i){YUI.Env.isServer?o.warn("You can't remove a cookie from the server with AppContext -- use middleware.",i):(i.cookieName&&i.path||o.error("Missing important parameters to remove a cookie"),e.Cookie.remove(i.cookieName,{domain:i.domain||".flickr.com",path:i.path}))},reissueCookie:function(e,i){var t;e&&i||o.error("Missing important parameters to reissue a cookie"),t=this.getCookie(e),this.setCookie({cookieName:e,path:i,cookieValue:t})},getViewer:function(){var e={},i=this;return e.getPixelRatio=function(){var e;return(e=YUI.Env.isServer?i.getCookie("density"):window.devicePixelRatio)||(e=1),e},this.auth&&this.auth.signedIn?(e.nsid=this.auth.user.nsid,e.intl=this.auth.intl,e.signedIn=this.auth.signedIn,e.isPossiblyAdminUser=this.auth.isPossiblyAdminUser,e.isMinor=this.auth.isMinor,e.isPro=this.auth.user.ispro,e.isCognitoUser=this.auth.isCognitoUser,e.prefs={timezonePref:this.auth.timezonePref,downloadAccessPref:this.auth.downloadAccessPref},e.segments=this.auth.user.segments||[]):this._preliminaryNsid?(e.nsid=this._preliminaryNsid,e.signedIn=!0):(e.signedIn=!1,e.prefs={timezonePref:{name:"",dst:!1,offset:"+00:00",isDefaults:!0}}),YUI.Env.isServer?e.userAdBlockEnabled=null:e.userAdBlockEnabled=this.adManager.getAdBlockStatus(),e},setPreliminaryViewerNsid:function(e){this._preliminaryNsid=e},getKeyboardManager:function(){return this._keyboardManager||(this._keyboardManager=new e.KeyboardManager),this._keyboardManager},initGlobalEvictionExemptionConfig:function(){var e=this.getViewer().nsid;this._globalEvictionExemptionConfig={},e&&(this._globalEvictionExemptionConfig["person-preferences-models"]={exemptIds:[e]},this._globalEvictionExemptionConfig["privileges-models"]={exemptIds:[e]})},getPreviousURL:function(){var e="";return this._previousLocation&&(e=this._previousLocation.pathname,this._previousLocation.querystring&&(e+="?"+this._previousLocation.querystring),this._previousLocation.hash&&(e+="#"+this._previousLocation.hash)),e},getPreviousLocation:function(){return e.merge(this._previousLocation)},setPreviousLocation:function(){this._previousLocation=this.getLocation()},updateModelRefetchState:function(i,t){if(!this.flipper.isFlipped("evict-models-on-navigate")||!i||t)return this._refetchExistingModels=!1,void(this._refetchedModels=null);var o,n;this._previousLocation&&(o=e.URLHelper.getSiteSectionByURL(this._previousLocation.pathname)),i&&(i="/"+i.split("/").slice(3).join("/"),n=e.URLHelper.getSiteSectionByURL(i)),this._refetchExistingModels=void 0,n&&l.entry_refetch_exemptions[n.name]&&(this._refetchExistingModels=!1),o&&l.exit_refetch_exemptions[o.name]&&(this._refetchExistingModels=!1),void 0===this._refetchExistingModels&&n&&o&&(l.transition_refetch_exemptions[o.name]&&l.transition_refetch_exemptions[o.name][n.name]?this._refetchExistingModels=!1:this._refetchExistingModels=o.name!==n.name),void 0===this._refetchExistingModels&&(this._refetchExistingModels=!1),this._refetchedModels={}},hasClientSideRouted:function(){return!!this._clientSideRouted},setClientSideRouted:function(e){this._clientSideRouted=e},getReferrer:function(){var e;try{e=this.flapp.get("activeView").getViewDataFromHistory("referrer")}catch(e){}return e},getLocation:function(){var i;return YUI.Env.isServer?(i={protocol:this.request.protocol,hostname:this.request.hostname,pathname:this.request.path,query:this.request.query,querystring:this.request.query?e.QueryString.stringify(this.request.query):"",hash:""}).href=i.protocol+"://"+i.hostname+this.request.originalUrl:(i={protocol:e.config.win.location.protocol.split(":")[0],hostname:e.config.win.location.hostname,pathname:e.config.win.location.pathname,querystring:e.config.win.location.search.split("?")[1],href:e.config.win.location.href,hash:e.config.win.location.hash}).query=i.querystring?e.QueryString.parse(i.querystring):"",i},getViewCounter:function(){return this._viewCounter||(this._viewCounter=new e.ViewCounter({appContext:this})),this._viewCounter},getBucket:function(e){if(this.buckets)return this.buckets[e]},handleMismatchedNSID:function(){var i;i=e.mix({langBundles:["common"],appContext:this},e.Localizable);let t=new e.Views["confirmation-dialog-view"]({appContext:this,title:i.intlMessage({intlName:"common.ERROR"}),htmlMessage:i.intlMessage({intlName:"common.MISMATCHED_NSID_ERROR"}),showCloseXButton:!0,fireModalActionClick:!1,onConfirm:async i=>{t.setLoading(!0),e.config.win.location.reload(!0)}});new e.Views.FluidModal({appContext:this,subview:t,dismissOnOverlayClick:!1,hasSubviewConfigRefactor:!0}).show()},mitigateClientPanda:function(i){var t;t=e.mix({langBundles:["common"],appContext:this},e.Localizable);let o=new e.Views["confirmation-dialog-view"]({appContext:this,title:t.intlMessage({intlName:"common.ERROR"}),htmlMessage:t.intlMessage({intlName:i}),showCloseXButton:!0,fireModalActionClick:!1,onConfirm:async i=>{o.setLoading(!0),e.config.win.location.reload(!0)}});return new e.Views.FluidModal({appContext:this,subview:o,dismissOnOverlayClick:!1,dismissOnActionClick:!1,hasSubviewConfigRefactor:!0}).show(),e.PromiseChainDestroyer()},callAPI:function(i,t,l,h){var u,d,p,g=this,f=[i,t=t||{},null,h];return l=l&&!YUI.Env.isServer,f=null!==c?[i,e.merge(t,c),null,h]:[i,t,null,h],u=i+"__"+Object.keys(t).sort().map((function(e){return encodeURIComponent(e)+"_"+encodeURIComponent(t[e])})).join("__"),this._apiCalls[u]?(e.config.flickr.cameraroll.suppress_logging&&"flickr.cameraroll.getPhotosByOffset"===i||o.log("Reusing API call",{method:i}),g._apiQueueOrder.length>1&&(p=g._apiQueueOrder.indexOf(u))>-1&&p<g._apiQueueOrder.length-1&&(g._apiQueueOrder.splice(p,1),g._apiQueueOrder.push(u)),this._apiCalls[u].then((function(i){return e.clone(i,!0)}),(function(i){throw e.clone(i,!0)}))):(l&&(f.push(null),f.push({timeout:n})),i.match(a)&&this.cacheWriteAPICall(u,i),this._apiCalls[u]=new e.Promise((function(t,n){var a;a=function(){g.flickrAPI.callMethod.apply(g.flickrAPI,f).then((function(e){return g.onAPICallComplete(u,!0),e}),(function(t){if(g.onAPICallComplete(u,!1),!YUI.Env.isServer&&-1!==s.indexOf(t.code))return g.handleMismatchedNSID(),e.PromiseChainDestroyer();if(!YUI.Env.isServer&&0===t.status&&0===t.total)return g.mitigateClientPanda("common.NETWORK_CONNECTIVITY_ISSUE");if(l&&(t.clientTimeout||0===t.status||t.transportFailure)){if(o.log("Retrying API call",{method:i}),delete g._apiCalls[u],!YUI.Env.isServer&&e.config.win.beaconError){if(e.config.win.document)try{t.domain=e.config.win.document.domain}catch(e){}e.config.win.beaconError("[app-context] Retrying API ",e.config.win.location.href,t)}return(d=f[f.length-1]).timeout&&(d.timeout=r),g._apiCalls[u]=g.flickrAPI.callMethod.apply(g.flickrAPI,f).then((function(t){return g.onAPICallComplete(u,!0),o.log("Successfully retried API call",{method:i}),e.fire("appContext:apiRetry",{apiMethod:i,code:418}),!YUI.Env.isServer&&e.config.win.beaconError&&e.config.win.beaconError("[app-context] Successful API retry ",e.config.win.location.href,{}),t}),(function(t){throw g.onAPICallComplete(u,!1),o.log("Failed retry of API call",{method:i}),e.fire("appContext:apiRetry",{apiMethod:i,code:408}),!YUI.Env.isServer&&e.config.win.beaconError&&e.config.win.beaconError("[app-context] Failed API retry ",e.config.win.location.href,{}),t})),g._concurrentAPICalls++,g._apiCalls[u]}throw t})).then(t,n)},YUI.Env.isServer?a():(g._apiQueueOrder.push(u),g._apiQueueFunctions[u]=a,g.callNextInQueue())})),this._apiCalls[u])},callNextInQueue:function(){var i,t,o=e.config.flickr.api.max_concurrent_api_calls;this._apiQueueOrder.length&&this._concurrentAPICalls<o&&(this._concurrentAPICalls++,i=this._apiQueueOrder.pop(),t=this._apiQueueFunctions[i],delete this._apiQueueFunctions[i],t())},cacheWriteAPICall:function(e,i){this.writeAPICallsMadeOnThisPage[e]={methodName:i,completed:!1,failed:!1}},onAPICallComplete:function(e,i){var t=this.writeAPICallsMadeOnThisPage[e];t&&(t.completed=!0,t.failed=!i),delete this._apiCalls[e],this._concurrentAPICalls--,this.callNextInQueue()},clearWriteAPICallCache:function(){this.writeAPICallsMadeOnThisPage={}},canEvictModel:function(e,i){var t,o;return!(!e||!i)&&(!!e.exists(i)&&(t=e.name,!((o=this._globalEvictionExemptionConfig[t])&&o.exemptIds&&-1!==o.exemptIds.indexOf(i))&&(this._refetchedModels[t]||(this._refetchedModels[t]={}),!this._refetchedModels[t][i])))},evictModel:function(e,i){var t=e.name;this.flipper.isFlipped("model-eviction-debugging")&&console.log("[EVICT] "+t+" ["+i+"]"),e.getOwnedModels(i).forEach(function(e){this.canEvictModel(e.registry,e.id)&&this.evictModel(e.registry,e.id)}.bind(this)),e.remove(i)},evictModels:function(i){var t,n,r,s,a=this.getViewer().nsid,l=[],c=this.modelRegistries;for(t in this.writeAPICallsMadeOnThisPage)(n=this.writeAPICallsMadeOnThisPage[t]).completed&&!n.failed&&l.push(n);l.forEach((function(e){})),this._refetchExistingModels&&(a&&(i=e.merge(i,this._globalEvictionExemptionConfig)),Object.keys(this.modelRegistries).forEach((function(e){r=c[e],(s=i[e])?s.exemptIds?(s.evictIds&&o.warn("Error in eviction config for registry: cannot specify both an allowlist (`evictIds`) and a denylist (`exemptIds`) for model eviction. Ignoring `evictIds` and evicting all models except those listed in `exemptIds`.",{modelRegistryName:e}),r.removeAllExcept(s.exemptIds)):s.evictIds&&s.evictIds.forEach((function(i){c[e].remove(i)})):c[e].removeAll()})))},markUploadInProgress:function(e){this._uploadInProgress=e},uploadIsInProgress:function(){return this._uploadInProgress},storePendingUploadErrorModal:function(e){this._pendingUploadErrorModal=e},retrievePendingUploadErrorModal:function(e){return this._pendingUploadErrorModal},_doForcedServerRender:function(){if(!YUI.Env.isServer||!this.request||!this.request.headers)return!1;var e=!1;return e=(e=e||this.request.UA.isBot)||this.request.UA.isSharingBot,this.flipper.isFlipped("enable-server-render-for-unsupported-browsers")&&(e=e||this.request.UA.isUnsupportedBrowser),e},getUA:function(){return YUI.Env.isServer?this.request.UA:e.config.flickr.request.UA},logViewTiming:function(){var e,i=this.flapp.get("activeView"),t=0,o=this;e=function(i,n){t++,Object.keys(i.subviews).forEach((function(r){var s=i.subviews[r].get("container").hasClass("requiredToShowOnServer")||i.subviews[r]._params.requiredToShowOnClient,a=n&&s,l="-";l=s?"🔹":"-",l=a?"🔷":l,console.log("| \t\t "+new Array(t).join(" |\t\t ")+" "+l+" "+r+" (initialization: "+o.viewTiming[r].initialize+"ms) (loadState: "+o.viewTiming[r].loadState+"ms)"),e(i.subviews[r],a)})),t--},console.log(this.routeConfig.module+": "+this.routeTiming+"ms"),console.log("🔷 "+i.name+" (initialization: "+this.viewTiming[i.name].initialize+"ms) (loadState: "+this.viewTiming[i.name].loadState+"ms)"),e(i,!0)},_validateID:function(e){return null!==e&&void 0!==e}}}),"@VERSION@",{requires:["oop","flickr-api","flickr-promise","promise","model-import-export","cookie","view-counter","flipper","segments","localizable","moment","experiments-fullscreen","experiments-opt-out","moola-manager","viewport-data","querystring-parse-simple","querystring-stringify-simple","url-helper","browser-support","api-helper","banner-helper","cookie-catcher","stacking-overlay-manager","trustarc-consent-manager","datalayer","getty-helper"],optionalRequires:["hermes-core"]});YUI.add("better-cache",(function(e){var c,t=[],n=0,r={};function o(e,c){return e.score<c.score?-1:e.score>c.score?1:0}function u(){var e,n,u;for(t.sort(o),r={},t.length>c&&(u=t.shift()).callback&&u.callback(),e=t.length,n=0;n<e;n++)r[t[n].key]=n}c=e.config.flickr.better_cache_size||100,e.betterCache={reset:function(){t=[],n=0,r={}},_cache:t,getSize:function(){return t.length},unset:function(e){var c=r[e];void 0!==c&&(t.splice(c,1),u())},set:function(e,c,o){var a;!1!==c?((a=!!r[e]&&t[r[e]])?(t[r[e]].value=c,t[r[e]].score=n++,"function"==typeof o&&(a.callback=o)):(a={key:e,value:c,score:n++},"function"==typeof o&&(a.callback=o),t.push(a)),u()):this.unset(e)},get:function(e){return"number"==typeof r[e]?(t[r[e]].score=++n,t[r[e]].value):null}}}),"@VERSION@");YUI.add("datatype-xml-parse",function(e,t){e.mix(e.namespace("XML"),{parse:function(t){var n=null,r;return typeof t=="string"&&(r=e.config.win,r.ActiveXObject!==undefined?(n=new ActiveXObject("Microsoft.XMLDOM"),n.async=!1,n.loadXML(t)):r.DOMParser!==undefined?n=(new DOMParser).parseFromString(t,"text/xml"):r.Windows!==undefined&&(n=new Windows.Data.Xml.Dom.XmlDocument,n.loadXml(t))),n===null||n.documentElement===null||n.documentElement.nodeName==="parsererror",n}}),e.namespace("Parsers").xml=e.XML.parse,e.namespace("DataType"),e.DataType.XML=e.XML},"3.16.0");
YUI.add("io-xdr",function(e,t){function a(e,t,n){var r='<object id="io_swf" type="application/x-shockwave-flash" data="'+e+'" width="0" height="0">'+'<param name="movie" value="'+e+'">'+'<param name="FlashVars" value="yid='+t+"&uid="+n+'">'+'<param name="allowScriptAccess" value="always">'+"</object>",i=s.createElement("div");s.body.appendChild(i),i.innerHTML=r}function f(t,n,r){return n==="flash"&&(t.c.responseText=decodeURI(t.c.responseText)),r==="xml"&&(t.c.responseXML=e.DataType.XML.parse(t.c.responseText)),t}function l(e,t){return e.c.abort(e.id,t)}function c(e){return u?i[e.id]!==4:e.c.isInProgress(e.id)}var n=e.publish("io:xdrReady",{fireOnce:!0}),r={},i={},s=e.config.doc,o=e.config.win,u=o&&o.XDomainRequest;e.mix(e.IO.prototype,{_transport:{},_ieEvt:function(e,t){var n=this,r=e.id,s="timeout";e.c.onprogress=function(){i[r]=3},e.c.onload=function(){i[r]=4,n.xdrResponse("success",e,t)},e.c.onerror=function(){i[r]=4,n.xdrResponse("failure",e,t)},e.c.ontimeout=function(){i[r]=4,n.xdrResponse(s,e,t)},e.c[s]=t[s]||0},xdr:function(t,n,i){var s=this;return i.xdr.use==="flash"?(r[n.id]=i,o.setTimeout(function(){try{n.c.send(t,{id:n.id,uid:n.uid,method:i.method,data:i.data,headers:i.headers})}catch(e){s.xdrResponse("transport error",n,i),delete r[n.id]}},e.io.xdr.delay)):u?(s._ieEvt(n,i),n.c.open(i.method||"GET",t),setTimeout(function(){n.c.send(i.data)},0)):n.c.send(t,n,i),{id:n.id,abort:function(){return n.c?l(n,i):!1},isInProgress:function(){return n.c?c(n.id):!1},io:s}},xdrResponse:function(e,t,n){n=r[t.id]?r[t.id]:n;var s=this,o=u?i:r,a=n.xdr.use,l=n.xdr.dataType;switch(e){case"start":s.start(t,n);break;case"success":s.success(f(t,a,l),n),delete o[t.id];break;case"timeout":case"abort":case"transport error":t.c={status:0,statusText:e};case"failure":s.failure(f(t,a,l),n),delete o[t.id]}},_xdrReady:function(t,r){e.fire(n,t,r)},transport:function(t){t.id==="flash"&&(a(e.UA.ie?t.src+"?d="+(new Date).valueOf().toString():t.src,e.id,t.uid),e.IO.transports.flash=function(){return s.getElementById("io_swf")})}}),e.io.xdrReady=function(t,n){var r=e.io._map[n];e.io.xdr.delay=0,r._xdrReady.apply(r,[t,n])},e.io.xdrResponse=function(t,n,r){var i=e.io._map[n.uid];i.xdrResponse.apply(i,[t,n,r])},e.io.transport=function(t){var n=e.io._map["io:0"]||new e.IO;t.uid=n._uid,n.transport.apply(n,[t])},e.io.xdr={delay:100}},"3.16.0",{requires:["io-base","datatype-xml-parse"]});
YUI.add("site-key",(function(e,t){"use strict";var i=require("hermes-core/flog")(t),r=e.config.flickr.api.site_key_retry_interval,s=e.config.flickr.api.site_key_fetch_interval,n=e.config.flickr.api.site_key,o=e.config.flickr.api.site_key_expiresAt,u=e.config.flickr.api.site_key_fetched;function c(t){this.flickrAPI=t||new e.FlickrAPI,this._tasks=[]}c.getKey=function(){return n},c.getFetchedAt=function(){return u},c.getExpiresAt=function(){return o},c.prototype.getKey=function(){return n},c.prototype.isExpired=function(){return Date.now()/1e3>o},c.prototype.invalidate=function(e){if(e||(e=0),!(e<(this._lastStored||0)))return this.setExpired()},c.prototype.setExpired=function(){return o=0},c.prototype.store=function(e,t){this._lastStored=Date.now(),t||(t=Math.floor(this._lastStored/1e3)),n=e,o=(u=t)+s,this.drainQueue()},c.prototype.pushToQueue=function(e){this._tasks.push(e)},c.prototype.drainQueue=function(){for(;this._tasks.length;)this._tasks.shift().resolve()},c.prototype.hasQueuedTasks=function(){return!!this._tasks.length},c.prototype.scheduleFutureFetch=function(){this._timerFutureFetch=setTimeout(this.fetch.bind(this),1e3*s)},c.prototype.scheduleRetry=function(e){var t=this,i=this._fetchRuns>4?1:Math.pow(2,(this._fetchRuns||1)-1)/10,s=r*i;clearTimeout(this._timerRetry),this._timerRetry=setTimeout((function(){t._timerRetry=null,t.fetch(e)}),1e3*s)},c.prototype.fetch=function(t){clearTimeout(this._timerFutureFetch);var r=this,s=r.hasQueuedTasks();return!t&&(t=new e.Promise((function(e,t){this.resolve=e,this.reject=t})),this.pushToQueue(t),s)||(this._fetchRuns||(this._fetchRuns=0),this._fetchRuns++,this.flickrAPI.fetchSiteKey().then((function(e){var t=e.site_key;i.info("Received new site key",{key:t}),r._fetchRuns=0,r.store(t),r.scheduleFutureFetch()}),(function(e){i.error("Failed to fetch site key",{err:e}),r.scheduleRetry(t)}))),t},e.augment(c,e.EventTarget),e.SiteKey=c}),"@VERSION@",{requires:["event-custom","flickr-api","flickr-promise"],optionalRequires:["hermes-core"]});YUI.add("client-transport",(function(e){"use strict";var t,r,i=e.betterCache,s=e.config.flickr.transport.default_timeout,o=/"id":"([0-9]+)"/g,a=/"nsid":"([0-9]+@N[0-9]+)"/g,n={photos:{},users:{}},c=new RegExp(e.config.flickr.api.write_api_method_regex),l={"flickr.sharing.getServiceTypes":!0},f={"flickr.sharing.getServices":!0,"flickr.sharing.canShare":!0,"flickr.sharing.getAuthorizeUrl":!0,"flickr.products.orders.getOrder":!0,"flickr.cameraroll.getMap":!0,"flickr.cameraroll.getMapVersion":!0,"flickr.cameraroll.getPhotosByOffset":!0,"flickr.cameraroll.tags.getPhotoIds":!0,"flickr.photos.getPhotos":!0,"flickr.photos.getFavorites":!0,"flickr.photos.upload.checkTickets":!0,"flickr.photos.recentlyDeleted":!0,"flickr.photos.recentlyUploaded":!0,"flickr.photos.recentlyUpdated":!0,"flickr.photosets.getList":!0,"flickr.photosets.getPhotos":!0,"flickr.people.getPhotos":!0,"flickr.activity.getNotificationsCount":!0,"flickr.feed.getFeed":!0,"flickr.activity.recentByType":!0,"flickr.feed.preferences.getUserPreferences":!0,"flickr.groups.invite.photo.invite":!0,"flickr.feed.preferences.muteObject":!0,"flickr.feed.preferences.unmuteObject":!0,"flickr.feed.preferences.muteEventType":!0,"flickr.subscriptions.validateCoupon":!0,"flickr.galleries.getList":!0,"flickr.galleries.getPhotos":!0,"flickr.galleries.getContext":!0,"flickr.galleries.getInfo":!0,"flickr.people.getGroupsWithStatus":!0,"flickr.groups.pools.getPhotos":!0,"flickr.groups.pools.getGroups":!0,"flickr.groups.admin.getPendingPhotos":!0,"flickr.prefs.setPrefs":!0,"flickr.prefs.getPrefs":!0,"flickr.prefs.setActivityFilter":!0,"flickr.account.getAuthorizedServices":!0,"flickr.galleries.comments.getList":!0,"flickr.payments.getUserGiftList":!0,"flickr.payments.updateUserGiftStatus":!0,"flickr.payments.getUserGiftListGiven":!0,"flickr.photos.licenses.getLicenseHistory":!0,"flickr.commons.getRecentAlbums":!0,"flickr.tags.getListUserRaw":!0,"flickr.photos.licenses.getAvailable":!0},d=require("xhr");function p(e){var t;if(e.data.photo_id&&n.photos[e.data.photo_id]){for(t in n.photos[e.data.photo_id])i.unset(t);delete n.photos[e.data.photo_id]}if(e.data.user_id&&n.users[e.data.user_id]){for(t in n.users[e.data.user_id])i.unset(t);delete n.users[e.data.user_id]}}function u(t,r,i){var s,o=this;return(s=function(){return o.keys.siteKey.isExpired()?o.keys.siteKey.fetch().then(s):o.keys.csrf.isExpired()?o.keys.csrf.fetch().then(s):i?(h.call(o,t,r,i,u),i):new e.Promise((function(e,i){this.resolve=e,this.reject=i,h.call(o,t,r,this,u)}))})()}function h(t,s,u,h){var k,y,v,w,T,S,_,E,b,I,P,R=this;if(w=e.config.flickr.request?e.config.flickr.request.id:window.reqId,(s=s||{}).data=s.data||{},s.data.csrf=this.keys.csrf.getKey(),s.data.api_key=this.keys.siteKey.getKey(),!s.data.api_key){var x="Invalid API key.",O=new Error(x);return m(x,{}),O.fatal=!0,O.panda=!0,void u.reject(O)}if(s.method=s.method||"GET",s.data.format="json",s.data.hermes=1,s.data.hermesClient=1,s.data.reqId=w,v=(k=t)+JSON.stringify(s.data),s.data.method&&s.data.method.match(c)&&(s.method="POST",p(s)),y=i.get(v))return e.Promise.resolve(y).then(u.resolve);s.data.nojsoncallback=1,this._authRetry=this._authRetry||0,this._authRetry++,T=(new Date).getTime(),S=s.data.method,_=s.data,E={method:s.method,data:s.data,xdr:{use:"native",credentials:!0,dataType:"application/json"},on:{complete:function(c,d){var k,y,b={},x=!0===f[s.data.method],O=!1!==l[s.data.method],C=(new Date).getTime(),N=0;r&&(k=c,d=d.rawRequest);try{N=d.status}catch(e){}if(b.reqId=w,404===N)return u.resolve({status:404}),b.apiMethod=S,void e.fire("client-transport:apiError",b);if(503===N)return u.reject({status:503}),b.apiMethod=S,void e.fire("client-transport:apiError",b);if(0===N&&d&&4!==d.readyState)return setTimeout((function(){e.ClientTransport.unloading||((y={status:0,resp:d,message:"XHR aborted:"+d.readyState}).total=C-T,y.apiMethod=S,r&&k&&(y.message+=": "+k.message),y.total>E.timeout&&(y.timeout=!0,y.clientTimeout=!0,y.message="XHR Timeout"),u.reject(y),b.apiMethod=S,e.fire("client-transport:apiError",b))}),10),void g(P,"abort",I);if(0===N){(y={status:0,resp:d,message:"XHR error"}).total=C-T,y.apiMethod=S,r&&k&&(y.message+=": "+k.message),y.total>E.timeout&&(y.timeout=!0,y.clientTimeout=!0,y.message="XHR Timeout");try{var U=new Image;U.addEventListener("error",(function(){m("XHR maybe dns issue",{})}),!1),U.src=e.config.flickr.api.hostname+"/services/spaceout.gif"}catch(e){}return u.reject(y),b.apiMethod=S,e.fire("client-transport:apiError",b),void g(P,"error",I)}try{b=JSON.parse(d.responseText)||{}}catch(t){return u.reject({status:0,message:"invalid JSON in response",resp:d}),b.apiMethod=S,void e.fire("client-transport:apiError",b)}if("ok"!==b.stat)return b.code=Number(b.code),h&&[98,99,100].indexOf(b.code)>=0&&R._authRetry<10?(98===b.code&&R.keys.csrf.invalidate(T),R.keys.siteKey.invalidate(T),void h.call(R,t,s,u)):(b.apiMethod=S,e.fire("client-transport:apiError",b),"flickr.site.getCsrf"===S?u.reject(b):u.resolve(b));e.soon((function(){e.fire("client-transport:apiTime",{start:T,end:C,method:_.method})})),R._authRetry=0,u.resolve(b),"GET"===s.method&&O&&!x&&(!(function(e,t){for(var r;r=o.exec(t);)n.photos[r[1]]||(n.photos[r[1]]={}),n.photos[r[1]][e]=e;for(;r=a.exec(t);)n.users[r[1]]||(n.users[r[1]]={}),n.users[r[1]][e]=e})(v,d.responseText),i.set(v,b),setTimeout((function(){p(s)}),12e4))},start:function(){},end:function(){},failure:function(){}}};try{P=k+"?"+e.QueryString.stringify(E.data)}catch(e){}b=(new Date).getTime();var C={useXDR:!0,method:s.method,withCredentials:"true"};if(r&&("POST"===s.method?(C.url=k,C.body=e.QueryString.stringify(E.data),C.headers={"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}):C.url=P),"complete"!==window.document.readyState){var N=window.document.onreadystatechange;window.document.onreadystatechange=function(){"complete"===window.document.readyState&&(N&&"function"==typeof N&&N(),r?d(C,E.on.complete):e.io(k,E),I=(new Date).getTime()-b)}}else r?d(C,E.on.complete):e.io(k,E),I=(new Date).getTime()-b}function g(t,r,i){var s,o={},a=e.config.win;try{t&&a.performance&&a.performance.getEntriesByName&&(s=a.performance.getEntriesByName(t))&&s.length>0&&s[0]&&(s=s[s.length-1],o={dns:parseInt(s.domainLookupEnd-s.domainLookupStart),tcp:parseInt(s.connectEnd-s.connectStart),ttfb:parseInt(s.responseStart-s.startTime),transfer:parseInt(s.responseEnd-s.responseStart),total:parseInt(s.responseEnd-s.startTime),connectTime:i}),i&&(o.connectTime=i),Object.keys(o).length>0&&!YUI.Env.isServer&&e.config.win.beaconError&&e.config.win.beaconError("[FlickrAPI] XHR "+r+":",e.config.win.location.href,o)}catch(e){}}function m(t,r){var i=e.config.win;try{!YUI.Env.isServer&&e.config.win.beaconError&&r&&i.beaconError("[FlickrAPI] "+t+":",i.location.href,r)}catch(e){}}YUI.F=YUI.F||{},YUI.F.jsonCallbacks={},e.ClientTransport=t=function(e){this.keys=t._keys,r=e["enable-xhr-lib-for-client-xhrs"]},t._keys={csrf:null,siteKey:null},t.authorize=function(r){t._keys.siteKey=new e.SiteKey(r.flickrAPI),t._keys.siteKey.scheduleFutureFetch(),t._keys.csrf=new e.CsrfUpdater(r.flickrAPI),t._keys.csrf.scheduleFutureFetch()},e.ClientTransport.prototype={makeRequest:function(e,t){return u.call(this,e,t)},makeSiteKeyRequest:function(){var t="/hermes_error_beacon.gne";return new e.Promise((function(i,o){r?d({uri:t},(function(e,t,r){var s;t=t.rawRequest;try{s=JSON.parse(t.responseText)||{}}catch(e){return o({status:0,message:"invalid JSON in response",resp:t})}if(!s.site_key)return o({status:0,message:"invalid JSON content, no site_key found",resp:t});i(s)})):e.io(t,{method:"GET",timeout:s,on:{complete:function(e,t){var r;try{r=JSON.parse(t.responseText)||{}}catch(e){return o({status:0,message:"invalid JSON in response",resp:t})}if(!r.site_key)return o({status:0,message:"invalid JSON content, no site_key found",resp:t});i(r)}}})}))},makeCsrfRequest:function(t){e.ClientApp&&e.ClientApp.disableClientNav()}}}),"@VERSION@",{requires:["querystring-stringify","better-cache","io-xdr","site-key","csrf-updater","flickr-promise","client-app"],optionalRequires:["hermes-core"],affinity:"client"});YUI.add("node-pluginhost",function(e,t){e.Node.plug=function(){var t=e.Array(arguments);return t.unshift(e.Node),e.Plugin.Host.plug.apply(e.Base,t),e.Node},e.Node.unplug=function(){var t=e.Array(arguments);return t.unshift(e.Node),e.Plugin.Host.unplug.apply(e.Base,t),e.Node},e.mix(e.Node,e.Plugin.Host,!1,null,1),e.Object.each(e.Node._instances,function(t){e.Plugin.Host.apply(t)}),e.NodeList.prototype.plug=function(){var t=arguments;return e.NodeList.each(this,function(n){e.Node.prototype.plug.apply(e.one(n),t)}),this},e.NodeList.prototype.unplug=function(){var t=arguments;return e.NodeList.each(this,function(n){e.Node.prototype.unplug.apply(e.one(n),t)}),this}},"3.16.0",{requires:["node-base","pluginhost"]});
YUI.add("dom-screen",function(e,t){(function(e){var t="documentElement",n="compatMode",r="position",i="fixed",s="relative",o="left",u="top",a="BackCompat",f="medium",l="borderLeftWidth",c="borderTopWidth",h="getBoundingClientRect",p="getComputedStyle",d=e.DOM,v=/^t(?:able|d|h)$/i,m;e.UA.ie&&(e.config.doc[n]!=="BackCompat"?m=t:m="body"),e.mix(d,{winHeight:function(e){var t=d._getWinSize(e).height;return t},winWidth:function(e){var t=d._getWinSize(e).width;return t},docHeight:function(e){var t=d._getDocSize(e).height;return Math.max(t,d._getWinSize(e).height)},docWidth:function(e){var t=d._getDocSize(e).width;return Math.max(t,d._getWinSize(e).width)},docScrollX:function(n,r){r=r||n?d._getDoc(n):e.config.doc;var i=r.defaultView,s=i?i.pageXOffset:0;return Math.max(r[t].scrollLeft,r.body.scrollLeft,s)},docScrollY:function(n,r){r=r||n?d._getDoc(n):e.config.doc;var i=r.defaultView,s=i?i.pageYOffset:0;return Math.max(r[t].scrollTop,r.body.scrollTop,s)},getXY:function(){return e.config.doc[t][h]?function(r){var i=null,s,o,u,f,l,c,p,v,g,y;if(r&&r.tagName){p=r.ownerDocument,u=p[n],u!==a?y=p[t]:y=p.body,y.contains?g=y.contains(r):g=e.DOM.contains(y,r);if(g){v=p.defaultView,v&&"pageXOffset"in v?(s=v.pageXOffset,o=v.pageYOffset):(s=m?p[m].scrollLeft:d.docScrollX(r,p),o=m?p[m].scrollTop:d.docScrollY(r,p)),e.UA.ie&&(!p.documentMode||p.documentMode<8||u===a)&&(l=y.clientLeft,c=y.clientTop),f=r[h](),i=[f.left,f.top];if(l||c)i[0]-=l,i[1]-=c;if(o||s)if(!e.UA.ios||e.UA.ios>=4.2)i[0]+=s,i[1]+=o}else i=d._getOffset(r)}return i}:function(t){var n=null,s,o,u,a,f;if(t)if(d.inDoc(t)){n=[t.offsetLeft,t.offsetTop],s=t.ownerDocument,o=t,u=e.UA.gecko||e.UA.webkit>519?!0:!1;while(o=o.offsetParent)n[0]+=o.offsetLeft,n[1]+=o.offsetTop,u&&(n=d._calcBorders(o,n));if(d.getStyle(t,r)!=i){o=t;while(o=o.parentNode){a=o.scrollTop,f=o.scrollLeft,e.UA.gecko&&d.getStyle(o,"overflow")!=="visible"&&(n=d._calcBorders(o,n));if(a||f)n[0]-=f,n[1]-=a}n[0]+=d.docScrollX(t,s),n[1]+=d.docScrollY(t,s)}else n[0]+=d.docScrollX(t,s),n[1]+=d.docScrollY(t,s)}else n=d._getOffset(t);return n}}(),getScrollbarWidth:e.cached(function(){var t=e.config.doc,n=t.createElement("div"),r=t.getElementsByTagName("body")[0],i=.1;return r&&(n.style.cssText="position:absolute;visibility:hidden;overflow:scroll;width:20px;",n.appendChild(t.createElement("p")).style.height="1px",r.insertBefore(n,r.firstChild),i=n.offsetWidth-n.clientWidth,r.removeChild(n)),i},null,.1),getX:function(e){return d.getXY(e)[0]},getY:function(e){return d.getXY(e)[1]},setXY:function(e,t,n){var i=d.setStyle,a,f,l,c;e&&t&&(a=d.getStyle(e,r),f=d._getOffset(e),a=="static"&&(a=s,i(e,r,a)),c=d.getXY(e),t[0]!==null&&i(e,o,t[0]-c[0]+f[0]+"px"),t[1]!==null&&i(e,u,t[1]-c[1]+f[1]+"px"),n||(l=d.getXY(e),(l[0]!==t[0]||l[1]!==t[1])&&d.setXY(e,t,!0)))},setX:function(e,t){return d.setXY(e,[t,null])},setY:function(e,t){return d.setXY(e,[null,t])},swapXY:function(e,t){var n=d.getXY(e);d.setXY(e,d.getXY(t)),d.setXY(t,n)},_calcBorders:function(t,n){var r=parseInt(d[p](t,c),10)||0,i=parseInt(d[p](t,l),10)||0;return e.UA.gecko&&v.test(t.tagName)&&(r=0,i=0),n[0]+=i,n[1]+=r,n},_getWinSize:function(r,i){i=i||r?d._getDoc(r):e.config.doc;var s=i.defaultView||i.parentWindow,o=i[n],u=s.innerHeight,a=s.innerWidth,f=i[t];return o&&!e.UA.opera&&(o!="CSS1Compat"&&(f=i.body),u=f.clientHeight,a=f.clientWidth),{height:u,width:a}},_getDocSize:function(r){var i=r?d._getDoc(r):e.config.doc,s=i[t];return i[n]!="CSS1Compat"&&(s=i.body),{height:s.scrollHeight,width:s.scrollWidth}}})})(e),function(e){var t="top",n="right",r="bottom",i="left",s=function(e,s){var o=Math.max(e[t],s[t]),u=Math.min(e[n],s[n]),a=Math.min(e[r],s[r]),f=Math.max(e[i],s[i]),l={};return l[t]=o,l[n]=u,l[r]=a,l[i]=f,l},o=e.DOM;e.mix(o,{region:function(e){var t=o.getXY(e),n=!1;return e&&t&&(n=o._getRegion(t[1],t[0]+e.offsetWidth,t[1]+e.offsetHeight,t[0])),n},intersect:function(u,a,f){var l=f||o.region(u),c={},h=a,p;if(h.tagName)c=o.region(h);else{if(!e.Lang.isObject(a))return!1;c=a}return p=s(c,l),{top:p[t],right:p[n],bottom:p[r],left:p[i],area:(p[r]-p[t])*(p[n]-p[i]),yoff:p[r]-p[t],xoff:p[n]-p[i],inRegion:o.inRegion(u,a,!1,f)}},inRegion:function(u,a,f,l){var c={},h=l||o.region(u),p=a,d;if(p.tagName)c=o.region(p);else{if(!e.Lang.isObject(a))return!1;c=a}return f?h[i]>=c[i]&&h[n]<=c[n]&&h[t]>=c[t]&&h[r]<=c[r]:(d=s(c,h),d[r]>=d[t]&&d[n]>=d[i]?!0:!1)},inViewportRegion:function(e,t,n){return o.inRegion(e,o.viewportRegion(e),t,n)},_getRegion:function(e,s,o,u){var a={};return a[t]=a[1]=e,a[i]=a[0]=u,a[r]=o,a[n]=s,a.width=a[n]-a[i],a.height=a[r]-a[t],a},viewportRegion:function(t){t=t||e.config.doc.documentElement;var n=!1,r,i;return t&&(r=o.docScrollX(t),i=o.docScrollY(t),n=o._getRegion(i,o.winWidth(t)+r,i+o.winHeight(t),r)),n}})}(e)},"3.16.0",{requires:["dom-base","dom-style"]});
YUI.add("node-screen",function(e,t){e.each(["winWidth","winHeight","docWidth","docHeight","docScrollX","docScrollY"],function(t){e.Node.ATTRS[t]={getter:function(){var n=Array.prototype.slice.call(arguments);return n.unshift(e.Node.getDOMNode(this)),e.DOM[t].apply(this,n)}}}),e.Node.ATTRS.scrollLeft={getter:function(){var t=e.Node.getDOMNode(this);return"scrollLeft"in t?t.scrollLeft:e.DOM.docScrollX(t)},setter:function(t){var n=e.Node.getDOMNode(this);n&&("scrollLeft"in n?n.scrollLeft=t:(n.document||n.nodeType===9)&&e.DOM._getWin(n).scrollTo(t,e.DOM.docScrollY(n)))}},e.Node.ATTRS.scrollTop={getter:function(){var t=e.Node.getDOMNode(this);return"scrollTop"in t?t.scrollTop:e.DOM.docScrollY(t)},setter:function(t){var n=e.Node.getDOMNode(this);n&&("scrollTop"in n?n.scrollTop=t:(n.document||n.nodeType===9)&&e.DOM._getWin(n).scrollTo(e.DOM.docScrollX(n),t))}},e.Node.importMethod(e.DOM,["getXY","setXY","getX","setX","getY","setY","swapXY"]),e.Node.ATTRS.region={getter:function(){var t=this.getDOMNode(),n;return t&&!t.tagName&&t.nodeType===9&&(t=t.documentElement),e.DOM.isWindow(t)?n=e.DOM.viewportRegion(t):n=e.DOM.region(t),n}},e.Node.ATTRS.viewportRegion={getter:function(){return e.DOM.viewportRegion(e.Node.getDOMNode(this))}},e.Node.importMethod(e.DOM,"inViewportRegion"),e.Node.prototype.intersect=function(t,n){var r=e.Node.getDOMNode(this);return e.instanceOf(t,e.Node)&&(t=e.Node.getDOMNode(t)),e.DOM.intersect(r,t,n)},e.Node.prototype.inRegion=function(t,n,r){var i=e.Node.getDOMNode(this);return e.instanceOf(t,e.Node)&&(t=e.Node.getDOMNode(t)),e.DOM.inRegion(i,t,n,r)}},"3.16.0",{requires:["dom-screen","node-base"]});
YUI.add("node-style",function(e,t){(function(e){e.mix(e.Node.prototype,{setStyle:function(t,n){return e.DOM.setStyle(this._node,t,n),this},setStyles:function(t){return e.DOM.setStyles(this._node,t),this},getStyle:function(t){return e.DOM.getStyle(this._node,t)},getComputedStyle:function(t){return e.DOM.getComputedStyle(this._node,t)}}),e.NodeList.importMethod(e.Node.prototype,["getStyle","getComputedStyle","setStyle","setStyles"])})(e);var n=e.Node;e.mix(n.prototype,{show:function(e){return e=arguments[arguments.length-1],this.toggleView(!0,e),this},_show:function(){this.removeAttribute("hidden"),this.setStyle("display","")},_isHidden:function(){return this.hasAttribute("hidden")||e.DOM.getComputedStyle(this._node,"display")==="none"},toggleView:function(e,t){return this._toggleView.apply(this,arguments),this},_toggleView:function(e,t){return t=arguments[arguments.length-1],typeof e!="boolean"&&(e=this._isHidden()?1:0),e?this._show():this._hide(),typeof t=="function"&&t.call(this),this},hide:function(e){return e=arguments[arguments.length-1],this.toggleView(!1,e),this},_hide:function(){this.setAttribute("hidden","hidden"),this.setStyle("display","none")}}),e.NodeList.importMethod(e.Node.prototype,["show","hide","toggleView"])},"3.16.0",{requires:["dom-style","node-base"]});
YUI.add("loader-bar",(function(e){let t,n,o=null,i=!1,a=0,l=a;function d(){o||(o=e.Node.create('<div class="loader-bar">'),e.one(".global-nav-content").append(o)),i=!0,(function(){let t=e.one("html").getAttribute("class").match(/is-([-\w]+)-day/);t&&t.length>1&&o.addClass(t[1]+"-day-background")})(),r(100*Math.random(),!1),l=a,o.setStyles({display:"block",opacity:1,top:c()}),t=setInterval((function(){o.get("offsetWidth")>=e.config.win.innerWidth-5&&(o.setStyles({display:"none",opacity:0}),clearInterval(t),i=!1)}),100)}function r(t,n){n?a+=t:a=t,a<20&&(a=20),o.getDOMNode().style.setProperty("--loader-percent",a/e.config.win.innerWidth),o.setStyle("width",a+"px")}function c(){let t=0,n=e.one(".global-nav-shim");if(n){let e=n.getDOMNode().getBoundingClientRect();t=e.height+e.top}return t+"px"}e.on("loader:start",(function(){i||(clearTimeout(n),n=setTimeout(d,60))})),e.on("loader:progress",(function(){i&&r(Math.round(e.config.win.innerWidth*Math.random()/2),!0)})),e.on("loader:beforeActiveViewChange",(function(){let t=e.one(".loader-bar");t&&(l=t.getDOMNode().getBoundingClientRect().width,e.one("body").append(t))})),e.on("loader:finish",(function(){clearTimeout(n),i&&(!(function(){let t=e.one(".loader-bar"),n=e.one(".global-nav-content");t&&n&&(r(l,!1),n.append(t));if(n){let e=n.getDOMNode().getBoundingClientRect();o.setStyles({top:e.height+e.top+"px"})}})(),setTimeout((()=>{r(e.config.win.innerWidth,!1)}),0))}))}),"@VERSION@",{requires:["node","dom"]});YUI.add("event-mousewheel",function(e,t){var n="DOMMouseScroll",r=function(t){var r=e.Array(t,0,!0),i;return e.UA.gecko?(r[0]=n,i=e.config.win):i=e.config.doc,r.length<3?r[2]=i:r.splice(2,0,i),r};e.Env.evt.plugins.mousewheel={on:function(){return e.Event._attach(r(arguments))},detach:function(){return e.Event.detach.apply(e.Event,r(arguments))}}},"3.16.0",{requires:["node-base"]});
YUI.add("event-mouseenter",function(e,t){var n=e.Env.evt.dom_wrappers,r=e.DOM.contains,i=e.Array,s=function(){},o={proxyType:"mouseover",relProperty:"fromElement",_notify:function(t,i,s){var o=this._node,u=t.relatedTarget||t[i];o!==u&&!r(o,u)&&s.fire(new e.DOMEventFacade(t,o,n["event:"+e.stamp(o)+t.type]))},on:function(t,n,r){var i=e.Node.getDOMNode(t),s=[this.proxyType,this._notify,i,null,this.relProperty,r];n.handle=e.Event._attach(s,{facade:!1})},detach:function(e,t){t.handle.detach()},delegate:function(t,n,r,i){var o=e.Node.getDOMNode(t),u=[this.proxyType,s,o,null,r];n.handle=e.Event._attach(u,{facade:!1}),n.handle.sub.filter=i,n.handle.sub.relProperty=this.relProperty,n.handle.sub._notify=this._filterNotify},_filterNotify:function(t,n,s){n=n.slice(),this.args&&n.push.apply(n,this.args);var o=e.delegate._applyFilter(this.filter,n,s),u=n[0].relatedTarget||n[0][this.relProperty],a,f,l,c,h;if(o){o=i(o);for(f=0,l=o.length&&(!a||!a.stopped);f<l;++f){h=o[0];if(!r(h,u)){a||(a=new e.DOMEventFacade(n[0],h,s),a.container=e.one(s.el)),a.currentTarget=e.one(h),c=n[1].fire(a);if(c===!1)break}}}return c},detachDelegate:function(e,t){t.handle.detach()}};e.Event.define("mouseenter",o,!0),e.Event.define("mouseleave",e.merge(o,{proxyType:"mouseout",relProperty:"toElement"}),!0)},"3.16.0",{requires:["event-synthetic"]});
YUI.add("event-key",function(e,t){var n="+alt",r="+ctrl",i="+meta",s="+shift",o=e.Lang.trim,u={KEY_MAP:{enter:13,space:32,esc:27,backspace:8,tab:9,pageup:33,pagedown:34},_typeRE:/^(up|down|press):/,_keysRE:/^(?:up|down|press):|\+(alt|ctrl|meta|shift)/g,processArgs:function(t){var n=t.splice(3,1)[0],r=e.Array.hash(n.match(/\+(?:alt|ctrl|meta|shift)\b/g)||[]),i={type:this._typeRE.test(n)?RegExp.$1:null,mods:r,keys:null},s=n.replace(this._keysRE,""),u,a,f,l;if(s){s=s.split(","),i.keys={};for(l=s.length-1;l>=0;--l){u=o(s[l]);if(!u)continue;+u==u?i.keys[u]=r:(f=u.toLowerCase(),this.KEY_MAP[f]?(i.keys[this.KEY_MAP[f]]=r,i.type||(i.type="down")):(u=u.charAt(0),a=u.toUpperCase(),r["+shift"]&&(u=a),i.keys[u.charCodeAt(0)]=u===a?e.merge(r,{"+shift":!0}):r))}}return i.type||(i.type="press"),i},on:function(e,t,o,u){var a=t._extra,f="key"+a.type,l=a.keys,c=u?"delegate":"on";t._detach=e[c](f,function(e){var t=l?l[e.which]:a.mods;t&&(!t[n]||t[n]&&e.altKey)&&(!t[r]||t[r]&&e.ctrlKey)&&(!t[i]||t[i]&&e.metaKey)&&(!t[s]||t[s]&&e.shiftKey)&&o.fire(e)},u)},detach:function(e,t,n){t._detach.detach()}};u.delegate=u.on,u.detachDelegate=u.detach,e.Event.define("key",u,!0)},"3.16.0",{requires:["event-synthetic"]});
