YUI.add("clipboard",(function(t,e){
/*!
 * clipboard.js v2.0.11
 * https://clipboardjs.com/
 *
 * Licensed MIT Â© Zeno Rocha
 */
var n,r;n=this,r=function(){return(function(){var t={686:function(t,e,n){"use strict";n.d(e,{default:function(){return x}});var r=n(279),o=n.n(r),i=n(370),u=n.n(i),c=n(817),a=n.n(c);function f(t){try{return document.execCommand(t)}catch(t){return!1}}var l=function(t){var e=a()(t);return f("cut"),e},s=function(t,e){var n=(function(t){var e="rtl"===document.documentElement.getAttribute("dir"),n=document.createElement("textarea");n.style.fontSize="12pt",n.style.border="0",n.style.padding="0",n.style.margin="0",n.style.position="absolute",n.style[e?"right":"left"]="-9999px";var r=window.pageYOffset||document.documentElement.scrollTop;return n.style.top="".concat(r,"px"),n.setAttribute("readonly",""),n.value=t,n})(t);e.container.appendChild(n);var r=a()(n);return f("copy"),n.remove(),r},d=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{container:document.body},n="";return"string"==typeof t?n=s(t,e):t instanceof HTMLInputElement&&!["text","search","url","tel","password"].includes(null==t?void 0:t.type)?n=s(t.value,e):(n=a()(t),f("copy")),n};function p(t){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p(t)}var y=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.action,n=void 0===e?"copy":e,r=t.container,o=t.target,i=t.text;if("copy"!==n&&"cut"!==n)throw new Error('Invalid "action" value, use either "copy" or "cut"');if(void 0!==o){if(!o||"object"!==p(o)||1!==o.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===n&&o.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===n&&(o.hasAttribute("readonly")||o.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes')}return i?d(i,{container:r}):o?"cut"===n?l(o):d(o,{container:r}):void 0};function v(t){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v(t)}function h(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function m(t,e){return m=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},m(t,e)}function b(t){var e=(function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}})();return function(){var n,r=S(t);if(e){var o=S(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g(this,n)}}function g(t,e){return!e||"object"!==v(e)&&"function"!=typeof e?(function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t})(t):e}function S(t){return S=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},S(t)}function E(t,e){var n="data-clipboard-".concat(t);if(e.hasAttribute(n))return e.getAttribute(n)}var w=(function(t){!(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&m(t,e)})(i,t);var e,n,r,o=b(i);function i(t,e){var n;return(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,i),(n=o.call(this)).resolveOptions(e),n.listenClick(t),n}return e=i,n=[{key:"resolveOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action="function"==typeof t.action?t.action:this.defaultAction,this.target="function"==typeof t.target?t.target:this.defaultTarget,this.text="function"==typeof t.text?t.text:this.defaultText,this.container="object"===v(t.container)?t.container:document.body}},{key:"listenClick",value:function(t){var e=this;this.listener=u()(t,"click",(function(t){return e.onClick(t)}))}},{key:"onClick",value:function(t){var e=t.delegateTarget||t.currentTarget,n=this.action(e)||"copy",r=y({action:n,container:this.container,target:this.target(e),text:this.text(e)});this.emit(r?"success":"error",{action:n,text:r,trigger:e,clearSelection:function(){e&&e.focus(),window.getSelection().removeAllRanges()}})}},{key:"defaultAction",value:function(t){return E("action",t)}},{key:"defaultTarget",value:function(t){var e=E("target",t);if(e)return document.querySelector(e)}},{key:"defaultText",value:function(t){return E("text",t)}},{key:"destroy",value:function(){this.listener.destroy()}}],r=[{key:"copy",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{container:document.body};return d(t,e)}},{key:"cut",value:function(t){return l(t)}},{key:"isSupported",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["copy","cut"],e="string"==typeof t?[t]:t,n=!!document.queryCommandSupported;return e.forEach((function(t){n=n&&!!document.queryCommandSupported(t)})),n}}],n&&h(e.prototype,n),r&&h(e,r),i})(o()),x=w},828:function(t){if("undefined"!=typeof Element&&!Element.prototype.matches){var e=Element.prototype;e.matches=e.matchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector}t.exports=function(t,e){for(;t&&9!==t.nodeType;){if("function"==typeof t.matches&&t.matches(e))return t;t=t.parentNode}}},438:function(t,e,n){var r=n(828);function o(t,e,n,r,o){var u=i.apply(this,arguments);return t.addEventListener(n,u,o),{destroy:function(){t.removeEventListener(n,u,o)}}}function i(t,e,n,o){return function(n){n.delegateTarget=r(n.target,e),n.delegateTarget&&o.call(t,n)}}t.exports=function(t,e,n,r,i){return"function"==typeof t.addEventListener?o.apply(null,arguments):"function"==typeof n?o.bind(null,document).apply(null,arguments):("string"==typeof t&&(t=document.querySelectorAll(t)),Array.prototype.map.call(t,(function(t){return o(t,e,n,r,i)})))}},879:function(t,e){e.node=function(t){return void 0!==t&&t instanceof HTMLElement&&1===t.nodeType},e.nodeList=function(t){var n=Object.prototype.toString.call(t);return void 0!==t&&("[object NodeList]"===n||"[object HTMLCollection]"===n)&&"length"in t&&(0===t.length||e.node(t[0]))},e.string=function(t){return"string"==typeof t||t instanceof String},e.fn=function(t){return"[object Function]"===Object.prototype.toString.call(t)}},370:function(t,e,n){var r=n(879),o=n(438);t.exports=function(t,e,n){if(!t&&!e&&!n)throw new Error("Missing required arguments");if(!r.string(e))throw new TypeError("Second argument must be a String");if(!r.fn(n))throw new TypeError("Third argument must be a Function");if(r.node(t))return(function(t,e,n){return t.addEventListener(e,n),{destroy:function(){t.removeEventListener(e,n)}}})(t,e,n);if(r.nodeList(t))return(function(t,e,n){return Array.prototype.forEach.call(t,(function(t){t.addEventListener(e,n)})),{destroy:function(){Array.prototype.forEach.call(t,(function(t){t.removeEventListener(e,n)}))}}})(t,e,n);if(r.string(t))return(function(t,e,n){return o(document.body,t,e,n)})(t,e,n);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}},817:function(t){t.exports=function(t){var e;if("SELECT"===t.nodeName)t.focus(),e=t.value;else if("INPUT"===t.nodeName||"TEXTAREA"===t.nodeName){var n=t.hasAttribute("readonly");n||t.setAttribute("readonly",""),t.select(),t.setSelectionRange(0,t.value.length),n||t.removeAttribute("readonly"),e=t.value}else{t.hasAttribute("contenteditable")&&t.focus();var r=window.getSelection(),o=document.createRange();o.selectNodeContents(t),r.removeAllRanges(),r.addRange(o),e=r.toString()}return e}},279:function(t){function e(){}e.prototype={on:function(t,e,n){var r=this.e||(this.e={});return(r[t]||(r[t]=[])).push({fn:e,ctx:n}),this},once:function(t,e,n){var r=this;function o(){r.off(t,o),e.apply(n,arguments)}return o._=e,this.on(t,o,n)},emit:function(t){for(var e=[].slice.call(arguments,1),n=((this.e||(this.e={}))[t]||[]).slice(),r=0,o=n.length;r<o;r++)n[r].fn.apply(n[r].ctx,e);return this},off:function(t,e){var n=this.e||(this.e={}),r=n[t],o=[];if(r&&e)for(var i=0,u=r.length;i<u;i++)r[i].fn!==e&&r[i].fn._!==e&&o.push(r[i]);return o.length?n[t]=o:delete n[t],this}},t.exports=e,t.exports.TinyEmitter=e}},e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={exports:{}};return t[r](o,o.exports,n),o.exports}return n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,{a:e}),e},n.d=function(t,e){for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n(686)})().default},"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof exports?exports.ClipboardJS=r():n.ClipboardJS=r(),t.Clipboard=this.ClipboardJS}),"@VERSION@",{affinity:"client"});YUI.add("hermes-template-photo-license",(function(n,e){var l=n.Template.Handlebars.revive({1:function(n,e,l,t,o){return'\t\t\t<svg class="icon icon-copyright"><use xlink:href="#icon-copyright"></use></svg>\n'},3:function(n,e,l,t,o){var r,i=n.lookupProperty||function(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]};return null!=(r=i(l,"if").call(null!=e?e:n.nullContext||{},null!=e?i(e,"licenseIsUSGW"):e,{name:"if",hash:{},fn:n.program(4,o,0),inverse:n.program(6,o,0),data:o,loc:{start:{line:7,column:2},end:{line:21,column:2}}}))?r:""},4:function(n,e,l,t,o){return'\t\t\t<svg class="icon icon-govt"><use xlink:href="#icon-govt"></use></svg>\n'},6:function(n,e,l,t,o){var r,i=n.lookupProperty||function(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]};return null!=(r=i(l,"if").call(null!=e?e:n.nullContext||{},null!=e?i(e,"licenseIsNKCR"):e,{name:"if",hash:{},fn:n.program(7,o,0),inverse:n.program(9,o,0),data:o,loc:{start:{line:9,column:2},end:{line:21,column:2}}}))?r:""},7:function(n,e,l,t,o){return'\t\t\t<svg class="icon icon-govt_green"><use xlink:href="#icon-govt_green"></use></svg>\n'},9:function(n,e,l,t,o){var r,i=n.lookupProperty||function(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]};return null!=(r=i(l,"if").call(null!=e?e:n.nullContext||{},null!=e?i(e,"licenseIsCC0"):e,{name:"if",hash:{},fn:n.program(10,o,0),inverse:n.program(12,o,0),data:o,loc:{start:{line:11,column:2},end:{line:21,column:2}}}))?r:""},10:function(n,e,l,t,o){return'\t\t\t<svg class="icon icon-copyright_zero"><use xlink:href="#icon-copyright_zero"></use></svg>\n'},12:function(n,e,l,t,o){var r,i=n.lookupProperty||function(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]};return null!=(r=i(l,"if").call(null!=e?e:n.nullContext||{},null!=e?i(e,"licenseIsPDW"):e,{name:"if",hash:{},fn:n.program(13,o,0),inverse:n.program(15,o,0),data:o,loc:{start:{line:13,column:2},end:{line:21,column:2}}}))?r:""},13:function(n,e,l,t,o){return'\t\t\t<svg class="icon icon-no_pub_domain"><use xlink:href="#icon-no_pub_domain"></use></svg>\n'},15:function(n,e,l,t,o){var r,i=n.lookupProperty||function(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]};return null!=(r=i(l,"if").call(null!=e?e:n.nullContext||{},null!=e?i(e,"licenseIsCreativeCommons"):e,{name:"if",hash:{},fn:n.program(16,o,0),inverse:n.noop,data:o,loc:{start:{line:15,column:2},end:{line:21,column:2}}}))?r:""},16:function(n,e,l,t,o){var r,i=null!=e?e:n.nullContext||{},s=n.lookupProperty||function(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]};return'\t\t\t<svg class="icon icon-attribution"><use xlink:href="#icon-attribution"></use></svg>\n\n\t\t\t'+(null!=(r=s(l,"if").call(i,null!=e?s(e,"licenseIsNonComm"):e,{name:"if",hash:{},fn:n.program(17,o,0),inverse:n.noop,data:o,loc:{start:{line:18,column:3},end:{line:18,column:111}}}))?r:"")+"\n\t\t\t"+(null!=(r=s(l,"if").call(i,null!=e?s(e,"licenseIsShareAlike"):e,{name:"if",hash:{},fn:n.program(19,o,0),inverse:n.noop,data:o,loc:{start:{line:19,column:3},end:{line:19,column:118}}}))?r:"")+"\n\t\t\t"+(null!=(r=s(l,"if").call(i,null!=e?s(e,"licenseIsNoDerivs"):e,{name:"if",hash:{},fn:n.program(21,o,0),inverse:n.noop,data:o,loc:{start:{line:20,column:3},end:{line:20,column:112}}}))?r:"")+"\n\t\t"},17:function(n,e,l,t,o){return'<svg class="icon icon-non_comm"><use xlink:href="#icon-non_comm"></use></svg>'},19:function(n,e,l,t,o){return'<svg class="icon icon-sharealike"><use xlink:href="#icon-sharealike"></use></svg>'},21:function(n,e,l,t,o){return'<svg class="icon icon-no_deriv"><use xlink:href="#icon-no_deriv"></use></svg>'},23:function(n,e,l,t,o){var r,i=n.lookupProperty||function(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]};return'\t\t<div role="button" class="license-dropdown">\n\t\t\t<span class="license-dropdown-text">'+n.escapeExpression("function"==typeof(r=null!=(r=i(l,"licenseText")||(null!=e?i(e,"licenseText"):e))?r:n.hooks.helperMissing)?r.call(null!=e?e:n.nullContext||{},{name:"licenseText",hash:{},data:o,loc:{start:{line:26,column:39},end:{line:26,column:54}}}):r)+'</span>\n\t\t\t<span class="arrow">\n\t\t\t\t<svg class="icon icon-dropdown_arrow"><use xlink:href="#icon-dropdown_arrow"></use></svg>\n\t\t\t</span>\n\t\t</div>\n'},25:function(n,e,l,t,o){var r,i=null!=e?e:n.nullContext||{},s=n.hooks.helperMissing,a="function",c=n.escapeExpression,u=n.lookupProperty||function(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]};return'\t\t<a href="'+c(typeof(r=null!=(r=u(l,"licenseURL")||(null!=e?u(e,"licenseURL"):e))?r:s)===a?r.call(i,{name:"licenseURL",hash:{},data:o,loc:{start:{line:32,column:11},end:{line:32,column:25}}}):r)+'" class="license-text" rel="license noopener noreferrer" title="'+c(typeof(r=null!=(r=u(l,"licenseName")||(null!=e?u(e,"licenseName"):e))?r:s)===a?r.call(i,{name:"licenseName",hash:{},data:o,loc:{start:{line:32,column:89},end:{line:32,column:104}}}):r)+'" target="_newtab">\n\t\t\t'+c(typeof(r=null!=(r=u(l,"licenseText")||(null!=e?u(e,"licenseText"):e))?r:s)===a?r.call(i,{name:"licenseText",hash:{},data:o,loc:{start:{line:33,column:3},end:{line:33,column:18}}}):r)+"\n\t\t</a>\n"},27:function(n,e,l,t,o){var r,i=n.lookupProperty||function(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]};return'\t\t<div role="button" class="license-info">\n'+(null!=(r=i(l,"if").call(null!=e?e:n.nullContext||{},null!=e?i(e,"licenseIsEditable"):e,{name:"if",hash:{},fn:n.program(28,o,0),inverse:n.program(30,o,0),data:o,loc:{start:{line:39,column:2},end:{line:43,column:9}}}))?r:"")+"\t\t</div>\n"},28:function(n,e,l,t,o){return'\t\t\t<svg class="icon icon-info_hollow"><use xlink:href="#icon-info_hollow"></use></svg>\n'},30:function(n,e,l,t,o){return'\t\t\t<svg class="icon icon-help_hollow"><use xlink:href="#icon-help_hollow"></use></svg>\n'},compiler:[8,">= 4.3.0"],main:function(n,e,l,t,o){var r,i,s=null!=e?e:n.nullContext||{},a=n.hooks.helperMissing,c="function",u=n.escapeExpression,p=n.lookupProperty||function(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]};return'<div class="photo-license-info">\n\t<a href="'+u(typeof(i=null!=(i=p(l,"licenseURL")||(null!=e?p(e,"licenseURL"):e))?i:a)===c?i.call(s,{name:"licenseURL",hash:{},data:o,loc:{start:{line:2,column:10},end:{line:2,column:24}}}):i)+'" class="license-icons" rel="license noopener noreferrer" title="'+u(typeof(i=null!=(i=p(l,"licenseName")||(null!=e?p(e,"licenseName"):e))?i:a)===c?i.call(s,{name:"licenseName",hash:{},data:o,loc:{start:{line:2,column:89},end:{line:2,column:104}}}):i)+'" target="_newtab">\n\t\t<div class="saving-icon"></div>\n\n'+(null!=(r=p(l,"if").call(s,null!=e?p(e,"licenseIsARR"):e,{name:"if",hash:{},fn:n.program(1,o,0),inverse:n.program(3,o,0),data:o,loc:{start:{line:5,column:2},end:{line:21,column:9}}}))?r:"")+"\t</a>\n\n"+(null!=(r=p(l,"if").call(s,null!=e?p(e,"licenseIsEditable"):e,{name:"if",hash:{},fn:n.program(23,o,0),inverse:n.program(25,o,0),data:o,loc:{start:{line:24,column:1},end:{line:35,column:8}}}))?r:"")+"\n"+(null!=(r=(p(l,"isFlipped")||e&&p(e,"isFlipped")||a).call(s,"enable_cc4_licenses",{name:"isFlipped",hash:{},fn:n.program(27,o,0),inverse:n.noop,data:o,loc:{start:{line:37,column:1},end:{line:45,column:15}}}))?r:"")+" </div>\n"},useData:!0}),t={};n.Array.each([],(function(e){var l=n.Template.get("hermes/"+e);l&&(t[e]=l)})),n.Template.register("hermes/photo-license",(function(e,o){return(o=o||{}).partials=o.partials?n.merge(t,o.partials):t,l(e,o)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("hermes-template-creative-commons-license-info-modal",(function(e,n){var a=e.Template.Handlebars.revive({compiler:[8,">= 4.3.0"],main:function(e,n,a,l,t){var s=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return'<div class="creative-commons-license-info-modal">\n\t<div class="license-info-container">\n\t\t<p class="license-info">'+e.escapeExpression((s(a,"intlHTMLMessage")||n&&s(n,"intlHTMLMessage")||e.hooks.helperMissing).call(null!=n?n:e.nullContext||{},{name:"intlHTMLMessage",hash:{licenseChange:null!=n?s(n,"licenseChange"):n,defaultLearn:null!=n?s(n,"defaultLearn"):n,ccWeb:null!=n?s(n,"ccWeb"):n,intlName:"settings.CC_LICENSE_INFO_TEXT"},data:t,loc:{start:{line:3,column:26},end:{line:3,column:152}}}))+"</p>\n\t</div>\n</div>"},useData:!0}),l={};e.Array.each([],(function(n){var a=e.Template.get("hermes/"+n);a&&(l[n]=a)})),e.Template.register("hermes/creative-commons-license-info-modal",(function(n,t){return(t=t||{}).partials=t.partials?e.merge(l,t.partials):l,a(n,t)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("photo-license-view",(function(e,t){var i=require("hermes-core/flog")(t);e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(t){return this.photoId=t.photoId,this.context=e.clone(t.context,!0),""===this.get("container").get("innerHTML")&&this.setContainerHTML(""),this},loadState:function(){const t=this,i=[];return i.push(this.appContext.getModel("photo-models",this.photoId).then((function(e){return t.set("photo",e),e})).then((e=>this.appContext.getModel("license-models",e.getValue("license")).then((e=>{this.set("licenseModel",e)}))))),i.push(this.appContext.getModelRegistry("photo-license-history-models").then((e=>{t.set("licenseHistoryModelRegistry",e)}))),i.push(this.appContext.getModelRegistry("license-models").then((e=>{t.set("licenseModelRegistry",e)}))),e.Promise.all(i)},buildContainer:function(){var e=this.get("photo"),t=e.getValue("isOwner"),i=e.getValue("license"),n=this.get("licenseModel");return this.setContainerWithTemplate("photo-license",{license:i,licenseText:n.getValue(t?"intlDesc":"genericIntlDesc"),licenseName:n.getValue("intlDesc"),licenseURL:n.getValue("urlWithTranslations"),licenseIsEditable:t&&n.getValue("ownerCanChange"),licenseIsCreativeCommons:n.getValue("isCreativeCommons"),licenseIsNonComm:[1,2,3,14,15,16].includes(i),licenseIsShareAlike:[1,5,12,15].includes(i),licenseIsNoDerivs:[3,6,13,16].includes(i),licenseIsARR:0===i,licenseIsNKCR:7===i,licenseIsUSGW:8===i,licenseIsCC0:9===i,licenseIsPDW:10===i}),this},activate:function(){var t=this.get("container"),i=this.get("photo"),n=i.getValue("isOwner"),s=t.one(".license-dropdown"),o=t.one(".license-text"),l=t.one(".license-info");return n&&s?(this.registerEventHandler(s.on("mouseenter",this.preloadAvailableLicenses.bind(this))),this.registerEventHandler(s.on("click",this.createLicenseMenu.bind(this)))):o&&this.registerEventHandler(o.on("click",(()=>{e.Snowplough.sendStructuredEvent({category:"photopageinteractions",action:"viewerLicenseClick",label:i.getValue("license")},e.Snowplough.getPhotoContextFromModel(this.get("photo")))}))),this.appContext.flipper.isFlipped("enable_cc4_licenses")&&this.registerEventHandler(l.on("click",this.handleLicenseButtonClick.bind(this))),this},setLicense:function(e){var t=this,n=this.get("photo"),s=e.getValue("id"),o=n.getValue("license"),l=this.get("container").one(".photo-license-info"),a=this.get("licenseHistoryModelRegistry").exists(this.photoId)?this.get("licenseHistoryModelRegistry").proxy(this.photoId):void 0;l&&l.addClass("working"),n.setValue("license",s),n.remoteUpdate().then((e=>t.appContext.getModel("license-models",s).then((e=>{t.set("licenseModel",e)})))).then((e=>{this.set("getAvailableLicensesPromise",null),t.buildContainer(),t.activate(),a&&(a.remove(),this.get("licenseHistoryModelRegistry").load(this.photoId))})).catch((e=>{n.setValue("license",o),l&&l.removeClass("working"),this.onError(this.intlMessage({intlName:"photo-page-scrappy.LICENSE_ERROR"})),i.error({err:e})}))},preloadAvailableLicenses:function(){var e=this.get("photo"),t=this.appContext.callAPI("flickr.photos.licenses.getAvailable",{photo_id:e.getValue("id"),owner_id:e.getValue("owner").getValue("id")});return this.set("getAvailableLicensesPromise",t),t},createLicenseMenu:function(){var t=this,i=this.get("photo"),n=i?i.getValue("license"):"none",s=this.get("getAvailableLicensesPromise");s||(s=this.preloadAvailableLicenses()),s.then((i=>{var s=new e.Views.FluidDroparound({appContext:this.appContext,preferBottom:!0,popBeforePushOther:!0,anchorElement:this.get("container").one(".license-dropdown").one(".arrow"),menuItems:t.buildLicenseMenu(n,i.availableLicenses.license)});s.show(),this.registerEventHandler(s.on("selected",(function(e){if(e&&e.menuItem){let i=parseInt(e.menuItem.value);this.appContext.getModel("license-models",i).then((e=>t.setLicense(e)))}s.close()})))})),e.Snowplough.sendStructuredEvent({category:"photopageinteractions",action:"ownerLicenseClick",label:n},e.Snowplough.getPhotoContextFromModel(i))},buildLicenseMenu:function(e,t){let i=[],n=[],s=[],o=this.get("licenseModelRegistry").toJSON();return this.appContext.flipper.isFlipped("enable_cc4_licenses")?(n=[10,9,4,5,6,2,1,3,11,12,13,14,15,16,0,7,8],s=[0,1,2,3,4,5,6,11]):n=[0,7,8,10,9,4,5,6,2,1,3],n.forEach(((n,l)=>{t.find((e=>e.id===n))&&i.push({value:n,text:o[n].intlDesc,isSelected:n===e,hasDivider:s.includes(n)})})),i},handleLicenseButtonClick:function(e){this.get("photo").getValue("isOwner")?this.showLicenseInfoModal():this.showAttributionMenu(e.target)},showLicenseInfoModal:function(){new e.Views.FluidModal({appContext:this.appContext,subview:new e.Views["confirmation-dialog-view"]({appContext:this.appContext,title:this.intlMessage({intlName:"settings.CC_LICENSE_INFO_TITLE"}),htmlMessage:this.templates("creative-commons-license-info-modal")({ccWeb:"https://creativecommons.org/share-your-work/cclicenses/",defaultLearn:"https://www.flickrhelp.com/hc/en-us/articles/4404078674324-Change-Your-Photo-s-License-in-Flickr",licenseChange:"/account/prefs/license/"}),showCancelButton:!1}),hasSubviewConfigRefactor:!0}).show()},showAttributionMenu:function(t){var i=new e.Views["license-attribution-view"]({appContext:this.appContext,photo:this.get("photo"),license:this.get("licenseModel")});new e.Views.FluidDroparound({appContext:this.appContext,anchorElement:t,subview:i,autoSizeToContent:!0,preferBottom:!0,popBeforePushOther:!0,showDropArrow:!0,observePageResize:!0,anchorOffsetVertical:0,contentPadding:0,dismissOnOverlayClick:!0,closeOnResize:!0}).show()}})}),"@VERSION@",{requires:["flickr-view","license-attribution-view","hermes-template-photo-license","hermes-template-creative-commons-license-info-modal"],optionalRequires:["hermes-core"],langBundles:["common","photo-page-scrappy","settings"]});YUI.add("hermes-lang-settings",(function(e,t){e.Intl.add("hermes/settings","en-US",{SAFE:[{type:0,value:"Safe"}],MODERATE:[{type:0,value:"Moderate"}],RESTRICTED:[{type:0,value:"Restricted"}],PUBLIC:[{type:0,value:"Public"}],PRIVATE:[{type:0,value:"Private"}],ANYONE:[{type:0,value:"Anyone"}],FRIENDS:[{type:0,value:"Friends"}],FAMILY:[{type:0,value:"Family"}],FRIENDS_AND_FAMILY:[{type:0,value:"Friends & Family"}],ONLY_YOU:[{type:0,value:"Only you"}],PEOPLE_YOU_FOLLOW:[{type:0,value:"People you follow"}],ANY_FLICKR_MEMBER:[{type:0,value:"Any Flickr member"}],SOME_RIGHTS_RESERVED:[{type:0,value:"Some rights reserved"}],ALL_RIGHTS_RESERVED:[{type:0,value:"All rights reserved"}],ATTRIBUTION:[{type:0,value:"Attribution"}],ATTRIBUTION_SHAREALIKE:[{type:0,value:"Attribution-ShareAlike"}],ATTRIBUTION_NODERIVS:[{type:0,value:"Attribution-NoDerivs"}],ATTRIBUTION_NONCOMMERCIAL:[{type:0,value:"Attribution-NonCommercial"}],ATTRIBUTION_NONCOMMERCIAL_SHAREALIKE:[{type:0,value:"Attribution-NonCommercial-ShareAlike"}],ATTRIBUTION_NONCOMMERCIAL_NODERIVS:[{type:0,value:"Attribution-NonCommercial-NoDerivs"}],NO_COPYRIGHT_RESTRICTIONS:[{type:0,value:"No known copyright restrictions"}],US_GOV_WORK:[{type:0,value:"United States government work"}],PUBLIC_DOMAIN_DEDICATION:[{type:0,value:"Public Domain Dedication (CC0)"}],PUBLIC_DOMAIN_WORK:[{type:0,value:"Public Domain Work"}],PRIVATE_PENDING_VIDEO:[{type:0,value:"Private while being processed"}],PRIVATE_FAILED_VIDEO:[{type:0,value:"Private because we couldnât process this video"}],RESTRICTED_PHOTOS_ONLY:[{type:0,value:"Restricted â Photos only"}],SAFETY_LEVELS:[{type:0,value:"Safety levels"}],SAFE_DESC:[{type:0,value:"Acceptable to a global, public audience."}],MODERATE_DESC:[{type:0,value:"Partial nudity, like bare breasts and bottoms. This would include areolas, nipples, thongs, nipple covers/pasties, or see-through clothing of this nature."}],RESTRICTED_DESC:[{type:0,value:"Full-frontal nudity and sexual acts. This would include genitalia, pubic hair, full-frontal nudity, imagery depicting/insinuating sexual activity, gore, graphic violence, and adult themes. Videos cannot contain restricted content and are deleted if reported."}],CC_LICENSE_INFO_TITLE:[{type:0,value:"How to use Creative Commons licenses"}],CC_LICENSE_INFO_TEXT:[{type:0,value:"<p>Here on Flickr, you're in full control over the content licensing on your account.</p><p>Flickr supports the most updated, recommended Creative Commons license types. Creative Commons licenses (CC) allow you to retain control over your images and give you more choices as to how they can be used. For more information on the different types of Creative Commons licenses, <a href=\""},{type:1,value:"ccWeb"},{type:0,value:'" target="_blank">visit the Creative Commons website.</a></p><p>You can also learn how to <a href="'},{type:1,value:"defaultLearn"},{type:0,value:'" target="_blank">set a default license</a> for your future uploads, and how to <a href="'},{type:1,value:"licenseChange"},{type:0,value:'" target="_blank">change the license on your existing content.</a></p>'}]})}),"@VERSION@",{requires:["intl"]});YUI.add("hermes-template-getty-widget",(function(l,n){var t=l.Template.Handlebars.revive({1:function(l,n,t,e,a,o,i){var r,u=l.lookupProperty||function(l,n){if(Object.prototype.hasOwnProperty.call(l,n))return l[n]};return null!=(r=u(t,"if").call(null!=n?n:l.nullContext||{},null!=n?u(n,"apiFailed"):n,{name:"if",hash:{},fn:l.noop,inverse:l.program(2,a,0,o,i),data:a,loc:{start:{line:2,column:0},end:{line:36,column:7}}}))?r:""},2:function(l,n,t,e,a,o,i){var r,u,c=null!=n?n:l.nullContext||{},s=l.hooks.helperMissing,p="function",d=l.escapeExpression,m=l.lambda,h=l.lookupProperty||function(l,n){if(Object.prototype.hasOwnProperty.call(l,n))return l[n]};return'<div class="main getty-'+d(typeof(u=null!=(u=h(t,"typeClass")||(null!=n?h(n,"typeClass"):n))?u:s)===p?u.call(c,{name:"typeClass",hash:{},data:a,loc:{start:{line:3,column:23},end:{line:3,column:36}}}):u)+"-widget"+(null!=(r=h(t,"if").call(c,null!=n?h(n,"shouldSeeSidebar"):n,{name:"if",hash:{},fn:l.program(3,a,0,o,i),inverse:l.noop,data:a,loc:{start:{line:3,column:43},end:{line:3,column:93}}}))?r:"")+'" style="width: '+d(m(null!=(r=null!=n?h(n,"layout"):n)?h(r,"containerWidth"):r,n))+'px;">\n\t<div class="sponsor-title-container">\n\t\t<p class="sponsor-title">'+d((h(t,"intlHTMLMessage")||n&&h(n,"intlHTMLMessage")||s).call(c,{name:"intlHTMLMessage",hash:{iStockLogo:null!=n?h(n,"iStockLogo"):n,assetRoot:null!=n?h(n,"assetRoot"):n,intlName:"common.SPONSORED_BY_ISTOCK"},data:a,loc:{start:{line:5,column:27},end:{line:5,column:126}}}))+'</p>\n\t\t<p class="sponsor-discount-code"><a href="'+d(typeof(u=null!=(u=h(t,"gettyPromoLink")||(null!=n?h(n,"gettyPromoLink"):n))?u:s)===p?u.call(c,{name:"gettyPromoLink",hash:{},data:a,loc:{start:{line:6,column:44},end:{line:6,column:62}}}):u)+'" target="_blank">'+d(typeof(u=null!=(u=h(t,"gettyFlickrDiscountCode")||(null!=n?h(n,"gettyFlickrDiscountCode"):n))?u:s)===p?u.call(c,{name:"gettyFlickrDiscountCode",hash:{},data:a,loc:{start:{line:6,column:80},end:{line:6,column:107}}}):u)+'</a></p>\n\t</div>\n\t<div class="getty-main-container" style="height: '+d(m(null!=(r=null!=n?h(n,"layout"):n)?h(r,"containerHeight"):r,n))+'px;" '+(null!=(r=h(t,"if").call(c,null!=n?h(n,"widgetID"):n,{name:"if",hash:{},fn:l.program(5,a,0,o,i),inverse:l.noop,data:a,loc:{start:{line:8,column:81},end:{line:8,column:134}}}))?r:"")+">\n"+(null!=(r=(h(t,"isFlipped")||n&&h(n,"isFlipped")||s).call(c,null!=n?h(n,"viewMoreFlipper"):n,{name:"isFlipped",hash:{},fn:l.program(7,a,0,o,i),inverse:l.program(13,a,0,o,i),data:a,loc:{start:{line:9,column:2},end:{line:30,column:16}}}))?r:"")+'\t</div>\n\t<div class="upgrade-pro-container">\n\t\t<p class="upgrade-to-pro-cta"><a href="'+d(typeof(u=null!=(u=h(t,"upgradeProLink")||(null!=n?h(n,"upgradeProLink"):n))?u:s)===p?u.call(c,{name:"upgradeProLink",hash:{},data:a,loc:{start:{line:33,column:41},end:{line:33,column:59}}}):u)+'">'+d((h(t,"intlMessage")||n&&h(n,"intlMessage")||s).call(c,{name:"intlMessage",hash:{intlName:"common.UPGRADE_PRO_HIDE_ADS"},data:a,loc:{start:{line:33,column:61},end:{line:33,column:115}}}))+"</a></p>\n\t</div>\n</div>\n"},3:function(l,n,t,e,a){return" photo-page-sidebar"},5:function(l,n,t,e,a){var o,i=l.lookupProperty||function(l,n){if(Object.prototype.hasOwnProperty.call(l,n))return l[n]};return'data-g-position="'+l.escapeExpression("function"==typeof(o=null!=(o=i(t,"widgetID")||(null!=n?i(n,"widgetID"):n))?o:l.hooks.helperMissing)?o.call(null!=n?n:l.nullContext||{},{name:"widgetID",hash:{},data:a,loc:{start:{line:8,column:114},end:{line:8,column:126}}}):o)+'"'},7:function(l,n,t,e,a,o,i){var r,u=l.lookupProperty||function(l,n){if(Object.prototype.hasOwnProperty.call(l,n))return l[n]};return null!=(r=u(t,"each").call(null!=n?n:l.nullContext||{},null!=(r=null!=n?u(n,"layout"):n)?u(r,"boxes"):r,{name:"each",hash:{},fn:l.program(8,a,0,o,i),inverse:l.noop,data:a,loc:{start:{line:10,column:3},end:{line:24,column:12}}}))?r:""},8:function(l,n,t,e,a,o,i){var r,u=l.lookupProperty||function(l,n){if(Object.prototype.hasOwnProperty.call(l,n))return l[n]};return null!=(r=u(t,"if").call(null!=n?n:l.nullContext||{},a&&u(a,"last"),{name:"if",hash:{},fn:l.program(9,a,0,o,i),inverse:l.program(11,a,0,o,i),data:a,loc:{start:{line:11,column:4},end:{line:23,column:11}}}))?r:""},9:function(l,n,t,e,a,o,i){var r,u=null!=n?n:l.nullContext||{},c=l.hooks.helperMissing,s="function",p=l.escapeExpression,d=l.lookupProperty||function(l,n){if(Object.prototype.hasOwnProperty.call(l,n))return l[n]};return'\t\t\t\t\t<div class="last-result-container" style="height:'+p(typeof(r=null!=(r=d(t,"height")||(null!=n?d(n,"height"):n))?r:c)===s?r.call(u,{name:"height",hash:{},data:a,loc:{start:{line:12,column:54},end:{line:12,column:64}}}):r)+"px; width:"+p(typeof(r=null!=(r=d(t,"width")||(null!=n?d(n,"width"):n))?r:c)===s?r.call(u,{name:"width",hash:{},data:a,loc:{start:{line:12,column:74},end:{line:12,column:83}}}):r)+"px; top: "+p(typeof(r=null!=(r=d(t,"top")||(null!=n?d(n,"top"):n))?r:c)===s?r.call(u,{name:"top",hash:{},data:a,loc:{start:{line:12,column:92},end:{line:12,column:99}}}):r)+"px; left: "+p(typeof(r=null!=(r=d(t,"left")||(null!=n?d(n,"left"):n))?r:c)===s?r.call(u,{name:"left",hash:{},data:a,loc:{start:{line:12,column:109},end:{line:12,column:117}}}):r)+'px;">\n\t\t\t\t\t\t<a href="'+p(typeof(r=null!=(r=d(t,"url")||(null!=n?d(n,"url"):n))?r:c)===s?r.call(u,{name:"url",hash:{},data:a,loc:{start:{line:13,column:15},end:{line:13,column:22}}}):r)+'" target="_blank" data-g-url="'+p(typeof(r=null!=(r=d(t,"gettyImageUrl")||(null!=n?d(n,"gettyImageUrl"):n))?r:c)===s?r.call(u,{name:"gettyImageUrl",hash:{},data:a,loc:{start:{line:13,column:52},end:{line:13,column:69}}}):r)+'" data-g-index="'+p(typeof(r=null!=(r=d(t,"index")||a&&d(a,"index"))?r:c)===s?r.call(u,{name:"index",hash:{},data:a,loc:{start:{line:13,column:85},end:{line:13,column:95}}}):r)+'" class="getty-result last-result" style="position: absolute; background-image: url(\''+p(typeof(r=null!=(r=d(t,"displayUri")||(null!=n?d(n,"displayUri"):n))?r:c)===s?r.call(u,{name:"displayUri",hash:{},data:a,loc:{start:{line:13,column:180},end:{line:13,column:194}}}):r)+'\');background-size: cover; background-position: center;" title="'+p(typeof(r=null!=(r=d(t,"caption")||(null!=n?d(n,"caption"):n))?r:c)===s?r.call(u,{name:"caption",hash:{},data:a,loc:{start:{line:13,column:258},end:{line:13,column:269}}}):r)+'">\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t<div class="view-more-overlay"></div>\n\t\t\t\t\t\t<a href="'+p(l.lambda(null!=i[1]?d(i[1],"viewMoreLink"):i[1],n))+'" target="_blank"  class="view-more-text">\n\t\t\t\t\t\t\t'+p((d(t,"intlMessage")||n&&d(n,"intlMessage")||c).call(u,{name:"intlMessage",hash:{intlName:"common.VIEW_MORE"},data:a,loc:{start:{line:17,column:7},end:{line:17,column:50}}}))+"\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n"},11:function(l,n,t,e,a){var o,i=null!=n?n:l.nullContext||{},r=l.hooks.helperMissing,u="function",c=l.escapeExpression,s=l.lookupProperty||function(l,n){if(Object.prototype.hasOwnProperty.call(l,n))return l[n]};return'\t\t\t\t\t<a href="'+c(typeof(o=null!=(o=s(t,"url")||(null!=n?s(n,"url"):n))?o:r)===u?o.call(i,{name:"url",hash:{},data:a,loc:{start:{line:21,column:14},end:{line:21,column:21}}}):o)+'" target="_blank" data-g-url="'+c(typeof(o=null!=(o=s(t,"gettyImageUrl")||(null!=n?s(n,"gettyImageUrl"):n))?o:r)===u?o.call(i,{name:"gettyImageUrl",hash:{},data:a,loc:{start:{line:21,column:51},end:{line:21,column:68}}}):o)+'" data-g-index="'+c(typeof(o=null!=(o=s(t,"index")||a&&s(a,"index"))?o:r)===u?o.call(i,{name:"index",hash:{},data:a,loc:{start:{line:21,column:84},end:{line:21,column:94}}}):o)+'" class="getty-result" style="position: absolute; display:block; background-image: url(\''+c(typeof(o=null!=(o=s(t,"displayUri")||(null!=n?s(n,"displayUri"):n))?o:r)===u?o.call(i,{name:"displayUri",hash:{},data:a,loc:{start:{line:21,column:182},end:{line:21,column:196}}}):o)+"');background-size: cover; background-position: center; height:"+c(typeof(o=null!=(o=s(t,"height")||(null!=n?s(n,"height"):n))?o:r)===u?o.call(i,{name:"height",hash:{},data:a,loc:{start:{line:21,column:259},end:{line:21,column:269}}}):o)+"px; width:"+c(typeof(o=null!=(o=s(t,"width")||(null!=n?s(n,"width"):n))?o:r)===u?o.call(i,{name:"width",hash:{},data:a,loc:{start:{line:21,column:279},end:{line:21,column:288}}}):o)+"px; top: "+c(typeof(o=null!=(o=s(t,"top")||(null!=n?s(n,"top"):n))?o:r)===u?o.call(i,{name:"top",hash:{},data:a,loc:{start:{line:21,column:297},end:{line:21,column:304}}}):o)+"px; left: "+c(typeof(o=null!=(o=s(t,"left")||(null!=n?s(n,"left"):n))?o:r)===u?o.call(i,{name:"left",hash:{},data:a,loc:{start:{line:21,column:314},end:{line:21,column:322}}}):o)+'px;" title="'+c(typeof(o=null!=(o=s(t,"caption")||(null!=n?s(n,"caption"):n))?o:r)===u?o.call(i,{name:"caption",hash:{},data:a,loc:{start:{line:21,column:334},end:{line:21,column:345}}}):o)+'">\n\t\t\t\t\t</a>\n'},13:function(l,n,t,e,a){var o,i=l.lookupProperty||function(l,n){if(Object.prototype.hasOwnProperty.call(l,n))return l[n]};return null!=(o=i(t,"each").call(null!=n?n:l.nullContext||{},null!=(o=null!=n?i(n,"layout"):n)?i(o,"boxes"):o,{name:"each",hash:{},fn:l.program(14,a,0),inverse:l.noop,data:a,loc:{start:{line:26,column:3},end:{line:29,column:12}}}))?o:""},14:function(l,n,t,e,a){var o,i=null!=n?n:l.nullContext||{},r=l.hooks.helperMissing,u="function",c=l.escapeExpression,s=l.lookupProperty||function(l,n){if(Object.prototype.hasOwnProperty.call(l,n))return l[n]};return'\t\t\t\t<a href="'+c(typeof(o=null!=(o=s(t,"url")||(null!=n?s(n,"url"):n))?o:r)===u?o.call(i,{name:"url",hash:{},data:a,loc:{start:{line:27,column:13},end:{line:27,column:20}}}):o)+'" target="_blank" data-g-url="'+c(typeof(o=null!=(o=s(t,"gettyImageUrl")||(null!=n?s(n,"gettyImageUrl"):n))?o:r)===u?o.call(i,{name:"gettyImageUrl",hash:{},data:a,loc:{start:{line:27,column:50},end:{line:27,column:67}}}):o)+'" data-g-index="'+c(typeof(o=null!=(o=s(t,"index")||a&&s(a,"index"))?o:r)===u?o.call(i,{name:"index",hash:{},data:a,loc:{start:{line:27,column:83},end:{line:27,column:93}}}):o)+'" class="getty-result" style="position: absolute; display:block; background-image: url(\''+c(typeof(o=null!=(o=s(t,"displayUri")||(null!=n?s(n,"displayUri"):n))?o:r)===u?o.call(i,{name:"displayUri",hash:{},data:a,loc:{start:{line:27,column:181},end:{line:27,column:195}}}):o)+"');background-size: cover; background-position: center; height:"+c(typeof(o=null!=(o=s(t,"height")||(null!=n?s(n,"height"):n))?o:r)===u?o.call(i,{name:"height",hash:{},data:a,loc:{start:{line:27,column:258},end:{line:27,column:268}}}):o)+"px; width:"+c(typeof(o=null!=(o=s(t,"width")||(null!=n?s(n,"width"):n))?o:r)===u?o.call(i,{name:"width",hash:{},data:a,loc:{start:{line:27,column:278},end:{line:27,column:287}}}):o)+"px; top: "+c(typeof(o=null!=(o=s(t,"top")||(null!=n?s(n,"top"):n))?o:r)===u?o.call(i,{name:"top",hash:{},data:a,loc:{start:{line:27,column:296},end:{line:27,column:303}}}):o)+"px; left: "+c(typeof(o=null!=(o=s(t,"left")||(null!=n?s(n,"left"):n))?o:r)===u?o.call(i,{name:"left",hash:{},data:a,loc:{start:{line:27,column:313},end:{line:27,column:321}}}):o)+'px;" title="'+c(typeof(o=null!=(o=s(t,"caption")||(null!=n?s(n,"caption"):n))?o:r)===u?o.call(i,{name:"caption",hash:{},data:a,loc:{start:{line:27,column:333},end:{line:27,column:344}}}):o)+'">\n\t\t\t\t</a>\n'},compiler:[8,">= 4.3.0"],main:function(l,n,t,e,a,o,i){var r,u,c,s=l.lookupProperty||function(l,n){if(Object.prototype.hasOwnProperty.call(l,n))return l[n]};return u=null!=(u=s(t,"nestAndChangeHtmlTags")||(null!=n?s(n,"nestAndChangeHtmlTags"):n))?u:l.hooks.helperMissing,c={name:"nestAndChangeHtmlTags",hash:{},fn:l.program(1,a,0,o,i),inverse:l.noop,data:a,loc:{start:{line:1,column:0},end:{line:37,column:26}}},r="function"==typeof u?u.call(null!=n?n:l.nullContext||{},c):u,s(t,"nestAndChangeHtmlTags")||(r=l.hooks.blockHelperMissing.call(n,r,c)),null!=r?r:""},useData:!0,useDepths:!0}),e={};l.Array.each([],(function(n){var t=l.Template.get("hermes/"+n);t&&(e[n]=t)})),l.Template.register("hermes/getty-widget",(function(n,a){return(a=a||{}).partials=a.partials?l.merge(e,a.partials):e,t(n,a)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("flickr-getty-search-fetcher",(function(e,r){"use strict";e.namespace("ModelFetchers")["flickr-getty-search"]={run:function(o,a){var t=this,s=this._processParams(o,a);return e.Promise.all([a.callAPI("flickr.getty.affiliate.search",s),a.getModelRegistry("getty-search-models")]).then((function(e){return t._processResponse(e,o,a)}),e.FetcherErrorLogger(r))},_processParams:function(e){var r={search_phrase:e.searchTerm,color:e.color,orientations:e.orientations,accept_language:e.language,gi_country_code:e.countryCode,page_size:e.pageSize};return e.photoId&&(r.photo_id=e.photoId),r},_processResponse:function(e,r){var o=e[0],a=e[1],t={id:r.photoId||r.searchTerm,images:o.images,searchTerm:r.searchTerm,color:r.color,orientations:r.orientations,language:r.language,countryCode:r.countryCode,photoId:r.photoId,searchPhrase:o.searchPhrase,pageSize:r.pageSize};return a.addOrUpdate(t),o}}}),"@VERSION@",{requires:["flickr-promise","api-helper"],optional:[]});YUI.add("getty-search-models",(function(e){function r(e){r.superclass.constructor.call(this,e)}e.Models[this.name]=r,e.extend(r,e.FlickrModelRegistry,{name:this.name,remote:{read:function(r){return e.ModelFetchers["flickr-getty-search"].run(r,this.appContext)}},attributes:{images:{},searchTerm:{},photoId:{},color:{},orientations:{},language:{},countryCode:{},searchPhrase:{},pageSize:{}}})}),"@VERSION@",{requires:["flickr-model-registry","flickr-promise","flickr-getty-search-fetcher"]});