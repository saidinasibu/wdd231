YUI.add("timezone-helper",(function(t){"use strict";t.TimezoneHelper=function(e,i,s){s?(this.tz=s,this.dst=!1):(this.tz=e.getViewer().prefs.timezonePref.offset,this.dst=e.getViewer().prefs.timezonePref.dst),this.momentObject=t.moment(i,"X"),this.momentObject.utcOffset(this.tz),this.dst&&this.momentObject.isDST()&&this.momentObject.add(1,"hour")},t.TimezoneHelper.prototype.toFormat=function(t){return this.momentObject.format(t)}}),"@VERSION@",{requires:["moment"]});YUI.add("subscriptions-helper",(function(e,t){"use strict";var n=require("hermes-core/flog")(t);e.SubscriptionsHelper=function(){this.FLICKR_PRO_3_MONTH_PLAN_ID=1,this.FLICKR_PRO_1_YEAR_PLAN_ID=2,this.FLICKR_PRO_2_YEARS_PLAN_ID=3,this.FLICKR_PRO_MONTHLY_PLAN_ID=7,this.FLICKR_PRO_ANNUAL_PLAN_ID=8,this.FLICKR_PRO_ANNUAL_TRIAL=9,this.FLICKR_PRO_OLD_ANNUAL_TRIAL=10,this.FLICKR_PRO_3_MONTH_V2_PLAN_ID=11,this.FLICKR_PRO_2_YEAR_V2_PLAN_ID=12,this.FLICKR_PRO_1_MONTH_V2_APPLE_ID=13,this.FLICKR_PRO_1_YEAR_V2_APPLE_ID=14,this.FLICKR_PRO_1_MONTH_V2_GOOGLE_ID=15,this.FLICKR_PRO_1_YEAR_V2_GOOGLE_ID=16,this.FLICKR_PRO_STRIPE_MONTHLY_PLAN_ID=17,this.FLICKR_PRO_STRIPE_ANNUAL_PLAN_ID=18,this.FLICKR_PRO_STRIPE_3_MONTH_PLAN_ID=19,this.FLICKR_PRO_STRIPE_2_YEAR_PLAN_ID=20,this.FLICKR_PRO_ANNUAL_PRICE=80.99,this.FLICKR_PRO_MONTHLY_PRICE=9.49,this.FLICKR_PRO_WEEK_PRICE=2.37,this.FLICKR_PRO_ANNUAL_PRICE_25=80.99,this.FLICKR_PRO_MONTHLY_PRICE_25=10.44,this.FLICKR_PRO_WEEK_PRICE_25=2.61,this.ADOBE_PARTNERSHIP_COUPON="FlickrAdobe25",this.BT_MIG_5_1_ANNUAL_COUPON="BTMIG5135A",this.BT_MIG_3_1_ANNUAL_COUPON="BTMIG3125A",this.BT_MIG_3_2_ANNUAL_COUPON="BTMIG3225A",this.BT_MIG_5_2_30_COUPON="BTMIG5230",this.BT_MIG_5_2_20_COUPON="BTMIG5220",this.UTM_PRO_BADGE="pro-badge",this.UTM_HIDE_ADS="hide-ads",this.UTM_UPSELL_LINK="upsell-link",this.UTM_GLOBAL_NAV="global-nav",this.UTM_HIDE_ADS_GETTY_SEARCH="hide-ads-getty",this.UTM_EXPLORED_BANNER_DISCOUNT="explored_segment_discount",this.UTM_CHURNED_BANNER_PRO="churned_pro_banner",this.UTM_PROPSCORE2_BANNER_PRO="propscore2_banner",this.UTM_SAFETY_UPSELL="safety-upsell",this.UTM_PHOTOLIST_UPSELL="photolist-upsell",this.UTM_SECOND_LIFE_BANNER_DISCOUNT="second-life-comm-upsell",this.UTM_PRO_AWARENESS_CAMPAIGN="pro-awareness-campaign",this.UTM_ABANDONED_CART_RECOVERY="abandoned-cart-recovery",this.UTM_FREE_USER_SAFE_SEARCH_CHANGE="free-user-safe-search-change",this.UTM_NSFW_INTERSTITIAL="nsfw-interstitial",this.UTM_ADS_KEEP_FLICKR="ads-keep-flickr",this.UTM_ACCOUNT_SUSPENSION="account-suspension-winback",this.UTM_FLICKR_BDAY_PROMO="flickr-bday-promo",this.subscriptionsIdByName={"pro-3month":this.FLICKR_PRO_3_MONTH_PLAN_ID,"pro-3month-v2":this.FLICKR_PRO_3_MONTH_V2_PLAN_ID,"pro-1year":this.FLICKR_PRO_1_YEAR_PLAN_ID,"pro-2year":this.FLICKR_PRO_2_YEARS_PLAN_ID,"pro-2year-v2":this.FLICKR_PRO_2_YEAR_V2_PLAN_ID,"pro-monthly":this.FLICKR_PRO_MONTHLY_PLAN_ID,"pro-annual":this.FLICKR_PRO_ANNUAL_PLAN_ID,"pro-trial":this.FLICKR_PRO_ANNUAL_TRIAL,"pro-2-year":this.FLICKR_PRO_STRIPE_2_YEAR_PLAN_ID},this.subscriptionsIdByNameOnStripe={"pro-3month":this.FLICKR_PRO_STRIPE_3_MONTH_PLAN_ID,"pro-3month-v2":this.FLICKR_PRO_STRIPE_3_MONTH_PLAN_ID,"pro-1year":this.FLICKR_PRO_STRIPE_ANNUAL_PLAN_ID,"pro-2year":this.FLICKR_PRO_STRIPE_ANNUAL_PLAN_ID,"pro-2year-v2":this.FLICKR_PRO_STRIPE_ANNUAL_PLAN_ID,"pro-monthly":this.FLICKR_PRO_STRIPE_MONTHLY_PLAN_ID,"pro-annual":this.FLICKR_PRO_STRIPE_ANNUAL_PLAN_ID,"pro-2-year":this.FLICKR_PRO_STRIPE_2_YEAR_PLAN_ID},this.subscriptionStatusMap={initiated:1,active:2,closed:3,canceled:4,failed:5,refunded:6,pending:7,subscription_canceled:8,subscription_charged_successfully:9,subscription_charged_unsuccessfully:10,subscription_expired:11,subscription_went_past_due:12,change_initiated:13,closed_pending:14},this.subscriptionsIdHasAnnualPerk={1:!1,2:!0,3:!0,4:!0,6:!1,7:!1,8:!0,9:!0,10:!0,11:!1,12:!0,13:!1,14:!0,15:!1,16:!0,17:!1,18:!0,19:!1,20:!0},this.cardTypeMap={1:"visa",2:"master-card",3:"discover",4:"american-express",5:"JCB"},this.paymentVendorMap={braintree:10,oldpaypal:20,digitalriver:30,apple:40,google:50,stripe:60},this.countriesArray=[{countryCode:"US",countryName:"United States"},{countryCode:"AF",countryName:"Afghanistan"},{countryCode:"AX",countryName:"Åland"},{countryCode:"AL",countryName:"Albania"},{countryCode:"DZ",countryName:"Algeria"},{countryCode:"AS",countryName:"American Samoa"},{countryCode:"AD",countryName:"Andorra"},{countryCode:"AO",countryName:"Angola"},{countryCode:"AI",countryName:"Anguilla"},{countryCode:"AQ",countryName:"Antarctica"},{countryCode:"AG",countryName:"Antigua and Barbuda"},{countryCode:"AR",countryName:"Argentina"},{countryCode:"AM",countryName:"Armenia"},{countryCode:"AW",countryName:"Aruba"},{countryCode:"AU",countryName:"Australia"},{countryCode:"AT",countryName:"Austria"},{countryCode:"AZ",countryName:"Azerbaijan"},{countryCode:"BS",countryName:"Bahamas"},{countryCode:"BH",countryName:"Bahrain"},{countryCode:"BD",countryName:"Bangladesh"},{countryCode:"BB",countryName:"Barbados"},{countryCode:"BE",countryName:"Belgium"},{countryCode:"BZ",countryName:"Belize"},{countryCode:"BJ",countryName:"Benin"},{countryCode:"BM",countryName:"Bermuda"},{countryCode:"BT",countryName:"Bhutan"},{countryCode:"BO",countryName:"Bolivia"},{countryCode:"BQ",countryName:"Bonaire, Sint Eustatius and Saba"},{countryCode:"BA",countryName:"Bosnia and Herzegovina"},{countryCode:"BW",countryName:"Botswana"},{countryCode:"BV",countryName:"Bouvet Island"},{countryCode:"BR",countryName:"Brazil"},{countryCode:"IO",countryName:"British Indian Ocean Territory"},{countryCode:"BN",countryName:"Brunei Darussalam"},{countryCode:"BG",countryName:"Bulgaria"},{countryCode:"BF",countryName:"Burkina Faso"},{countryCode:"BI",countryName:"Burundi"},{countryCode:"KH",countryName:"Cambodia"},{countryCode:"CM",countryName:"Cameroon"},{countryCode:"CA",countryName:"Canada"},{countryCode:"CV",countryName:"Cape Verde"},{countryCode:"KY",countryName:"Cayman Islands"},{countryCode:"CF",countryName:"Central African Republic"},{countryCode:"TD",countryName:"Chad"},{countryCode:"CL",countryName:"Chile"},{countryCode:"CN",countryName:"China"},{countryCode:"CX",countryName:"Christmas Island"},{countryCode:"CC",countryName:"Cocos (Keeling) Islands"},{countryCode:"CO",countryName:"Colombia"},{countryCode:"KM",countryName:"Comoros"},{countryCode:"CG",countryName:"Congo (Brazzaville)"},{countryCode:"CD",countryName:"Congo (Kinshasa)"},{countryCode:"CK",countryName:"Cook Islands"},{countryCode:"CR",countryName:"Costa Rica"},{countryCode:"CI",countryName:"Côte d'Ivoire"},{countryCode:"HR",countryName:"Croatia"},{countryCode:"CW",countryName:"Curaçao"},{countryCode:"CY",countryName:"Cyprus"},{countryCode:"CZ",countryName:"Czech Republic"},{countryCode:"DK",countryName:"Denmark"},{countryCode:"DJ",countryName:"Djibouti"},{countryCode:"DM",countryName:"Dominica"},{countryCode:"DO",countryName:"Dominican Republic"},{countryCode:"EC",countryName:"Ecuador"},{countryCode:"EG",countryName:"Egypt"},{countryCode:"SV",countryName:"El Salvador"},{countryCode:"GQ",countryName:"Equatorial Guinea"},{countryCode:"ER",countryName:"Eritrea"},{countryCode:"EE",countryName:"Estonia"},{countryCode:"ET",countryName:"Ethiopia"},{countryCode:"FK",countryName:"Falkland Islands"},{countryCode:"FO",countryName:"Faroe Islands"},{countryCode:"FJ",countryName:"Fiji"},{countryCode:"FI",countryName:"Finland"},{countryCode:"FR",countryName:"France"},{countryCode:"GF",countryName:"French Guiana"},{countryCode:"PF",countryName:"French Polynesia"},{countryCode:"TF",countryName:"French Southern Lands"},{countryCode:"GA",countryName:"Gabon"},{countryCode:"GM",countryName:"Gambia"},{countryCode:"GE",countryName:"Georgia"},{countryCode:"DE",countryName:"Germany"},{countryCode:"GH",countryName:"Ghana"},{countryCode:"GI",countryName:"Gibraltar"},{countryCode:"GR",countryName:"Greece"},{countryCode:"GL",countryName:"Greenland"},{countryCode:"GD",countryName:"Grenada"},{countryCode:"GP",countryName:"Guadeloupe"},{countryCode:"GU",countryName:"Guam"},{countryCode:"GT",countryName:"Guatemala"},{countryCode:"GG",countryName:"Guernsey"},{countryCode:"GN",countryName:"Guinea"},{countryCode:"GW",countryName:"Guinea-Bissau"},{countryCode:"GY",countryName:"Guyana"},{countryCode:"HT",countryName:"Haiti"},{countryCode:"HM",countryName:"Heard and McDonald Islands"},{countryCode:"HN",countryName:"Honduras"},{countryCode:"HK",countryName:"Hong Kong"},{countryCode:"HU",countryName:"Hungary"},{countryCode:"IS",countryName:"Iceland"},{countryCode:"IN",countryName:"India"},{countryCode:"ID",countryName:"Indonesia"},{countryCode:"IE",countryName:"Ireland"},{countryCode:"IM",countryName:"Isle of Man"},{countryCode:"IL",countryName:"Israel"},{countryCode:"IT",countryName:"Italy"},{countryCode:"JM",countryName:"Jamaica"},{countryCode:"JP",countryName:"Japan"},{countryCode:"JE",countryName:"Jersey"},{countryCode:"JO",countryName:"Jordan"},{countryCode:"KZ",countryName:"Kazakhstan"},{countryCode:"KE",countryName:"Kenya"},{countryCode:"KI",countryName:"Kiribati"},{countryCode:"KR",countryName:"Korea, South"},{countryCode:"KW",countryName:"Kuwait"},{countryCode:"KG",countryName:"Kyrgyzstan"},{countryCode:"LA",countryName:"Laos"},{countryCode:"LV",countryName:"Latvia"},{countryCode:"LB",countryName:"Lebanon"},{countryCode:"LS",countryName:"Lesotho"},{countryCode:"LR",countryName:"Liberia"},{countryCode:"LY",countryName:"Libya"},{countryCode:"LI",countryName:"Liechtenstein"},{countryCode:"LT",countryName:"Lithuania"},{countryCode:"LU",countryName:"Luxembourg"},{countryCode:"MO",countryName:"Macau"},{countryCode:"MK",countryName:"Macedonia"},{countryCode:"MG",countryName:"Madagascar"},{countryCode:"MW",countryName:"Malawi"},{countryCode:"MY",countryName:"Malaysia"},{countryCode:"MV",countryName:"Maldives"},{countryCode:"ML",countryName:"Mali"},{countryCode:"MT",countryName:"Malta"},{countryCode:"MH",countryName:"Marshall Islands"},{countryCode:"MQ",countryName:"Martinique"},{countryCode:"MR",countryName:"Mauritania"},{countryCode:"MU",countryName:"Mauritius"},{countryCode:"YT",countryName:"Mayotte"},{countryCode:"MX",countryName:"Mexico"},{countryCode:"FM",countryName:"Micronesia"},{countryCode:"MD",countryName:"Moldova"},{countryCode:"MC",countryName:"Monaco"},{countryCode:"MN",countryName:"Mongolia"},{countryCode:"ME",countryName:"Montenegro"},{countryCode:"MS",countryName:"Montserrat"},{countryCode:"MA",countryName:"Morocco"},{countryCode:"MZ",countryName:"Mozambique"},{countryCode:"MM",countryName:"Myanmar"},{countryCode:"NA",countryName:"Namibia"},{countryCode:"NR",countryName:"Nauru"},{countryCode:"NP",countryName:"Nepal"},{countryCode:"NL",countryName:"Netherlands"},{countryCode:"AN",countryName:"Netherlands Antilles"},{countryCode:"NC",countryName:"New Caledonia"},{countryCode:"NZ",countryName:"New Zealand"},{countryCode:"NI",countryName:"Nicaragua"},{countryCode:"NE",countryName:"Niger"},{countryCode:"NG",countryName:"Nigeria"},{countryCode:"NU",countryName:"Niue"},{countryCode:"NF",countryName:"Norfolk Island"},{countryCode:"MP",countryName:"Northern Mariana Islands"},{countryCode:"NO",countryName:"Norway"},{countryCode:"OM",countryName:"Oman"},{countryCode:"PK",countryName:"Pakistan"},{countryCode:"PW",countryName:"Palau"},{countryCode:"PS",countryName:"Palestine"},{countryCode:"PA",countryName:"Panama"},{countryCode:"PG",countryName:"Papua New Guinea"},{countryCode:"PY",countryName:"Paraguay"},{countryCode:"PE",countryName:"Peru"},{countryCode:"PH",countryName:"Philippines"},{countryCode:"PN",countryName:"Pitcairn"},{countryCode:"PL",countryName:"Poland"},{countryCode:"PT",countryName:"Portugal"},{countryCode:"PR",countryName:"Puerto Rico"},{countryCode:"QA",countryName:"Qatar"},{countryCode:"RE",countryName:"Reunion"},{countryCode:"RO",countryName:"Romania"},{countryCode:"RW",countryName:"Rwanda"},{countryCode:"BL",countryName:"Saint Barthélemy"},{countryCode:"SH",countryName:"Saint Helena"},{countryCode:"KN",countryName:"Saint Kitts and Nevis"},{countryCode:"LC",countryName:"Saint Lucia"},{countryCode:"MF",countryName:"Saint Martin (French part)"},{countryCode:"PM",countryName:"Saint Pierre and Miquelon"},{countryCode:"VC",countryName:"Saint Vincent and the Grenadines"},{countryCode:"WS",countryName:"Samoa"},{countryCode:"SM",countryName:"San Marino"},{countryCode:"ST",countryName:"Sao Tome and Principe"},{countryCode:"SA",countryName:"Saudi Arabia"},{countryCode:"SN",countryName:"Senegal"},{countryCode:"RS",countryName:"Serbia"},{countryCode:"SC",countryName:"Seychelles"},{countryCode:"SL",countryName:"Sierra Leone"},{countryCode:"SG",countryName:"Singapore"},{countryCode:"SX",countryName:"Sint Maarten (Dutch part)"},{countryCode:"SK",countryName:"Slovakia"},{countryCode:"SI",countryName:"Slovenia"},{countryCode:"SB",countryName:"Solomon Islands"},{countryCode:"SO",countryName:"Somalia"},{countryCode:"ZA",countryName:"South Africa"},{countryCode:"GS",countryName:"South Georgia and South Sandwich Islands"},{countryCode:"SS",countryName:"South Sudan"},{countryCode:"ES",countryName:"Spain"},{countryCode:"LK",countryName:"Sri Lanka"},{countryCode:"SD",countryName:"Sudan"},{countryCode:"SR",countryName:"Suriname"},{countryCode:"SJ",countryName:"Svalbard and Jan Mayen Islands"},{countryCode:"SZ",countryName:"Swaziland"},{countryCode:"SE",countryName:"Sweden"},{countryCode:"CH",countryName:"Switzerland"},{countryCode:"TW",countryName:"Taiwan"},{countryCode:"TJ",countryName:"Tajikistan"},{countryCode:"TZ",countryName:"Tanzania"},{countryCode:"TH",countryName:"Thailand"},{countryCode:"TL",countryName:"Timor-Leste"},{countryCode:"TG",countryName:"Togo"},{countryCode:"TK",countryName:"Tokelau"},{countryCode:"TO",countryName:"Tonga"},{countryCode:"TT",countryName:"Trinidad and Tobago"},{countryCode:"TN",countryName:"Tunisia"},{countryCode:"TR",countryName:"Turkey"},{countryCode:"TM",countryName:"Turkmenistan"},{countryCode:"TC",countryName:"Turks and Caicos Islands"},{countryCode:"TV",countryName:"Tuvalu"},{countryCode:"UG",countryName:"Uganda"},{countryCode:"AE",countryName:"United Arab Emirates"},{countryCode:"GB",countryName:"United Kingdom"},{countryCode:"UM",countryName:"United States Minor Outlying Islands"},{countryCode:"UY",countryName:"Uruguay"},{countryCode:"UZ",countryName:"Uzbekistan"},{countryCode:"VU",countryName:"Vanuatu"},{countryCode:"VA",countryName:"Vatican City"},{countryCode:"VN",countryName:"Vietnam"},{countryCode:"VG",countryName:"Virgin Islands, British"},{countryCode:"VI",countryName:"Virgin Islands, U.S."},{countryCode:"WF",countryName:"Wallis and Futuna Islands"},{countryCode:"EH",countryName:"Western Sahara"},{countryCode:"YE",countryName:"Yemen"},{countryCode:"ZM",countryName:"Zambia"},{countryCode:"ZW",countryName:"Zimbabwe"}],this.usStatesArray=["AL","AK","AZ","AR","AE","AA","AP","CA","CO","CT","DE","DC","FL","GA","HI","ID","IL","IN","IA","KS","KY","LA","ME","MD","MA","MI","MN","MS","MO","MT","NE","NV","NH","NJ","NM","NY","NC","ND","OH","OK","OR","PA","RI","SC","SD","TN","TX","UT","VT","VA","WA","WV","WI","WY"],this.canadaProvincesArray=["AB","BC","MB","NB","NL","NT","NS","NU","ON","PE","QC","SK","YT"],this.US_TERRITORIES_COUNTRIES_CODES=["PR","UM","GU","VI","AS","MP"],this.EU=new Set(["AT","BE","BG","HR","CY","CZ","DK","EE","FI","FR","DE","GR","HU","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SK","SI","ES","SE","GB"]),this.PRO_BENEFITS=[{benefitName:"common.AD_FREE_BROWSING"},{benefitName:"common.UNLIMITED_STORAGE"},{benefitName:"common.ADVANCED_STATS"},{benefitName:"common.AUTO_BACKUP"},{benefitName:"common.PRIORITY_SUPPORT"}]},e.SubscriptionsHelper.prototype.canPlanIdSeeAnnualPerks=function(e){return this.subscriptionsIdHasAnnualPerk[e]},e.SubscriptionsHelper.prototype.convertDesiredPlan=function(e){var t;if("pro-3month"===e||"pro-3month-v2"===e||"pro-1year"===e||"pro-2year"===e||"pro-2year-v2"===e)switch(e){case"pro-monthly":case"pro-3month":case"pro-3month-v2":t="pro-monthly";break;case"pro-1year":default:t="pro-annual";break;case"pro-2year":case"pro-2year-v2":t="pro-2-year"}else t=""===e?"pro-annual":e;return t},e.SubscriptionsHelper.prototype.getPlanIdWithPlanName=function(e,t){var n=this.FLICKR_PRO_ANNUAL_PLAN_ID,o=t?this.subscriptionsIdByNameOnStripe:this.subscriptionsIdByName;return void 0!==o[e]&&(n=o[e]),n},e.SubscriptionsHelper.prototype.getPlanNameWithPlanId=function(e,t){var n="",o=t?this.subscriptionsIdByNameOnStripe:this.subscriptionsIdByName;for(var r in this.subscriptionsIdByName)if(o[r]===e){n=r;break}return n},e.SubscriptionsHelper.prototype.canPurchaseAtLeastOnePlan=function(e){var t=[];return e&&(t=e.filter((function(e){return 1===e.canPurchase}))),t.length>0},e.SubscriptionsHelper.prototype.canPurchaseThisPlanId=function(e,t){var n=[];return e&&t&&(n=t.filter((function(t){return t.planId===e}))),n.length>0},e.SubscriptionsHelper.prototype.getNewProPlans=function(e){if(e)return e.filter((function(e){return"FlickrNewPro"===e.familyName}))},e.SubscriptionsHelper.prototype.getOldProPlans=function(e){if(e)return e.filter((function(e){return"FlickrPro"===e.familyName}))},e.SubscriptionsHelper.prototype.getPlanWithIdInPlansList=function(e){},e.SubscriptionsHelper.prototype.sanitizeCouponCode=function(e){var t=!1;if(e){if(t=e.trim(),e.length<=1)return!1;if(!t.match(/^[\w\-]+$/))return!1}return t},e.SubscriptionsHelper.prototype.convertLocaleToPaypalFormat=function(e){if(e){return{"de-DE":"de_DE","en-US":"en_US","es-US":"es_ES","fr-FR":"fr_FR","id-ID":"id_ID","it-IT":"it_IT","ko-KR":"ko_KR","pt-BR":"pt_PT","vi-VN":"en_US","zh-HK":"zh_HK"}[e]}},e.SubscriptionsHelper.prototype.getStripeLocale=function(e){var t="en";if(e){t={"de-DE":"de","en-US":"en","es-US":"es-419","fr-FR":"fr","id-ID":"id","it-IT":"it","ko-KR":"ko","pt-BR":"pt-BR","vi-VN":"vi","zh-HK":"zh"}[e]}return t},e.SubscriptionsHelper.prototype.getGooglePayLocale=function(e){var t="en";if(e){t={"de-DE":"de","en-US":"en","es-US":"es","fr-FR":"fr","id-ID":"id","it-IT":"it","ko-KR":"ko","pt-BR":"pt","vi-VN":"en","zh-HK":"zh"}[e]}return t},e.SubscriptionsHelper.prototype.getNiceCardType=function(e){return this.cardTypeMap[e]},e.SubscriptionsHelper.prototype.getPaymentVendorType=function(e){return this.paymentVendorMap[e]},e.SubscriptionsHelper.prototype.isPaymentVendorBraintree=function(e){return e===this.paymentVendorMap.braintree},e.SubscriptionsHelper.prototype.isPaymentVendorDigitalRiver=function(e){return e===this.paymentVendorMap.digitalriver},e.SubscriptionsHelper.prototype.isPaymentVendorStripe=function(e){return e===this.paymentVendorMap.stripe},e.SubscriptionsHelper.prototype.isPaymentVendorAppleOrGoogle=function(e){return e===this.paymentVendorMap.apple||e===this.paymentVendorMap.google},e.SubscriptionsHelper.prototype.isPaymentVendorApple=function(e){return e===this.paymentVendorMap.apple},e.SubscriptionsHelper.prototype.isPaymentVendorGoogle=function(e){return e===this.paymentVendorMap.google},e.SubscriptionsHelper.prototype.hasYearlyLegalNotice=function(e){return this.subscriptionsIdHasAnnualPerk[e]},e.SubscriptionsHelper.prototype.log=function(t,n){!YUI.Env.isServer&&e.config.win.beaconError&&e.config.win.beaconError("[flickr-add-payment-method] "+t,e.config.win.location.href,n||{})},e.SubscriptionsHelper.prototype.beaconTransactionStep=function(t,n){!YUI.Env.isServer&&e.config.win.beaconError&&e.config.win.beaconError("[PRO] "+t,e.config.win.location.href,n||{})},e.SubscriptionsHelper.prototype.doesPlanIdHaveTrial=function(e){return e===this.FLICKR_PRO_ANNUAL_PLAN_ID||e===this.FLICKR_PRO_1_YEAR_PLAN_ID||e===this.FLICKR_PRO_2_YEARS_PLAN_ID},e.SubscriptionsHelper.prototype.canPurchaseTrialPlan=function(t,n){if(t&&n){var o;return o=t.getValue("products"),e.Array.filter(o,function(e){return e.planId===this.FLICKR_PRO_ANNUAL_TRIAL&&1===e.canPurchase||e.planId===this.FLICKR_PRO_OLD_ANNUAL_TRIAL&&1===e.canPurchase}.bind(this)).length>0}},e.SubscriptionsHelper.prototype.getTrialLength=function(){return 45},e.SubscriptionsHelper.prototype.formatSubscriptionModels=function(t){if(!t)return[];var n=t.toJSON();return n&&n.subscriptions&&n.subscriptions instanceof Array&&0!==n.subscriptions.length?e.Array.map(n.subscriptions,this.formatSubscriptionModel.bind(this)):[]},e.SubscriptionsHelper.prototype.formatSubscriptionModel=function(t){var n,o,r,a,i=!1;return t.amountBilled&&("number"==typeof t.amountBilled?t.amountBilled=t.amountBilled.toFixed(2):"string"==typeof t.amountBilled?t.amountBilled=parseInt(t.amountBilled,10).toFixed(2):t.amountBilled="0.00"),n=t.amountBilled,o=t.pendingPrice?t.pendingPrice.toFixed(2):"0.00",(r=this.isPaymentVendorStripe(parseInt(t.vendorId,10)))&&t.futureChanges&&(i={type:parseInt(t.futureChanges.type,10),intlName:this.getPlanIntlName(parseInt(t.futureChanges.type,10)),startDate:1e3*parseInt(t.futureChanges.startDate,10),currency:t.futureChanges.currency,hasDiscount:t.futureChanges.hasDiscount,basePrice:t.futureChanges.basePrice,totalPrice:t.futureChanges.totalPrice}),a=parseInt(t.status,10),{type:t.type,canSeeAnnualPerks:this.canPlanIdSeeAnnualPerks(t.type),startDate:1e3*parseInt(t.startDate,10),nextBillingDate:a===this.subscriptionStatusMap.active||a===this.subscriptionStatusMap.pending?e.moment(1e3*parseInt(t.nextBillingDate,10)):0,id:t.id,intlName:this.getPlanIntlName(parseInt(t.type,10)),name:t.prettyName,duration:t.billingScheduleMonths,price:n,pendingPrice:o,status:a,isClosed:a===this.subscriptionStatusMap.closed,isPastDue:a===this.subscriptionStatusMap.subscription_went_past_due,effectiveEndDate:1e3*parseInt(t.effectiveEndDate,10),paymentVendorType:t.paymentVendorType||t.vendorId,paymentMethodType:t.paymentMethodType,isBraintreeSubscription:this.isPaymentVendorBraintree(parseInt(t.paymentVendorType||t.vendorId,10)),isDigitalRiverSubscription:this.isPaymentVendorDigitalRiver(parseInt(t.paymentVendorType||t.vendorId,10)),isStripeSubscription:r,isGoogleOrAppleSubscription:this.isPaymentVendorAppleOrGoogle(parseInt(t.paymentVendorType||t.vendorId),10),transactions:t.transactions,futureChanges:i,isPayPal:t.paymentMethodType&&["1","2","4"].includes(t.paymentMethodType),btMigrationSegment:t.btMigrationSegment||void 0}},e.SubscriptionsHelper.prototype.getEligibleSubscription=function(e,t){var n,o,r=e.getValue("pending"),a=e.getValue("active"),i=e.getValue("pastDue");return t&&(o=e.getValue("closed")),r&&r.length?n=r[0]:a&&a.length?n=a[0]:i&&i.length?n=i[0]:t&&o&&o[0]&&(n=o[0]),n},e.SubscriptionsHelper.prototype.getActiveAndPendingSubscriptions=function(t){var n;return n=e.Array.filter(this.formatSubscriptionModels(t),function(e){return e.status===this.subscriptionStatusMap.pending}.bind(this)),{activeSubs:e.Array.filter(this.formatSubscriptionModels(t),function(t){return t.status===this.subscriptionStatusMap.active||t.status===this.subscriptionStatusMap.closed&&void 0!==t.effectiveEndDate&&e.moment(t.effectiveEndDate).isAfter(e.moment())||t.status===this.subscriptionStatusMap.subscription_went_past_due}.bind(this)),pendingSubs:n}},e.SubscriptionsHelper.prototype.isUserOnActiveButClosedPro=function(t){var n=this.getActiveAndPendingSubscriptions(t);return e.Array.filter(n.activeSubs,function(e){return e.status!==this.subscriptionStatusMap.active}.bind(this)).length>=1&&n.pendingSubs&&0===n.pendingSubs.length},e.SubscriptionsHelper.prototype.isUserCurrentlyOnADigitalRiverSub=function(e){var t=this.getActiveAndPendingSubscriptions(e),n=!1;if(t.activeSubs&&t.activeSubs.length>0){var o=t.activeSubs[0];if(t.pendingSubs&&t.pendingSubs.length>0){var r=t.pendingSubs[0];r&&(n=r.isDigitalRiverSubscription)}else n=o.isDigitalRiverSubscription}return n},e.SubscriptionsHelper.prototype.isUserCurrentlyOnABraintreeSub=function(e){var t=this.getActiveAndPendingSubscriptions(e),n=!1,o=!1;if(t.activeSubs&&t.activeSubs.length>0){var r=t.activeSubs[0];if(t.pendingSubs&&t.pendingSubs.length>0){var a=t.pendingSubs[0];a&&(n=a.isBraintreeSubscription,o=a.nextBillingDate)}else r.isClosed||(n=r.isBraintreeSubscription,o=r.nextBillingDate)}return{isUserCurrentlyOnABraintreeSub:n,renewalDate:o}},e.SubscriptionsHelper.prototype.isUserCurrentlyOnAStripeSub=function(e){var t=this.getActiveAndPendingSubscriptions(e),n=!1,o=!1;if(t.activeSubs&&t.activeSubs.length>0){var r=t.activeSubs[0];if(t.pendingSubs&&t.pendingSubs.length>0){var a=t.pendingSubs[0];a&&(n=a.isStripeSubscription,o=a.nextBillingDate)}else r.isClosed||(n=r.isStripeSubscription,o=r.nextBillingDate)}return{isStripeSubscription:n,renewalDate:o}},e.SubscriptionsHelper.prototype.isUserCurrentlyOnAIAPSub=function(e){var t=this.getActiveAndPendingSubscriptions(e),n=!1;if(t.activeSubs&&t.activeSubs.length>0){var o=t.activeSubs[0];if(t.pendingSubs&&t.pendingSubs.length>0){var r=t.pendingSubs[0];r&&(n=r.isGoogleOrAppleSubscription)}else o.isClosed||(n=o.isGoogleOrAppleSubscription)}return n},e.SubscriptionsHelper.prototype.isUserPastDue=function(t){var n,o=this.getActiveAndPendingSubscriptions(t);return(n=e.Array.filter(o.activeSubs,function(e){return e.status===this.subscriptionStatusMap.subscription_went_past_due}.bind(this)))&&n.length>=1},e.SubscriptionsHelper.prototype.hasPurchasedTrialInThePast=function(t){var n=t.toJSON();return e.Array.filter(n,function(e){return e.planId===this.FLICKR_PRO_ANNUAL_TRIAL||e.planId===this.FLICKR_PRO_OLD_ANNUAL_TRIAL}.bind(this)).length>0},e.SubscriptionsHelper.prototype.isOnActiveTrial=function(e){var t=this.getActiveAndPendingSubscriptions(e),n=!1;return t&&t.activeSubs&&t.activeSubs.length>0&&(n=t.activeSubs[0].type===this.FLICKR_PRO_ANNUAL_TRIAL||t.activeSubs[0].type===this.FLICKR_PRO_OLD_ANNUAL_TRIAL),n},e.SubscriptionsHelper.prototype.isOneTimePro=function(e){return e.toJSON().oneTimePro.isOneTimePro},e.SubscriptionsHelper.prototype.getShopperCurrencyAndLocale=function(t){var n="US",o="en_US",r="USD",a=!1;if(!t&&e.config.flickr.geo?(e.config.flickr.geo.countryCode&&(n=e.config.flickr.geo.countryCode),e.config.flickr.geo.eu&&(a=e.config.flickr.geo.eu)):t&&(n=t.countryCode||"US",a=t.eu||!1),a)"GB"===n?(o="en_IE",r="GBP"):(o="en_IE",r="EUR");else if(this.US_TERRITORIES_COUNTRIES_CODES.indexOf(n)>-1)o="en_US",r="USD";else switch(n){case"US":o="en_US",r="USD";break;case"CA":o="en_IE",r="CAD";break;default:o="en_IE",r="USD"}return{locale:o,currency:r}},e.SubscriptionsHelper.prototype.getPlanIntlName=function(e){switch(e){case this.FLICKR_PRO_MONTHLY_PLAN_ID:case this.FLICKR_PRO_1_MONTH_V2_APPLE_ID:case this.FLICKR_PRO_1_MONTH_V2_GOOGLE_ID:case this.FLICKR_PRO_STRIPE_MONTHLY_PLAN_ID:return"checkout.FLICKR_MONTHLY_PRO_PLAN";case this.FLICKR_PRO_3_MONTH_PLAN_ID:case this.FLICKR_PRO_3_MONTH_V2_PLAN_ID:case this.FLICKR_PRO_STRIPE_3_MONTH_PLAN_ID:return"checkout.FLICKR_3_MONTHS_PRO_PLAN";case this.FLICKR_PRO_1_YEAR_PLAN_ID:case this.FLICKR_PRO_ANNUAL_PLAN_ID:case this.FLICKR_PRO_1_YEAR_V2_APPLE_ID:case this.FLICKR_PRO_1_YEAR_V2_GOOGLE_ID:case this.FLICKR_PRO_STRIPE_ANNUAL_PLAN_ID:return"checkout.FLICKR_ANNUAL_PRO_PLAN";case this.FLICKR_PRO_2_YEARS_PLAN_ID:case this.FLICKR_PRO_2_YEAR_V2_PLAN_ID:case this.FLICKR_PRO_STRIPE_2_YEAR_PLAN_ID:return"checkout.FLICKR_2_YEAR_PRO_PLAN";default:return"common.FLICKR_PRO"}},e.SubscriptionsHelper.prototype.getPriceWithCurrency=function(e,t,n){var o=n.replace("_","-");let r="";return"USD"!==t||"en-US"!==n&&"es-US"!==n||(r="USD "),r+new Intl.NumberFormat(o,{style:"currency",currency:t}).format(e)},e.SubscriptionsHelper.prototype.doesCountryRequiresSignedInGifting=function(e){return!(!e||!e.countryCode||"VN"!==e.countryCode)},e.SubscriptionsHelper.prototype.isADeniedCountry=function(e){return!!(e&&e.countryCode&&["VE","CU","IR","IQ","KP","SY"].indexOf(e.countryCode)>-1)},e.SubscriptionsHelper.prototype.isProductPubliclyAvailable=function(e){return!(!e||e===this.FLICKR_PRO_2_YEAR_V2_PLAN_ID)},e.SubscriptionsHelper.prototype.parseEffectiveSubscriptionData=function(e,t){var n=!1,o=!1,r=!1,a=void 0,i=void 0;if(e&&t&&t.length){t.length>1&&t.sort((function(e,t){return parseInt(e.startDate,10)<parseInt(t.startDate)}));var u=parseInt(t[0].status,10),c=parseInt(t[0].effectiveEndDate,10),s=parseInt(t[0].nextBillingDate,10);n=u===this.subscriptionStatusMap.closed&&c>parseInt((new Date).getTime()/1e3,10),!!(r=u===this.subscriptionStatusMap.pending)&&this.isSubscriptionPendingAndPaidFor(t[0]),u===this.subscriptionStatusMap.active&&s>parseInt((new Date).getTime()/1e3,10),o=u===this.subscriptionStatusMap.subscription_went_past_due,i=parseInt(t[0].type,10),a=parseInt(t[0].status,10)}return{status:a,planType:i,isPro:e,isClosed:n,isPastDue:o,isPending:r}},e.SubscriptionsHelper.prototype.isOneTimePro=function(e){return!(!e||!e.getValue("isPro"))&&(e.getValue("proExpireDate")&&e.getValue("proExpireDate").isAfter())},e.SubscriptionsHelper.prototype.parseEffectiveSubscriptions=function(t){return t?e.Array.map(t,this.formatSubscriptionModel.bind(this)):[]},e.SubscriptionsHelper.prototype.isAMonthlySub=function(e){var t=[this.FLICKR_PRO_3_MONTH_PLAN_ID,this.FLICKR_PRO_MONTHLY_PLAN_ID,this.FLICKR_PRO_3_MONTH_V2_PLAN_ID,this.FLICKR_PRO_STRIPE_MONTHLY_PLAN_ID,this.FLICKR_PRO_STRIPE_3_MONTH_PLAN_ID];return!!((e=parseInt(e,10))&&t.indexOf(e)>-1)},e.SubscriptionsHelper.prototype.isSubscriptionPendingAndPaidFor=function(e){return!!e&&(parseInt(e.status,10)===this.subscriptionStatusMap.pending&&e.transactions&&e.transactions.length>0)},e.SubscriptionsHelper.prototype.getErrorMessageIntlKeyForStripeErrorCode=function(e){if(e){var t=!1;switch(e){case"incorrect_cvc":t="checkout.PLEASE_ENTER_CORRECT_VALID_CVV";break;case"processing_error":default:t="checkout.PROCESSING_ERROR";break;case"expired_card":t="checkout.YOUR_CARD_IS_EXPIRED";break;case"card_declined":t="checkout.YOUR_CARD_WAS_DECLINED"}return t}},e.SubscriptionsHelper.prototype.trackAddToCart=function(t){e.Snowplough&&t?e.Snowplough.sendSelfDescribingEvent({schema:e.Snowplough.SCHEMAS.ADD_TO_CART,data:{sku:t.sku,name:t.name,category:"subscription",unitPrice:t.unitPrice,quantity:1,currency:t.currency}}):n.error("Missing Y.Snowplough in Y.SubscriptionsHelper.trackAddToCart")},e.SubscriptionsHelper.prototype.sendSuccessfulPurchaseEvent=function(t){e.Snowplough&&t?e.Snowplough.sendSelfDescribingEvent({schema:e.Snowplough.SCHEMAS.SUBSCRIPTION_PURCHASE_EVENT,data:{sku:parseInt(t.sku,10),nsid:t.nsid,flow:"purchase",currency:t.currency,totalPrice:t.totalPrice}}):n.error("Missing Y.Snowplough in Y.SubscriptionsHelper.sendSuccessfulPurchaseEvent")},e.SubscriptionsHelper.prototype.sendPurchaseFunnelEvent=function(t){e.Snowplough&&t?e.Snowplough.sendSelfDescribingEvent({schema:e.Snowplough.SCHEMAS.SUBSCRIPTION_PURCHASE_FUNNEL_EVENT,data:{nsid:t.nsid||"",
sku:parseInt(t.sku,10)||0,step:t.step,currency:t.currency||"",signedIn:t.signedIn||!1,couponCode:t.couponCode||""}}):n.error("Missing Y.Snowplough in Y.SubscriptionsHelper.sendPurchaseFunnelEvent")},e.SubscriptionsHelper.prototype.sendCancellationFlowEvent=function(t){e.Snowplough&&t?e.Snowplough.sendSelfDescribingEvent({schema:e.Snowplough.SCHEMAS.SUBSCRIPTION_CANCEL_FLOW_EVENT,data:{nsid:t.nsid,currentSku:parseInt(t.currentSku,10),feedbackId:t.feedbackId?t.feedbackId:null,paymentVendorType:parseInt(t.paymentVendorType,10),cancellationStep:t.cancellationStep,cancellationReasonPicked:t.cancellationReasonPicked?parseInt(t.cancellationReasonPicked,10):null,cancellationReasonText:t.cancellationReasonText||null,bucket:t.bucket,eligibleForSurvey:t.eligibleForSurvey}}):n.error("Missing Y.Snowplough in Y.SubscriptionsHelper.sendCancellationFlowEvent")},e.SubscriptionsHelper.prototype.sendGiftPurchaseEvent=function(t){e.Snowplough&&t?e.Snowplough.sendSelfDescribingEvent({schema:e.Snowplough.SCHEMAS.GIFT,data:{step:t.step,recipientNsid:t.recipientNsid,gifterNsid:t.gifterNsid||"",gifterEmail:t.gifterEmail||"",price:t.price||0,duration:t.duration||"",error:t.error||"",giftId:t.giftId||0}}):n.error("Missing Y.Snowplough in Y.SubscriptionsHelper.sendGiftPurchaseEvent")},e.SubscriptionsHelper.prototype.sendFreeTrialEvent=function(t){if(e.Snowplough&&t){var o={category:"free_trial"};t.action&&(o.action=t.action),t.couponCode&&(o.label=t.couponCode),t.planId&&(o.value=t.planId),e.Snowplough.sendStructuredEvent(o)}else n.error("Missing Y.Snowplough in Y.SubscriptionsHelper.sendFreeTrialEvent")},e.SubscriptionsHelper.prototype.getProLandingPageUrl=function(e,t){var n="/account/upgrade/pro";switch(t=t||{},e){case this.UTM_PRO_BADGE:n+="?utm_campaign=web&utm_source=desktop&utm_content=badge"+(t&&t.utm_medium?"&utm_medium="+t.utm_medium:"");break;case this.UTM_HIDE_ADS:n+="?utm_campaign=web&utm_source=desktop&utm_medium=ads_upsell&utm_content=upgrade";break;case this.UTM_UPSELL_LINK:n+="?utm_campaign=web&utm_source=desktop&utm_content=upgrade"+(t&&t.utm_medium?"&utm_medium="+encodeURIComponent(t.utm_medium):"");break;case this.UTM_GLOBAL_NAV:n+="?utm_campaign=web&utm_source=desktop&utm_medium=gn"+(t&&t.utm_content?"&utm_content="+encodeURIComponent(t.utm_content):"");break;case this.UTM_HIDE_ADS_GETTY_SEARCH:n+="?utm_campaign=getty-search&utm_source=desktop&utm_medium=ads_upsell&utm_content=upgrade";break;case this.UTM_EXPLORED_BANNER_DISCOUNT:n+="/pro-monthly?coupon=2KZNQDGG&utm_campaign=explored_banner_discount&utm_source="+encodeURIComponent(t.utm_source)+"&utm_content=banner";break;case this.UTM_CHURNED_BANNER_PRO:n+=t.planType+t.couponCode+"&utm_campaign=cap-banner&utm_source=Flickr&utm_medium=blue-banner&utm_content=text-link";break;case this.UTM_SAFETY_UPSELL:n+=`?utm_campaign=safetyLevel&utm_source=${t.source||"desktop"}&utm_medium=${t.medium}&utm_content=upgrade`;break;case this.UTM_PHOTOLIST_UPSELL:n+=`?utm_campaign=photolist&utm_source=${t.source||"desktop"}&utm_medium=grid&utm_content=upgrade`;break;case this.UTM_PROPSCORE2_BANNER_PRO:n+=`?utm_campaign=propscore2&utm_source=${t.source||"desktop"}&utm_medium=banner&utm_content=upgrade`;break;case this.UTM_SECOND_LIFE_BANNER_DISCOUNT:n+="?coupon=SLPRO20&utm_campaign=second-life-birthday&utm_source=Flickr&utm_medium=house_ads&utm_content=blue-banner";break;case this.UTM_PRO_AWARENESS_CAMPAIGN:n+="?utm_campaign=eoy-pro-spotlight&utm_source=Flickr&utm_medium=house_ads&utm_content=blue-banner";break;case this.UTM_ABANDONED_CART_RECOVERY:n+=t.planName+"?utm_campaign=cart-recovery&utm_source=Flickr&utm_medium=blue-toast&utm_content="+t.segmentPlan;break;case this.UTM_FREE_USER_SAFE_SEARCH_CHANGE:n+="?utm_campaign=free-user-safe-search-change&utm_source=Flickr&utm_medium=modal&utm_content=get-pro";break;case this.UTM_NSFW_INTERSTITIAL:n+="?utm_campaign=nsfw-interstitial&utm_source=Flickr&utm_medium=modal&utm_content=get-pro";break;case this.UTM_ADS_KEEP_FLICKR:n+=`?utm_campaign=ads-keep-flickr-interstitial&utm_source=Flickr&utm_medium=modal&utm_content=${t.content}`;break;case this.UTM_ACCOUNT_SUSPENSION:n+=`?select&utm_campaign=suspension&utm_source=${t.source||"desktop"}&utm_medium=${t.medium}&utm_content=upgrade`;break;case this.UTM_FLICKR_BDAY_PROMO:n+=`?select&coupon=21for21&utm_campaign=flickr-21st-birthday&utm_source=${t.source||"Flickr"}&utm_medium=${t.medium||"blue_banner"}&utm_content=pro-upgrade`;break;case this.UTM_SEARCH_SIGNUP_PROMPT:n+=`?utm_campaign=search-page-pro-modal_so&utm_source=${t.source||"desktop"}&utm_medium=modal&utm_content=get-pro`}return n},e.SubscriptionsHelper.prototype.getMostRecentSubscription=function(e){return e&&e.length>1&&(e=e.sort((function(e,t){return parseInt(e.dateCreate,10)<parseInt(t.dateCreate,10)?1:parseInt(e.dateCreate,10)>parseInt(t.dateCreate,10)?-1:0}))),e[0]},e.SubscriptionsHelper.prototype.getUrlForMatchingPlan=function(e){let t="pro-annual",n=parseInt(e,10);return n===this.FLICKR_PRO_2_YEAR_V2_PLAN_ID?t="pro-2year":n===this.FLICKR_PRO_ANNUAL_PLAN_ID?t="pro-annual":(n===this.FLICKR_PRO_3_MONTH_V2_PLAN_ID||n===this.FLICKR_PRO_MONTHLY_PLAN_ID)&&(t="pro-monthly"),t}}),"@VERSION@",{requires:["moment","timezone-helper","array-extras"],optionalRequires:["hermes-core"],optional:[]});YUI.add("effective-subscriptions-models",(function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,remote:{read:function(t){return e.ModelFetchers["flickr-subscriptions-getEffectiveSubscriptions-fetcher"].run(t,this.appContext)}},attributes:{active:{validator:function(t){if(t.length>0){var i=!1;return t.forEach((function(t){i=e.AttributeHelpers.validateDate(t.nextBillingDate)})),i}return!0},serialize:function(e){return e.forEach((function(e){e.nextBillingDate=e.nextBillingDate.format("X")})),e},deserialize:function(t){return t.forEach((function(t){t.nextBillingDate=e.moment(t.nextBillingDate,"X")})),t}},closed:{},pending:{validator:function(t){if(t.length>0){var i=!1;return t.forEach((function(t){i=e.AttributeHelpers.validateDate(t.nextBillingDate)})),i}return!0},serialize:function(e){return e.forEach((function(e){e.nextBillingDate=e.nextBillingDate.format("X")})),e},deserialize:function(t){return t.forEach((function(t){t.nextBillingDate=e.moment(t.nextBillingDate,"X")})),t}},pastDue:{},all:{},length:{defaultValue:0}}})}),"@VERSION@",{requires:["flickr-model-registry","flickr-promise","flickr-subscriptions-getEffectiveSubscriptions-fetcher","moment"]});YUI.add("flickr-subscriptions-getEffectiveSubscriptions-fetcher",(function(e,s){var i=new e.SubscriptionsHelper;e.namespace("ModelFetchers")["flickr-subscriptions-getEffectiveSubscriptions-fetcher"]={run:function(i,t){var r=this;return e.Promise.all([t.callAPI("flickr.subscriptions.getEffectiveSubscriptions",i),t.getModelRegistry("effective-subscriptions-models")]).then((function(e){return r._processResponse(e,i,t)}),e.FetcherErrorLogger(s))},_processResponse:function(e,s,t){var r,c=e[0],n=e[1];if(r={id:s.id,all:[],active:[],pending:[],closed:[],pastDue:[]},c&&"ok"===c.stat&&c.subscriptions){var p=c.subscriptions,o=0;p&&(p.all&&(r.all=i.parseEffectiveSubscriptions(p.all),o+=p.all.length),p.active&&(r.active=i.parseEffectiveSubscriptions(p.active),o+=p.active.length),p.pending&&(r.pending=i.parseEffectiveSubscriptions(p.pending),o+=p.pending.length),p.closed&&(r.closed=i.parseEffectiveSubscriptions(p.closed),o+=p.closed.length),p.subscription_went_past_due&&(r.pastDue=i.parseEffectiveSubscriptions(p.subscription_went_past_due),o+=p.subscription_went_past_due.length),r.length=o)}n.addOrUpdate(r)}}}),"@VERSION@",{requires:["flickr-promise","flickr-promise","effective-subscriptions-models","subscriptions-helper"],optional:["api-helper"]});YUI.add("flickr-contacts-add-updater",(function(r,c){"use strict";r.namespace("ModelUpdaters")["flickr-contacts-add"]={run:function(t,e){return e.callAPI("flickr.contacts.add",t).then(null,r.FetcherErrorLogger(c))}}}),"@VERSION@",{requires:["flickr-promise"]});YUI.add("flickr-contacts-remove-updater",(function(r,e){"use strict";r.namespace("ModelUpdaters")["flickr-contacts-remove"]={run:function(c,t){return t.callAPI("flickr.contacts.remove",c).then(null,r.FetcherErrorLogger(e))}}}),"@VERSION@",{requires:["flickr-promise"]});YUI.add("flickr-contacts-edit-updater",(function(r,t){"use strict";r.namespace("ModelUpdaters")["flickr-contacts-edit"]={run:function(e,c){return c.callAPI("flickr.contacts.edit",e).then(null,r.FetcherErrorLogger(t))}}}),"@VERSION@",{requires:["flickr-promise"]});