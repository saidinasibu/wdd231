YUI.add("hermes-template-photo-list-photo-interaction",(function(n,t){var l=n.Template.Handlebars.revive({1:function(n,t,l,e,o){var a,r=n.lookupProperty||function(n,t){if(Object.prototype.hasOwnProperty.call(n,t))return n[t]};return n.escapeExpression(n.lambda(null!=(a=null!=t?r(t,"photo"):t)?r(a,"title"):a,t))},3:function(n,t,l,e,o){var a=n.lookupProperty||function(n,t){if(Object.prototype.hasOwnProperty.call(n,t))return n[t]};return n.escapeExpression((a(l,"intlMessage")||t&&a(t,"intlMessage")||n.hooks.helperMissing).call(null!=t?t:n.nullContext||{},{name:"intlMessage",hash:{intlName:"common.UNTITLED"},data:o,loc:{start:{line:3,column:141},end:{line:3,column:183}}}))},5:function(n,t,l,e,o){var a=n.lookupProperty||function(n,t){if(Object.prototype.hasOwnProperty.call(n,t))return n[t]};return" "+n.escapeExpression((a(l,"intlMessage")||t&&a(t,"intlMessage")||n.hooks.helperMissing).call(null!=t?t:n.nullContext||{},{name:"intlMessage",hash:{intlName:"common.BY_YOU"},data:o,loc:{start:{line:3,column:212},end:{line:3,column:252}}}))},7:function(n,t,l,e,o){var a,r=n.lookupProperty||function(n,t){if(Object.prototype.hasOwnProperty.call(n,t))return n[t]};return" "+n.escapeExpression((r(l,"intlMessage")||t&&r(t,"intlMessage")||n.hooks.helperMissing).call(null!=t?t:n.nullContext||{},{name:"intlMessage",hash:{user:null!=(a=null!=(a=null!=t?r(t,"photo"):t)?r(a,"owner"):a)?r(a,"username"):a,intlName:"common.BY_USER"},data:o,loc:{start:{line:3,column:261},end:{line:3,column:328}}}))},9:function(n,t,l,e,o){var a,r=null!=t?t:n.nullContext||{},i=n.lookupProperty||function(n,t){if(Object.prototype.hasOwnProperty.call(n,t))return n[t]};return'\t\t<div class="extra-tools">\n'+(null!=(a=i(l,"if").call(r,null!=t?i(t,"removeToolClass"):t,{name:"if",hash:{},fn:n.program(10,o,0),inverse:n.noop,data:o,loc:{start:{line:6,column:3},end:{line:8,column:10}}}))?a:"")+(null!=(a=i(l,"if").call(r,null!=t?i(t,"bigScotchTitle"):t,{name:"if",hash:{},fn:n.program(12,o,0),inverse:n.noop,data:o,loc:{start:{line:9,column:3},end:{line:11,column:10}}}))?a:"")+(null!=(a=i(l,"if").call(r,null!=t?i(t,"moreMenuItems"):t,{name:"if",hash:{},fn:n.program(14,o,0),inverse:n.noop,data:o,loc:{start:{line:12,column:3},end:{line:14,column:10}}}))?a:"")+"\t\t</div>\n"},10:function(n,t,l,e,o){var a,r,i=n.escapeExpression,s=n.lookupProperty||function(n,t){if(Object.prototype.hasOwnProperty.call(n,t))return n[t]};return'\t\t\t\t<div class="extra-tool remove-photo '+i("function"==typeof(r=null!=(r=s(l,"removeToolClass")||(null!=t?s(t,"removeToolClass"):t))?r:n.hooks.helperMissing)?r.call(null!=t?t:n.nullContext||{},{name:"removeToolClass",hash:{},data:o,loc:{start:{line:7,column:40},end:{line:7,column:59}}}):r)+'" data-id='+i(n.lambda(null!=(a=null!=t?s(t,"photo"):t)?s(a,"id"):a,t))+"></div>\n"},12:function(n,t,l,e,o){var a,r,i=n.escapeExpression,s=n.lookupProperty||function(n,t){if(Object.prototype.hasOwnProperty.call(n,t))return n[t]};return'\t\t\t\t<div class="extra-tool big-scotch" data-id='+i(n.lambda(null!=(a=null!=t?s(t,"photo"):t)?s(a,"id"):a,t))+' title="'+i("function"==typeof(r=null!=(r=s(l,"bigScotchTitle")||(null!=t?s(t,"bigScotchTitle"):t))?r:n.hooks.helperMissing)?r.call(null!=t?t:n.nullContext||{},{name:"bigScotchTitle",hash:{},data:o,loc:{start:{line:10,column:67},end:{line:10,column:85}}}):r)+'"></div>\n'},14:function(n,t,l,e,o){var a,r,i=null!=t?t:n.nullContext||{},s=n.hooks.helperMissing,u=n.escapeExpression,c=n.lookupProperty||function(n,t){if(Object.prototype.hasOwnProperty.call(n,t))return n[t]};return'\t\t\t\t<div class="extra-tool more-menu" data-menu-items="'+u("function"==typeof(r=null!=(r=c(l,"moreMenuItems")||(null!=t?c(t,"moreMenuItems"):t))?r:s)?r.call(i,{name:"moreMenuItems",hash:{},data:o,loc:{start:{line:13,column:55},end:{line:13,column:72}}}):r)+'" data-id='+u(n.lambda(null!=(a=null!=t?c(t,"photo"):t)?c(a,"id"):a,t))+' title="'+u((c(l,"intlMessage")||t&&c(t,"intlMessage")||s).call(i,{name:"intlMessage",hash:{intlName:"common.MORE"},data:o,loc:{start:{line:13,column:102},end:{line:13,column:140}}}))+'"></div>\n'},16:function(n,t,l,e,o){var a,r,i=n.escapeExpression,s=n.lookupProperty||function(n,t){if(Object.prototype.hasOwnProperty.call(n,t))return n[t]};return'\t\t\t\t<a href="'+i("function"==typeof(r=null!=(r=s(l,"photoPageUrl")||(null!=t?s(t,"photoPageUrl"):t))?r:n.hooks.helperMissing)?r.call(null!=t?t:n.nullContext||{},{name:"photoPageUrl",hash:{},data:o,loc:{start:{line:20,column:13},end:{line:20,column:29}}}):r)+'" class="title" tabindex="-1">'+i(n.lambda(null!=(a=null!=t?s(t,"photo"):t)?s(a,"title"):a,t))+"</a>\n"},18:function(n,t,l,e,o){return'\t\t\t\t<span class="title empty"> </span>\n'},20:function(n,t,l,e,o){var a,r=n.lookupProperty||function(n,t){if(Object.prototype.hasOwnProperty.call(n,t))return n[t]};return'\t\t\t\t<a href="'+n.escapeExpression(n.lambda(null!=(a=null!=(a=null!=t?r(t,"photo"):t)?r(a,"owner"):a)?r(a,"url"):a,t))+'" class="attribution">\n'+(null!=(a=(r(l,"photoAttribution")||t&&r(t,"photoAttribution")||n.hooks.helperMissing).call(null!=t?t:n.nullContext||{},null!=t?r(t,"photo"):t,null!=t?r(t,"flippers"):t,{name:"photoAttribution",hash:{},fn:n.program(21,o,0),inverse:n.noop,data:o,loc:{start:{line:26,column:5},end:{line:32,column:26}}}))?a:"")+"\t\t\t\t</a>\n"},21:function(n,t,l,e,o){var a,r=n.lookupProperty||function(n,t){if(Object.prototype.hasOwnProperty.call(n,t))return n[t]};return null!=(a=r(l,"if").call(null!=t?t:n.nullContext||{},null!=t?r(t,"intlName"):t,{name:"if",hash:{},fn:n.program(22,o,0),inverse:n.program(24,o,0),data:o,loc:{start:{line:27,column:6},end:{line:31,column:13}}}))?a:""},22:function(n,t,l,e,o){var a=n.lookupProperty||function(n,t){if(Object.prototype.hasOwnProperty.call(n,t))return n[t]};return"\t\t\t\t\t\t\t"+n.escapeExpression((a(l,"intlMessage")||t&&a(t,"intlMessage")||n.hooks.helperMissing).call(null!=t?t:n.nullContext||{},{name:"intlMessage",hash:{user:null!=t?a(t,"user"):t,intlName:null!=t?a(t,"intlName"):t},data:o,loc:{start:{line:28,column:7},end:{line:28,column:50}}}))+"\n"},24:function(n,t,l,e,o){var a,r=n.lookupProperty||function(n,t){if(Object.prototype.hasOwnProperty.call(n,t))return n[t]};return"\t\t\t\t\t\t\t"+n.escapeExpression("function"==typeof(a=null!=(a=r(l,"user")||(null!=t?r(t,"user"):t))?a:n.hooks.helperMissing)?a.call(null!=t?t:n.nullContext||{},{name:"user",hash:{},data:o,loc:{start:{line:30,column:7},end:{line:30,column:15}}}):a)+"\n"},26:function(n,t,l,e,o){return'\t\t\t\t<span class="attribution empty"> </span>\n'},28:function(n,t,l,e,o){var a=n.lookupProperty||function(n,t){if(Object.prototype.hasOwnProperty.call(n,t))return n[t]};return'\t\t\t\t<span class="engagement-item like">\n\t\t\t\t\t'+n.escapeExpression((a(l,"outlet")||t&&a(t,"outlet")||n.hooks.helperMissing).call(null!=t?t:n.nullContext||{},null!=t?a(t,"like-engagement-item-view"):t,{name:"outlet",hash:{},data:o,loc:{start:{line:43,column:5},end:{line:43,column:41}}}))+"\n\t\t\t\t</span>\n"},30:function(n,t,l,e,o){var a,r=null!=t?t:n.nullContext||{},i=n.lookupProperty||function(n,t){if(Object.prototype.hasOwnProperty.call(n,t))return n[t]};return'\t\t\t\t<span role="button" class="engagement-item fave '+(null!=(a=i(l,"if").call(r,null!=(a=null!=(a=null!=t?i(t,"photo"):t)?i(a,"engagement"):a)?i(a,"isFaved"):a,{name:"if",hash:{},fn:n.program(31,o,0),inverse:n.noop,data:o,loc:{start:{line:46,column:52},end:{line:46,column:97}}}))?a:"")+(null!=(a=i(l,"if").call(r,null!=t?i(t,"canFave"):t,{name:"if",hash:{},fn:n.noop,inverse:n.program(33,o,0),data:o,loc:{start:{line:46,column:97},end:{line:46,column:132}}}))?a:"")+'" tabindex="0"\n'+(null!=(a=i(l,"if").call(r,null!=t?i(t,"isFaved"):t,{name:"if",hash:{},fn:n.program(35,o,0),inverse:n.program(37,o,0),data:o,loc:{start:{line:47,column:5},end:{line:51,column:12}}}))?a:"")+"\t\t\t\t\t"+(null!=(a=i(l,"unless").call(r,null!=t?i(t,"canFave"):t,{name:"unless",hash:{},fn:n.program(39,o,0),inverse:n.noop,data:o,loc:{start:{line:52,column:5},end:{line:52,column:48}}}))?a:"")+'>\n\t\t\t\t\t<span class="engagement-icon">\n\t\t\t\t\t\t<i class="animated-fave-star"></i>\n\t\t\t\t\t</span>\n\t\t\t\t\t<span class="engagement-count">\n\t\t\t\t\t\t'+(null!=(a=i(l,"if").call(r,null!=(a=null!=(a=null!=t?i(t,"photo"):t)?i(a,"engagement"):a)?i(a,"faveCount"):a,{name:"if",hash:{},fn:n.program(41,o,0),inverse:n.noop,data:o,loc:{start:{line:57,column:6},end:{line:57,column:90}}}))?a:"")+"\n\t\t\t\t\t</span>\n\t\t\t\t</span>\n"},31:function(n,t,l,e,o){return" faved"},33:function(n,t,l,e,o){return" can-not-fave"},35:function(n,t,l,e,o){var a=n.lookupProperty||function(n,t){if(Object.prototype.hasOwnProperty.call(n,t))return n[t]};return'\t\t\t\t\t\taria-label="'+n.escapeExpression((a(l,"intlMessage")||t&&a(t,"intlMessage")||n.hooks.helperMissing).call(null!=t?t:n.nullContext||{},{name:"intlMessage",hash:{intlName:"fave-view.UNFAVE_PHOTO"},data:o,loc:{start:{line:48,column:18},end:{line:48,column:67}}}))+'"\n'},37:function(n,t,l,e,o){var a=n.lookupProperty||function(n,t){if(Object.prototype.hasOwnProperty.call(n,t))return n[t]};return'\t\t\t\t\t\taria-label="'+n.escapeExpression((a(l,"intlMessage")||t&&a(t,"intlMessage")||n.hooks.helperMissing).call(null!=t?t:n.nullContext||{},{name:"intlMessage",hash:{intlName:"common.ADD_TO_FAVORITES"},data:o,loc:{start:{line:50,column:18},end:{line:50,column:68}}}))+'"\n'},39:function(n,t,l,e,o){return'tabindex="-1"'},41:function(n,t,l,e,o){var a,r=n.lookupProperty||function(n,t){if(Object.prototype.hasOwnProperty.call(n,t))return n[t]};return n.escapeExpression((r(l,"formatNumber")||t&&r(t,"formatNumber")||n.hooks.helperMissing).call(null!=t?t:n.nullContext||{},null!=(a=null!=(a=null!=t?r(t,"photo"):t)?r(a,"engagement"):a)?r(a,"faveCount"):a,{name:"formatNumber",hash:{},data:o,loc:{start:{line:57,column:40},end:{line:57,column:83}}}))},43:function(n,t,l,e,o){return" hidden"},45:function(n,t,l,e,o){var a,r=n.lookupProperty||function(n,t){if(Object.prototype.hasOwnProperty.call(n,t))return n[t]};return n.escapeExpression((r(l,"formatNumber")||t&&r(t,"formatNumber")||n.hooks.helperMissing).call(null!=t?t:n.nullContext||{},null!=(a=null!=(a=null!=t?r(t,"photo"):t)?r(a,"engagement"):a)?r(a,"commentCount"):a,{name:"formatNumber",hash:{},data:o,loc:{start:{line:66,column:42},end:{line:66,column:88}}}))},47:function(n,t,l,e,o){return'\t\t\t\t<span role="button" class="engagement-item curate" tabindex="0">\n\t\t\t\t\t<span class="engagement-icon">\n\t\t\t\t\t\t<svg class="icon icon-curate"><use xlink:href="#icon-curate"></use></svg>\n\t\t\t\t\t</span>\n\t\t\t\t</span>\n'},compiler:[8,">= 4.3.0"],main:function(n,t,l,e,o){var a,r,i=null!=t?t:n.nullContext||{},s=n.hooks.helperMissing,u="function",c=n.escapeExpression,p=n.lookupProperty||function(n,t){if(Object.prototype.hasOwnProperty.call(n,t))return n[t]};return'<div class="photo-list-photo-interaction">\n\t<a class="overlay" href="'+c(typeof(r=null!=(r=p(l,"photoPageUrl")||(null!=t?p(t,"photoPageUrl"):t))?r:s)===u?r.call(i,{name:"photoPageUrl",hash:{},data:o,loc:{start:{line:3,column:26},end:{line:3,column:42}}}):r)+'" tabindex="0" role="heading" aria-level="3" aria-label="'+(null!=(a=p(l,"if").call(i,null!=(a=null!=t?p(t,"photo"):t)?p(a,"title"):a,{name:"if",hash:{},fn:n.program(1,o,0),inverse:n.program(3,o,0),data:o,loc:{start:{line:3,column:99},end:{line:3,column:190}}}))?a:"")+(null!=(a=p(l,"if").call(i,null!=(a=null!=t?p(t,"photo"):t)?p(a,"isOwner"):a,{name:"if",hash:{},fn:n.program(5,o,0),inverse:n.program(7,o,0),data:o,loc:{start:{line:3,column:190},end:{line:3,column:335}}}))?a:"")+'"></a>\n'+(null!=(a=p(l,"if").call(i,null!=t?p(t,"hasExtraFunctionality"):t,{name:"if",hash:{},fn:n.program(9,o,0),inverse:n.noop,data:o,loc:{start:{line:4,column:1},end:{line:16,column:8}}}))?a:"")+'\t<div class="interaction-bar" title="'+(null!=(a=p(l,"if").call(i,null!=(a=null!=t?p(t,"photo"):t)?p(a,"title"):a,{name:"if",hash:{},fn:n.program(1,o,0),inverse:n.program(3,o,0),data:o,loc:{start:{line:17,column:37},end:{line:17,column:128}}}))?a:"")+(null!=(a=p(l,"if").call(i,null!=(a=null!=t?p(t,"photo"):t)?p(a,"isOwner"):a,{name:"if",hash:{},fn:n.program(5,o,0),inverse:n.program(7,o,0),data:o,loc:{start:{line:17,column:128},end:{line:17,column:273}}}))?a:"")+'">\n\t\t<div class="text">\n'+(null!=(a=p(l,"if").call(i,null!=(a=null!=t?p(t,"photo"):t)?p(a,"title"):a,{name:"if",hash:{},fn:n.program(16,o,0),inverse:n.program(18,o,0),data:o,loc:{start:{line:19,column:3},end:{line:23,column:10}}}))?a:"")+(null!=(a=p(l,"if").call(i,null!=(a=null!=(a=null!=t?p(t,"photo"):t)?p(a,"owner"):a)?p(a,"displayname"):a,{name:"if",hash:{},fn:n.program(20,o,0),inverse:n.program(26,o,0),data:o,loc:{start:{line:24,column:3},end:{line:36,column:10}}}))?a:"")+'\t\t</div>\n\n\t\t<div class="engagement">\n\n'+(null!=(a=(p(l,"isFlipped")||t&&p(t,"isFlipped")||s).call(i,"enable-likes",{name:"isFlipped",hash:{},fn:n.program(28,o,0),inverse:n.program(30,o,0),data:o,loc:{start:{line:41,column:3},end:{line:60,column:17}}}))?a:"")+'\t\t\t<a class="engagement-item comment" href="'+c(typeof(r=null!=(r=p(l,"photoPageUrl")||(null!=t?p(t,"photoPageUrl"):t))?r:s)===u?r.call(i,{name:"photoPageUrl",hash:{},data:o,loc:{start:{line:61,column:44},end:{line:61,column:60}}}):r)+'#comments" aria-label="'+c((p(l,"intlMessage")||t&&p(t,"intlMessage")||s).call(i,{name:"intlMessage",hash:{intlName:"photo-page-scrappy.PLURAL_COMMENT"},data:o,loc:{start:{line:61,column:83},end:{line:61,column:143}}}))+'" tabindex="0">\n\t\t\t\t<span class="engagement-icon">\n\t\t\t\t\t<svg class="icon icon-comment_hollow"><use xlink:href="#icon-comment_hollow"></use></svg>\n\t\t\t\t</span>\n\t\t\t\t<span class="engagement-count'+(null!=(a=p(l,"if").call(i,null!=(a=null!=(a=null!=t?p(t,"photo"):t)?p(a,"engagement"):a)?p(a,"commentCount"):a,{name:"if",hash:{},fn:n.noop,inverse:n.program(43,o,0),data:o,loc:{start:{line:65,column:33},end:{line:65,column:84}}}))?a:"")+'">\n\t\t\t\t\t'+(null!=(a=p(l,"if").call(i,null!=(a=null!=(a=null!=t?p(t,"photo"):t)?p(a,"engagement"):a)?p(a,"commentCount"):a,{name:"if",hash:{},fn:n.program(45,o,0),inverse:n.noop,data:o,loc:{start:{line:66,column:5},end:{line:66,column:95}}}))?a:"")+"\n\t\t\t\t</span>\n\t\t\t</a>\n\n"+(null!=(a=p(l,"if").call(i,null!=t?p(t,"displayCurate"):t,{name:"if",hash:{},fn:n.program(47,o,0),inverse:n.noop,data:o,loc:{start:{line:70,column:3},end:{line:76,column:10}}}))?a:"")+"\t\t</div>\n\n\t</div>\n</div>\n"},useData:!0}),e={};n.Array.each([],(function(t){var l=n.Template.get("hermes/"+t);l&&(e[t]=l)})),n.Template.register("hermes/photo-list-photo-interaction",(function(t,o){return(o=o||{}).partials=o.partials?n.merge(e,o.partials):e,l(t,o)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("hermes-template-like-engagement-item",(function(n,e){var l=n.Template.Handlebars.revive({1:function(n,e,l,t,a){return" liked"},3:function(n,e,l,t,a){return" can-not-like"},5:function(n,e,l,t,a){return" padded"},7:function(n,e,l,t,a){return" small"},9:function(n,e,l,t,a){return" theme-light"},11:function(n,e,l,t,a){return" theme-dark"},13:function(n,e,l,t,a){return" empty"},15:function(n,e,l,t,a){return" hidden"},17:function(n,e,l,t,a){var o,i=n.lookupProperty||function(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]};return n.escapeExpression((i(l,"formatNumber")||e&&i(e,"formatNumber")||n.hooks.helperMissing).call(null!=e?e:n.nullContext||{},null!=(o=null!=(o=null!=(o=null!=e?i(e,"engagement"):e)?i(o,"reactions"):o)?i(o,"like"):o)?i(o,"count"):o,{name:"formatNumber",hash:{},data:a,loc:{start:{line:23,column:41},end:{line:23,column:89}}}))},compiler:[8,">= 4.3.0"],main:function(n,e,l,t,a){var o,i=null!=e?e:n.nullContext||{},r=n.hooks.helperMissing,u=n.lookupProperty||function(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]};return'<span role="button"\n\tclass="like-engagement-item\n\t'+(null!=(o=u(l,"if").call(i,null!=(o=null!=(o=null!=(o=null!=e?u(e,"engagement"):e)?u(o,"reactions"):o)?u(o,"like"):o)?u(o,"didViewerReact"):o,{name:"if",hash:{},fn:n.program(1,a,0),inverse:n.noop,data:a,loc:{start:{line:8,column:1},end:{line:8,column:62}}}))?o:"")+"\n\t"+(null!=(o=u(l,"if").call(i,null!=(o=null!=(o=null!=(o=null!=e?u(e,"engagement"):e)?u(o,"reactions"):o)?u(o,"like"):o)?u(o,"canReact"):o,{name:"if",hash:{},fn:n.noop,inverse:n.program(3,a,0),data:a,loc:{start:{line:9,column:1},end:{line:9,column:63}}}))?o:"")+"\n\t"+(null!=(o=u(l,"if").call(i,null!=e?u(e,"isPadded"):e,{name:"if",hash:{},fn:n.program(5,a,0),inverse:n.noop,data:a,loc:{start:{line:10,column:1},end:{line:10,column:31}}}))?o:"")+"\n\t"+(null!=(o=(u(l,"ifCond")||e&&u(e,"ifCond")||r).call(i,null!=e?u(e,"size"):e,"===","small",{name:"ifCond",hash:{},fn:n.program(7,a,0),inverse:n.noop,data:a,loc:{start:{line:11,column:1},end:{line:11,column:48}}}))?o:"")+"\n\t"+(null!=(o=(u(l,"ifCond")||e&&u(e,"ifCond")||r).call(i,null!=e?u(e,"theme"):e,"===","light",{name:"ifCond",hash:{},fn:n.program(9,a,0),inverse:n.noop,data:a,loc:{start:{line:12,column:1},end:{line:12,column:55}}}))?o:"")+"\n\t"+(null!=(o=(u(l,"ifCond")||e&&u(e,"ifCond")||r).call(i,null!=e?u(e,"theme"):e,"===","dark",{name:"ifCond",hash:{},fn:n.program(11,a,0),inverse:n.noop,data:a,loc:{start:{line:13,column:1},end:{line:13,column:53}}}))?o:"")+'"\n\ttabindex="0">\n\n\t<span class="like-engagement-icon">\n\t\t<svg class="icon icon-like"><use xlink:href="#icon-like"></use></svg>\n\t\t<svg class="icon icon-liked"><use xlink:href="#icon-liked"></use></svg>\n\t</span>\n\t<span class="like-engagement-count\n\t\t'+(null!=(o=u(l,"if").call(i,null!=(o=null!=(o=null!=(o=null!=e?u(e,"engagement"):e)?u(o,"reactions"):o)?u(o,"like"):o)?u(o,"count"):o,{name:"if",hash:{},fn:n.noop,inverse:n.program(13,a,0),data:a,loc:{start:{line:21,column:2},end:{line:21,column:54}}}))?o:"")+"\n\t\t"+(null!=(o=u(l,"if").call(i,null!=e?u(e,"showCount"):e,{name:"if",hash:{},fn:n.noop,inverse:n.program(15,a,0),data:a,loc:{start:{line:22,column:2},end:{line:22,column:33}}}))?o:"")+'">\n\t\t'+(null!=(o=u(l,"if").call(i,null!=(o=null!=(o=null!=(o=null!=e?u(e,"engagement"):e)?u(o,"reactions"):o)?u(o,"like"):o)?u(o,"count"):o,{name:"if",hash:{},fn:n.program(17,a,0),inverse:n.noop,data:a,loc:{start:{line:23,column:2},end:{line:23,column:96}}}))?o:"")+"\n\t</span>\n</span>"},useData:!0}),t={};n.Array.each([],(function(e){var l=n.Template.get("hermes/"+e);l&&(t[e]=l)})),n.Template.register("hermes/like-engagement-item",(function(e,a){return(a=a||{}).partials=a.partials?n.merge(t,a.partials):t,l(e,a)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("hermes-template-first-like-modal",(function(e,a){var l=e.Template.Handlebars.revive({compiler:[8,">= 4.3.0"],main:function(e,a,l,n,t){var s,r=null!=a?a:e.nullContext||{},i=e.hooks.helperMissing,o="function",m=e.escapeExpression,c=e.lookupProperty||function(e,a){if(Object.prototype.hasOwnProperty.call(e,a))return e[a]};return'<img src="'+m(typeof(s=null!=(s=c(l,"assetRoot")||(null!=a?c(a,"assetRoot"):a))?s:i)===o?s.call(r,{name:"assetRoot",hash:{},data:t,loc:{start:{line:1,column:10},end:{line:1,column:23}}}):s)+'/images/likes/get-ya-dang-thumbs-up.svg">\n\n<p><strong>'+m((c(l,"intlMessage")||a&&c(a,"intlMessage")||i).call(r,{name:"intlMessage",hash:{intlName:"likes.EXCITED_MODAL_HEADER"},data:t,loc:{start:{line:3,column:11},end:{line:3,column:64}}}))+"</strong></p>\n<span>"+m((c(l,"intlMessage")||a&&c(a,"intlMessage")||i).call(r,{name:"intlMessage",hash:{intlName:"likes.LIKES_MODAL_DESC"},data:t,loc:{start:{line:4,column:6},end:{line:4,column:55}}}))+'</span><br>\n<br>\n<a href="'+m(typeof(s=null!=(s=c(l,"url")||(null!=a?c(a,"url"):a))?s:i)===o?s.call(r,{name:"url",hash:{},data:t,loc:{start:{line:6,column:9},end:{line:6,column:16}}}):s)+'" target="_blank">'+m((c(l,"intlMessage")||a&&c(a,"intlMessage")||i).call(r,{name:"intlMessage",hash:{intlName:"common.LEARN_MORE"},data:t,loc:{start:{line:6,column:34},end:{line:6,column:78}}}))+"</a>\n"},useData:!0}),n={};e.Array.each([],(function(a){var l=e.Template.get("hermes/"+a);l&&(n[a]=l)})),e.Template.register("hermes/first-like-modal",(function(a,t){return(t=t||{}).partials=t.partials?e.merge(n,t.partials):n,l(a,t)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("likes-helper",(function(e,i){var n=require("hermes-core/flog")(i);e.LikesHelper=function(i,t){var o=e.mix({langBundles:["common","likes"],appContext:i},e.Localizable),l=new e.TemplateLibraryHelper(i,{localizeLib:o}),a={toggleLikeLocal:function(n,t){var o=t.engagementModel.getValue("id"),l=t.engagementModel,a=l.getValue("reactions").like;if(a.canReact)return i.getViewer().signedIn||this.showSignUpAndLikeModal(o,e.config.win.location.href),a=l.toggleReaction("like",n),n&&this.showFirstLikeModal(),a},updateReactionRemote:function(i){var t=this,o=i.engagementModel;o.getValue("reactions").like;return this.isUpdatingLike?e.Promise.resolve({}):(this.isUpdatingLike=!0,o.updateReactionRemote().then((function(e){return t.isUpdatingLike=!1,e})).catch((function(e){return n.error("Error liking photo",{err:e}),t.isUpdatingLike=!1,e})))},updateLikeEngagementItemNode:function(e,i){var n=e.one(".engagement-count");e.toggleClass("liked",i.didViewerReact),n&&(n.set("text",i.count),n.toggleClass("empty",0===i.count))},showSignUpAndLikeModal:function(n,t){var l,a=o.intlMessage({intlName:"likes.SIGN_IN_BEFORE_LIKE_TITLE"}),s=o.intlMessage({intlName:"likes.JOIN_FLICKR_AND_LIKE"});(l=new e.Views.SignUpModal({appContext:i,signUpHeaderClass:"signup-like",signUpTitle:a,signUpMessage:s,beaconPrefix:"like"})).on("signUpClick",(function(e){console.log("sign up pending LIKE")})),l.on("signInClick",(function(e){console.log("add pending LIKE")})),l.show()},showFirstLikeModal:function(){new e.Views.FluidModal({htmlMessage:l.getTemplate("first-like-modal")({url:"https://blog.flickr.net"}),appContext:i,classList:"first-like-modal-view",dismissOnOverlayClick:!0,showHeader:!1,showCancelX:!1,actionButtonLabel:o.intlMessage({intlName:"common.GOT_IT"}),showCancelButton:!1,width:500}).show()}};return e.augment(a,e.EventTarget),a}}),"@VERSION@",{requires:["event-custom","template-lib-helper","hermes-template-first-like-modal"],optionalRequires:["hermes-core"],langBundles:["common","likes"]});YUI.add("like-engagement-item-view",(function(e,i){var t=require("hermes-core/flog")(i);e.namespace("Views")[this.name]=e.Base.create("like-engagement-item-view",e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(i){this.set("isActiveViewAgnostic",!0),this.config=this.processParams(i),this.photoCardHelper=new e.PhotoCardHelper(this.appContext),this.likesHelper=new e.LikesHelper(this.appContext,{}),this.signedIn=this.appContext.getViewer().signedIn},processParams:function(e){return{photoId:(e=Object.assign({engagementModelName:"photo-engagement-models"},e,e.subviewParams?e.subviewParams["like-engagement-item-view"]:{})).photoId,theme:e.theme,showCount:e.showCount,size:e.size,isPadded:e.isPadded,engagementModelName:e.engagementModelName}},loadState:function(){var e=this;return this.appContext.getModel(this.config.engagementModelName,this.config.photoId).then((function(i){e.engagementModel=i}))},buildContainer:function(){this.setContainerWithTemplate("like-engagement-item",Object.assign({engagement:this.photoCardHelper.convertEngagementModel(this.engagementModel)},this.config))},activate:function(){var e=this,i=this.get("container");this.likeNode=i.one(".like-engagement-item"),this.countNode=this.likeNode.one(".like-engagement-count"),this.registerEventHandler(this.likeNode.on("click",this.handleLikeClick.bind(this))),this.registerEventHandler(this.engagementModel.on("valuesChanged",(function(i){i.reactions&&e.reload()}))),this.fire("activated")},handleLikeClick:function(e){var i=this,n=i.engagementModel,o=n.getValue("reactions").like,s=o.didViewerReact;if(!this.isTogglingLike){if(!(o=this.likesHelper.toggleLikeLocal(!s,{engagementModel:n})))return;this.isTogglingLike=!0,this.likesHelper.updateLikeEngagementItemNode(this.likeNode,o),this.likesHelper.updateReactionRemote({engagementModel:n}).then((function(e){i.isTogglingLike=!1})).catch((function(e){if(i.isTogglingLike=!1,3!==e.code){var o=this.likesHelper.toggleLikeLocal(s,{engagementModel:n});i.likesHelper.updateLikeEngagementItemNode(i.likeNode,o)}t.error("Error liking photo",{err:e}),i.isTogglingLike=!1}))}},showCountNode:function(e){this.countNode.toggleClass("hidden",!e)},reload:function(){this.detachRegisteredEvents(),this.buildContainer(),this.activate()}})}),"@VERSION@",{requires:["flickr-view","hermes-template-like-engagement-item","likes-helper","photo-card-helper"],optionalRequires:["hermes-core"],langBundles:["common","likes"]});YUI.add("photo-list-photo-interaction-view",(function(e,t){var i=require("hermes-core/type-validator"),o=require("hermes-core/flog")(t),n={faveClickArea:".fave-area",commentClickArea:".comment-area",removeFaveTool:"remove-fave",removePoolTool:"remove-group-pool",removeShowCasePhoto:"remove-showcase-photo",removePhotosOfYou:"remove-photosof-you",scotchTool:"scotch-photo"};e.namespace("Views")[this.name]=e.Base.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){var t=this.appContext.getViewer();return e.subviewParams={"like-engagement-item-view":{photoId:this.get("id"),showCount:!0,size:"small",isPadded:!1,theme:"light",engagementModelName:"photo-lite-models"}},""===this.get("container").get("innerHTML")&&this.setContainerHTML(""),t.signedIn&&e.nsid===t.nsid||this.set("viewingSelf",!1),e.photoPageUrl&&this.set("photoPageUrl",e.photoPageUrl),this.params=e,this.signedIn=t.signedIn,void 0!==e.showCurate?this.showCurate=e.showCurate:this.showCurate=this.signedIn,this},subviewConfig:{"like-engagement-item-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0,disabled:function(){return!this.appContext.flipper.isFlipped("enable-likes")}}},loadState:function(){var t=[],i=this.get("listModelParams");return t.push(this.appContext.getModel(this.get("engagementModelName"),this.get("id"))),i&&t.push(this.appContext.getModel(i.registryName,i.modelIdOrAttributes)),e.Promise.all(t).then(function(e){var t=e[0],i=e[1];this.set("engagement",t),this.extraFunctionality={moreMenuItems:[]},this.params.removeOwnFaves?this.get("model").getValue("isOwner")&&!this.get("viewingSelf")&&(this.extraFunctionality.removeToolClass=n.removeFaveTool):this.params.removePoolPhoto?(this.get("model").getValue("isOwner")||i&&(i.getValue("group").getValue("isAdmin")||i.getValue("group").getValue("isModerator")))&&(this.extraFunctionality.removeToolClass=n.removePoolTool):this.params.scotch?this.extraFunctionality.removeToolClass=n.scotchTool:this.params.removeShowCasePhoto?this.get("model").getValue("isOwner")&&this.get("viewingSelf")&&(this.extraFunctionality.removeToolClass=n.removeShowCasePhoto):this.params.removePhotosOfYou&&this.get("viewingSelf")&&(this.extraFunctionality.removeToolClass=n.removePhotosOfYou),this.params.excludePeople&&this.extraFunctionality.moreMenuItems.push("exclude-people"),this.params.banUser&&i&&(i.getValue("group").getValue("isAdmin")||i.getValue("group").getValue("isModerator"))&&this.extraFunctionality.moreMenuItems.push("ban-user"),this.params.removeUser&&i&&(i.getValue("group").getValue("isAdmin")||i.getValue("group").getValue("isModerator"))&&this.extraFunctionality.moreMenuItems.push("remove-user"),this.params.bigScotch&&(this.extraFunctionality.bigScotchTitle=this.godMessage({intlName:"explore.DO_BIG_SCOTCH"})),this.extraFunctionality.moreMenuItems=this.extraFunctionality.moreMenuItems.join(",")}.bind(this))},buildContainer:function(t){var i=this.get("engagement"),o=i.getValue("faveCount"),n=i.getValue("isFaved"),a=i.getValue("canFave"),s=i.getValue("commentCount");return t=t||{},o=e.IntlNumber.format(o,this.appContext.lang,1),s=e.IntlNumber.format(s,this.appContext.lang,1),t.photo=this.get("model").toJSON(),t.photoPageUrl=this.get("photoPageUrl"),t.faveCount=o,t.isFaved=n,t.canFave=a,t.commentCount=s,t.displayCurate=this.showCurate,t.hasExtraFunctionality=Object.keys(this.extraFunctionality).length>0,t.removeToolClass=this.extraFunctionality.removeToolClass,t.moreMenuItems=this.extraFunctionality.moreMenuItems,t.bigScotchTitle=this.extraFunctionality.bigScotchTitle,this.setContainerWithTemplate("photo-list-photo-interaction",t),this},activate:function(){var t=this,i=(this.appContext.getViewer(),this.get("engagement")),o=this.get("container");return this.infoBar=o.one(".interaction-bar"),this.detailsNode=this.infoBar.one(".text"),this.infoBarEngagement=this.infoBar.one(".engagement"),this.faveNode=this.infoBarEngagement.one(".engagement-item.fave"),this.commentNode=this.infoBarEngagement.one(".engagement-item.comment"),this.appContext.flipper.isFlipped("enable-likes")&&(this.likeNode=this.infoBarEngagement.one(".engagement-item.like"),this.likeView=this.subviews["like-engagement-item-view"],this.likeView.isActivated?(this.isActive=!0,this.fire("activated")):this.likeView.on("activated",(function(){t.isActive=!0,t.fire("activated")}))),this.curateNode=this.infoBar.one(".engagement-item.curate"),this.curateNode&&this.registerEventHandler(this.curateNode.on(["click","keydown"],this.handleCurateClick.bind(this))),this.faveNode&&(this.faveCountNode=this.faveNode.one(".engagement-count"),this.registerEventHandler(this.faveNode.on(["click","keydown"],this.handleFaveClick.bind(this)))),this.commentNode&&(this.commentIconNode=this.commentNode.one(".engagement-icon"),this.commentTextNode=this.commentNode.one(".engagement-count"),this.registerEventHandler(this.commentNode.on(["click","keydown"],this.handleCommentClick.bind(this)))),this.registerEventHandler(i.on("valuesChanged",this.handleEngagementModelValuesChanged.bind(this))),this.registerEventHandler(e.on("resize",e.betterThrottle(this.updateBreakpoints.bind(this),500,this,!0))),this.appContext.flipper.isFlipped("enable-likes")||(t.isActive=!0,t.fire("activated")),this},handleFaveClick:function(e){var t,i,n,a,s;if("click"===e.type||13===e.keyCode||32===e.keyCode){if(t=this,i=e.currentTarget,n=i.one(".engagement-count"),s=this.appContext.getViewer(),e.halt(),this.faveNode.hasClass("can-not-fave"))return;if(!this.signedIn)return void this.showSignUpAndFaveModal();this.isFaving||(this.isFaving=!0,this.get("engagement").toggleFave(),a=this.get("engagement").getValue("faveCount"),i.toggleClass("faved",this.get("engagement").getValue("isFaved")),n.toggleClass("empty",0===a),n&&a>0?n.set("text",a):n.set("text",""),this.get("engagement").remoteUpdate().then(function(){this.appContext.getModelRegistry("favorite-models").then((function(e){e.proxy(s.nsid).getValue("photoPageList").remove(t.get("model"))})),this.isFaving=!1}.bind(this),function(e){3!==e.code&&(this.get("engagement").toggleFave(),i.toggleClass("faved",this.get("engagement").getValue("isFaved")),n&&(n.set("text",a),n.toggleClass("empty",0===a))),o.error("Error faving photo",{err:e}),this.isFaving=!1}.bind(this)))}},handleCommentClick:function(t){var i,o=this;if("click"===t.type||13===t.keyCode||32===t.keyCode){t.halt();let n={appContext:this.appContext,photoId:this.get("model").getValue("id"),isScrollable:!0};(i=new e.ModalDroparoundHelper(this.appContext,{configs:{common:{subviewName:"photo-comments-view"},droparound:{preferTop:!0,width:400,height:400,anchorElement:this.commentIconNode,keyboardAnchorElement:this.commentIconNode,subviewParams:n},modal:{height:550,flexLayout:!0,subviewParams:Object.assign({},n,{hasHeader:!0})}}})).show(),o.registerEventHandler(e.on("addComment:showingSignupModal",(function(){i.close()}))),i.on("close",(function(){o.commentNode.removeClass("active"),o.fire("hoverActionClosed")})),this.commentNode.addClass("active"),this.fire("hoverActionOpened")}},showSignUpAndFaveModal:function(){var t,i=this.intlMessage({intlName:"fave-view.SIGN_IN_BEFORE_FAVE_TITLE"}),o=this.intlMessage({intlName:"fave-view.JOIN_FLICKR_AND_FAVE"}),n=this.get("engagement"),a=n.getValue("id"),s=e.url(e.URLHelper.getPhotoPage({photoId:a,pathAlias:n.getValue("ownerNsid")}));(t=new e.Views.SignUpModal({appContext:this.appContext,signUpHeaderClass:"signup-fave",signUpTitle:i,signUpMessage:o,beaconPrefix:"fave"})).on("signUpClick",(function(t){e.SigninHelper.signUpPendingFave({id:a},{postLoginUrl:s})})),t.on("signInClick",(function(t){e.SigninHelper.addPendingFave({id:a},{postLoginUrl:s})})),t.show()},showSignUpAndCommentModal:function(){var t,i,o=this.intlMessage({intlName:"photo-page-scrappy.SIGNUP_AND_COMMENT_TITLE"}),n=this.intlMessage({intlName:"photo-page-scrappy.SIGNUP_AND_COMMENT_MESSAGE"}),a=this.get("engagement");e.rapidTracker.beacon(this.name,"commentIconClick"),i=e.url(e.URLHelper.getPhotoPage({photoId:a.getValue("id"),pathAlias:a.getValue("ownerNsid")})),(t=new e.Views.SignUpModal({appContext:this.appContext,signUpHeaderClass:"signup-comment",signUpTitle:o,signUpMessage:n,beaconPrefix:"comment"})).on("signUpClick",(function(t){e.SigninHelper._redirectToSignUp("comment",{postLoginUrl:i})})),t.on("signInClick",(function(t){e.SigninHelper._redirectToSignin("comment",{postLoginUrl:i})})),t.show()},handleEngagementModelValuesChanged:function(t){var i;t.commentCount&&(i=t.commentCount.newVal,this.commentTextNode.set("text",e.IntlNumber.format(i,this.appContext.lang,1)),this.commentTextNode.toggleClass("hidden",0===i),this.updateBreakpoints()),void 0===t.faveCount&&void 0===t.isFaved&&void 0===t.canFave||this.updateBreakpoints()},handleCurateClick:function(e){"click"!==e.type&&13!==e.keyCode&&32!==e.keyCode||(e.halt(),this.showAddToCuration())},showAddToCuration:function(){var t=this,i=this.get("model").getValue("isOwner"),o=new e.CurationHelper(this.appContext,{view:this});"fluid-droparound-view"===o.showAddToCuration({photoId:this.get("model").getValue("id"),showAlbums:i,showGalleries:!i,anchorNode:this.curateNode}).name&&(t.fire("hoverActionOpened"),o.on("curateDroparoundClosed",(function(){t.fire("hoverActionClosed")})))},updateBreakpoints:function(){var e,t=0;this.isActive&&(0===(e=this.infoBar.get("clientWidth"))||e>160||(this.infoBar.addClass("invisible"),this.infoBar.removeClass("narrow"),this.detailsNode.removeClass("hidden"),this.commentNode.removeClass("hidden"),this.curateNode&&this.curateNode.removeClass("hidden"),this.appContext.flipper.isFlipped("enable-likes")?this.likeNode&&(this.likeNode.removeClass("hidden"),this.likeNode.removeClass("last"),this.likeView.showCountNode(!0)):this.faveNode&&(this.faveNode.removeClass("hidden"),this.faveNode.removeClass("last"),this.faveCountNode.removeClass("hidden")),this.detailsNode.get("clientWidth")<=10&&(this.infoBar.addClass("narrow"),this.detailsNode.addClass("hidden")),this.infoBar.get("clientWidth")<this.infoBarEngagement.get("clientWidth")+24&&(this.commentNode.addClass("hidden"),this.appContext.flipper.isFlipped("enable-likes")?(this.curateNode?t=this.curateNode.get("clientWidth"):this.likeNode.addClass("last"),this.infoBar.get("clientWidth")<t+this.likeNode.get("clientWidth")+24&&this.likeView.showCountNode(!1),this.curateNode&&this.infoBar.get("clientWidth")<this.infoBarEngagement.get("clientWidth")+24&&(this.curateNode.addClass("hidden"),this.likeNode.addClass("last"))):(this.curateNode?t=this.curateNode.get("clientWidth"):this.faveNode.addClass("last"),this.faveCountNode&&this.infoBar.get("clientWidth")<t+this.faveNode.get("clientWidth")+24&&this.faveCountNode.addClass("hidden"),this.curateNode&&this.infoBar.get("clientWidth")<this.infoBarEngagement.get("clientWidth")+24&&(this.curateNode.addClass("hidden"),this.faveNode.addClass("last")))),this.infoBar.removeClass("invisible")))},destructor:function(){}},{ATTRS:{id:{writeOnce:"initOnly",validator:function(e,t){return i.photoId(e)}},model:{writeOnce:"initOnly"},listModelParams:{writeOnce:"initOnly"},photoPageUrl:{writeOnce:"initOnly"},engagement:{value:null},viewingSelf:{value:!0},engagementModelName:{writeOnce:"initOnly",value:null,validator:function(t,i){return e.AttributeHelpers.validateString(t)}},layoutWidth:{validator:function(t,i){return e.AttributeHelpers.validateFloat(t)},setter:function(t){return e.AttributeHelpers.coerceFloat(t)||void 0},defaultFn:function(e){return 0}},isFaving:{value:!1,validator:function(t,i){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)}}}})}),"@VERSION@",{requires:["flickr-view","hermes-template-photo-list-photo-interaction","attribute-helpers","fluid-modal-view","fluid-droparound-view","add-to-stuff-view","photo-comments-view","like-engagement-item-view","url","intl-number","curation-helper"],optionalRequires:["fluid","hermes-core"],langBundles:["fave-view","common","photo-page-scrappy","comments"]});